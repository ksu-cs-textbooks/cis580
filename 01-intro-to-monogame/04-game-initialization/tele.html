




  
	
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.128.0">
    <meta name="generator" content="Relearn 6.0.0">
    <meta name="description" content="Before we actually move into the game loop, we need to initialize the game - load all of its needed parts and set all initial values. The MonoGame Game class provides two virtual hook methods for doing this: Game.Initialize() and Game.LoadContent().
You might be wondering why we have two methods, or asking why the constructor is not included in this count. These are all good questions. First, in the documentation we see that Initialize():">
    <meta name="author" content="Nathan Bean">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Game Initialization :: K-State CIS 580 Textbook">
    <meta name="twitter:description" content="Before we actually move into the game loop, we need to initialize the game - load all of its needed parts and set all initial values. The MonoGame Game class provides two virtual hook methods for doing this: Game.Initialize() and Game.LoadContent().
You might be wondering why we have two methods, or asking why the constructor is not included in this count. These are all good questions. First, in the documentation we see that Initialize():">
    <meta property="og:url" content="https://textbooks.cs.ksu.edu/cis580/01-intro-to-monogame/04-game-initialization/">
    <meta property="og:site_name" content="K-State CIS 580 Textbook">
    <meta property="og:title" content="Game Initialization :: K-State CIS 580 Textbook">
    <meta property="og:description" content="Before we actually move into the game loop, we need to initialize the game - load all of its needed parts and set all initial values. The MonoGame Game class provides two virtual hook methods for doing this: Game.Initialize() and Game.LoadContent().
You might be wondering why we have two methods, or asking why the constructor is not included in this count. These are all good questions. First, in the documentation we see that Initialize():">
    <meta property="og:locale" content="en-us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Introduction to MonoGame">
    <meta property="article:published_time" content="2018-08-24T10:53:26-05:00">
    <meta property="article:modified_time" content="2024-08-14T16:23:49-05:00">
    <meta itemprop="name" content="Game Initialization :: K-State CIS 580 Textbook">
    <meta itemprop="description" content="Before we actually move into the game loop, we need to initialize the game - load all of its needed parts and set all initial values. The MonoGame Game class provides two virtual hook methods for doing this: Game.Initialize() and Game.LoadContent().
You might be wondering why we have two methods, or asking why the constructor is not included in this count. These are all good questions. First, in the documentation we see that Initialize():">
    <meta itemprop="datePublished" content="2018-08-24T10:53:26-05:00">
    <meta itemprop="dateModified" content="2024-08-14T16:23:49-05:00">
    <meta itemprop="wordCount" content="897">
    <title>Game Initialization :: K-State CIS 580 Textbook</title>
    <link href="https://textbooks.cs.ksu.edu/cis580/01-intro-to-monogame/04-game-initialization/" rel="canonical" type="text/html" title="Game Initialization :: K-State CIS 580 Textbook">
    <link href="/cis580/01-intro-to-monogame/04-game-initialization/index.xml" rel="alternate" type="application/rss+xml" title="Game Initialization :: K-State CIS 580 Textbook">
    <link href="/cis580/01-intro-to-monogame/04-game-initialization/index.print.html" rel="alternate" type="text/html" title="Game Initialization :: K-State CIS 580 Textbook">
    <link href="/cis580/01-intro-to-monogame/04-game-initialization/embed.html" rel="alternate" type="text/html" title="Game Initialization :: K-State CIS 580 Textbook">
    <link href="/cis580/css/fontawesome-all.min.css?1737133121" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cis580/css/fontawesome-all.min.css?1737133121" rel="stylesheet"></noscript>
    <link href="/cis580/css/nucleus.css?1737133121" rel="stylesheet">
    <link href="/cis580/css/auto-complete.css?1737133121" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cis580/css/auto-complete.css?1737133121" rel="stylesheet"></noscript>
    <link href="/cis580/css/perfect-scrollbar.min.css?1737133121" rel="stylesheet">
    <link href="/cis580/css/fonts.css?1737133121" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cis580/css/fonts.css?1737133121" rel="stylesheet"></noscript>
    <link href="/cis580/css/theme.css?1737133121" rel="stylesheet">
    <link href="/cis580/css/theme-auto.css?1737133121" rel="stylesheet" id="R-variant-style">
    <link href="/cis580/css/chroma-auto.css?1737133121" rel="stylesheet" id="R-variant-chroma-style">
    <link href="/cis580/css/variant.css?1737133121" rel="stylesheet">
    <link href="/cis580/css/print.css?1737133121" rel="stylesheet" media="print">
    <script src="/cis580/js/variant.js?1737133121"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='https:\/\/textbooks.cs.ksu.edu\/cis580';
      window.index_js_url="/cis580/index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'auto', 'light-theme', 'dark-theme' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
    
    <link href="/cis580/css/custom.css?1737133121" rel="stylesheet">
  </head>
  <body class="mobile-support tele disableInlineCopyToClipboard" data-url="/cis580/01-intro-to-monogame/04-game-initialization/">
    
    <div id="tele" class="tele mirror">
    
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      
      
      
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id="game-initialization">Game Initialization</h1>

<p>Before we actually move into the game loop, we need to <em>initialize</em> the game - load all of its needed parts and set all initial values.  The MonoGame <code>Game</code> class provides two virtual <em>hook</em> methods for doing this: <code>Game.Initialize()</code> and <code>Game.LoadContent()</code>.</p>
<p>You might be wondering why we have <em>two</em> methods, or asking why the constructor is not included in this count.  These are all good questions. First, in the documentation we see that <code>Initialize()</code>:</p>
<blockquote>
<p>Initializes attached GameComponent instances and calls LoadContent().</p>
</blockquote>
<p>And, if we look at the template-generated <code>Game.Initialize()</code> method:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl"><span class="kd">protected</span> <span class="kd">override</span> <span class="k">void</span> <span class="n">Initialize</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// TODO: Add your initialization logic here</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">    <span class="k">base</span><span class="p">.</span><span class="n">Initialize</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div><p>We can see that the <code>Game.Initialize()</code> is only invoked <em>after</em> our own initialization logic.  Thus, it is largely a matter of controlling timing.  We only want content (i.e. sounds, textures, etc.) to be loaded once the game is fully initialized.</p>
<p>This is largely because we are using the 3D hardware, which has its own RAM (video memory).  Ideally, textures should be stored there for the fastest and most efficient rendering.  So we want to delay loading our graphics until we have finished configuring the graphics device.  Thus, we do any graphics card configuration in the <code>Initialize()</code> method, <em>before</em> invoking <code>base.Initialize()</code>.</p>
<p>And why not the constructor?  What if we want the player to be able to, upon loosing, immediately restart the game?  If our initialization logic is in <code>Initialize()</code>, we can simply re-invoke that method.  We can&rsquo;t re-construct the <code>Game</code> class though, as it is tied to the life of our application.</p>
<p>Finally, the <code>Game.LoadContent()</code> is invoked after both our <code>Initialze()</code> and the <code>base.Initialize()</code> methods have finished. This means the graphics card is fully initialized, and we can now transfer graphics assets into its memory.</p>
<h3 id="a-simple-example">A Simple Example</h3>
<p>Let&rsquo;s look at a super-simple example demonstrating the game loop.  We&rsquo;ll have a ball that moves a bit each frame and bounces off the sides of the window.</p>
<h4 id="variable-declarations">Variable Declarations</h4>
<p>First, we need to know the ball&rsquo;s position and velocity.  In a two-dimensional game, we would probably use a <a href="https://docs.monogame.net/api/Microsoft.Xna.Framework.Vector2.html" rel="external" target="_blank">Vector2</a> Struct to represent these.  We also need a <code>Texture2D</code> to be the image of the ball:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl"><span class="c1">// The ball&#39;s information</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="n">Vector2</span> <span class="n">_ballPosition</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="n">Vector2</span> <span class="n">_ballVelocity</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="n">Texture2D</span> <span class="n">_ballTexture</span><span class="p">;</span></span></span></code></pre></div><p>Add these lines to the top of the <code>Game1</code> class definition, along with the other field declarations.</p>
<h4 id="initialize-additions">Initialize() Additions</h4>
<p>Then, in our <code>Initialize()</code> method, let&rsquo;s center the ball on the screen:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl">    <span class="c1">// Position the ball in the center of the screen</span>
</span></span><span class="line"><span class="cl">    <span class="n">_ballPosition</span><span class="p">.</span><span class="n">X</span> <span class="p">=</span> <span class="n">GraphicsDevice</span><span class="p">.</span><span class="n">Viewport</span><span class="p">.</span><span class="n">Width</span> <span class="p">/</span> <span class="m">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">_ballPosition</span><span class="p">.</span><span class="n">Y</span> <span class="p">=</span> <span class="n">GraphicsDevice</span><span class="p">.</span><span class="n">Viewport</span><span class="p">.</span><span class="n">Height</span> <span class="p">/</span> <span class="m">2</span><span class="p">;</span></span></span></code></pre></div><p>We&rsquo;ll also give it a random velocity:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl">    <span class="c1">// Give the ball a random velocity</span>
</span></span><span class="line"><span class="cl">    <span class="n">System</span><span class="p">.</span><span class="n">Random</span> <span class="n">rand</span> <span class="p">=</span> <span class="k">new</span> <span class="n">System</span><span class="p">.</span><span class="n">Random</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">_ballVelocity</span><span class="p">.</span><span class="n">X</span> <span class="p">=</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">rand</span><span class="p">.</span><span class="n">NextDouble</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">_ballVelocity</span><span class="p">.</span><span class="n">Y</span> <span class="p">=</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">rand</span><span class="p">.</span><span class="n">NextDouble</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">_ballVelocity</span><span class="p">.</span><span class="n">Normalize</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">_ballVelocity</span> <span class="p">*=</span> <span class="m">100</span><span class="p">;</span></span></span></code></pre></div><p>For now we&rsquo;ll use the <code>System.Random</code> class you are used to.  For some game purposes, it is sufficient, though its randomness is not as random as we&rsquo;ll need for some kinds of games.  Also, note that because <code>Random.NextDouble()</code> returns a double, and <code>Vector2</code> uses floats, we need to implicitly cast the result.  Finally, <code>Vector2.Normalize()</code> will shorten our velocity vector to be of length 
<span class="math align-center">$ 1 $</span>, which the <code>_ballVelocity *= 100;</code> line scales up to a length of 
<span class="math align-center">$ 100 $</span>.  Eventually this will mean our ball will be traveling 100 pixels per second.</p>
<h4 id="adding-the-image-to-the-project">Adding the Image to the Project</h4>
<p>As we said above, <code>LoadContent()</code> is where we load our assets.  For now, we just need an image of a ball.  However, getting this image into our game takes a bit of doing.</p>
<p>First, we need to find an image to use - a .jpeg, .gif, or .png will work fine. Feel free to use this one <a href="#R-image-25e50529347ee4cf155b0f9bbba03d0b" class="lightbox-link"><img alt="a golden ball" class="border lazy lightbox noshadow figure-image" loading="lazy" src="/cis580/images/ball.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-25e50529347ee4cf155b0f9bbba03d0b"><img alt="a golden ball" class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="/cis580/images/ball.png"></a>.</p>
<p>Look in the <em>Content</em> folder of your <strong>solution explorer</strong> in Visual Studio.  You should also notice a file, <em>Content.mgcb</em> in the same folder.  This is a listing of all content to bring into the game.  Go ahead and open it; it will look something like:</p>
<p><a href="#R-image-0ed06c7ec337b880b6ca07d2255abe55" class="lightbox-link"><img alt="The MGCB Editor" class="border lazy lightbox noshadow figure-image" loading="lazy" src="/cis580/images/1.4.1.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-0ed06c7ec337b880b6ca07d2255abe55"><img alt="The MGCB Editor" class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="/cis580/images/1.4.1.png"></a></p>

  
  
<div class="box notices cstyle tip">
  <div class="box-label"><i class="fa-fw fas fa-lightbulb"></i> Tip</div>
  <div class="box-content">

<p>If instead of the editor program a text file is loaded in your VisualStudio instance, try right-click the file and choose &ldquo;open with&rdquo;.  From the dialog, choose the <strong>mgcb-editor-wpf</strong>.  If it is not listed, you may need to install it.  From the command line:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">&gt; dotnet tool install --global dotnet-mgcb-editor 
</span></span><span class="line"><span class="cl">&gt; mgcb-editor --register</span></span></code></pre></div></div>
</div>
<p>Click the &ldquo;Add Existing Item&rdquo; toolbar button:</p>
<p><a href="#R-image-8d94427362bbe1f4d072929d5d8c619a" class="lightbox-link"><img alt="Add Existing Item toolbar button" class="border lazy lightbox noshadow figure-image" loading="lazy" src="/cis580/images/1.4.2.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-8d94427362bbe1f4d072929d5d8c619a"><img alt="Add Existing Item toolbar button" class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="/cis580/images/1.4.2.png"></a></p>
<p>In the Open dialog that appears, select the ball image and click &ldquo;Open&rdquo;.  Then in the next dialog, choose &ldquo;Copy the file to the directory&rdquo;:</p>
<p><a href="#R-image-e252cd8c948a0e5c4839963f653980fc" class="lightbox-link"><img alt="Add File Dialog" class="border lazy lightbox noshadow figure-image" loading="lazy" src="/cis580/images/1.4.3.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-e252cd8c948a0e5c4839963f653980fc"><img alt="Add File Dialog" class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="/cis580/images/1.4.3.png"></a></p>
<p>Finally, save the .mgcb file:</p>
<p><a href="#R-image-17be73ba99cb7c666493fcc281466987" class="lightbox-link"><img alt="Save the .mgcb file" class="border lazy lightbox noshadow figure-image" loading="lazy" src="/cis580/images/1.4.4.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-17be73ba99cb7c666493fcc281466987"><img alt="Save the .mgcb file" class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="/cis580/images/1.4.4.png"></a></p>
<p>Now the image will be built into a game-specific binary format as part of the build process.  We&rsquo;ll delve deeper into how this works in the chapter on the Content Pipeline.</p>
<h4 id="loadcontent-additions">LoadContent() Additions</h4>
<p>To bring the ball texture into the game, we need to load it with a <code>ContentManager</code> class by invoking the <code>ContentManager.Load&lt;T&gt;()</code> method with the name of our content.  The <code>Game</code> class has one already created and ready in the <code>Game.Content</code> property; we&rsquo;ll use it:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl"><span class="n">_ballTexture</span> <span class="p">=</span> <span class="n">Content</span><span class="p">.</span><span class="n">Load</span><span class="p">&lt;</span><span class="n">Texture2D</span><span class="p">&gt;(</span><span class="s">&#34;ball&#34;</span><span class="p">);</span></span></span></code></pre></div><p>Add this line just below the <code>#TODO: use this.Content to load your game content here</code> line in the <code>LoadContent()</code> method.</p>
<p>Note that we use the filename (sans extension) to identify the content file to load, and that we also specify the type of object it should be loaded as (in this case, <code>Texture2D</code>).</p>
<p>At this point, if we were to run the game everything would be initialized.  Now we need to handle updating and rendering the game world.</p>

            <footer class="footline">
              
              
              
              
            </footer>
          </article>
</div>
</main>
</div>

</div>




<script src="/cis580/js/clipboard.min.js?1737133121" defer></script>
<script src="/cis580/js/perfect-scrollbar.min.js?1737133121" defer></script>
    <script>
      function useMathJax( config ){
        window.MathJax = Object.assign( window.MathJax || {}, {
          tex: {
            inlineMath:  [['\\(', '\\)'], ['$',  '$']],  
            displayMath: [['\\[', '\\]'], ['$$', '$$']], 
          },
          options: {
            enableMenu: false 
          }
        }, config );
      }
      useMathJax( JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="/cis580/js/mathjax/tex-mml-chtml.js?1737133121"></script>
<script src="/cis580/js/theme.js?1737133121" defer></script>

<script src="/cis580/js/tele-scroll.js?1737133121" defer></script>

</body>
</html>
