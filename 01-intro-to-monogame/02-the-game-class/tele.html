<!DOCTYPE html>

<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.128.0">
    <meta name="generator" content="Relearn 8.0.0">
    <meta name="description" content="At the heart of an XNA project is a class that inherits from Game. This class handles initializing the graphics device, manages components, and most importantly, implements the game loop.
The MonoGame Game Loop As you saw in the Game Loop Chapter of Game Programming Patterns:
A game loop runs continuously during gameplay. Each turn of the loop, it processes user input without blocking, updates the game state, and renders the game.">
    <meta name="author" content="Nathan H. Bean">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://textbooks.cs.ksu.edu/cis580/images/hero.png">
    <meta name="twitter:title" content="The Game Class :: K-State CIS 580 Textbook">
    <meta name="twitter:description" content="At the heart of an XNA project is a class that inherits from Game. This class handles initializing the graphics device, manages components, and most importantly, implements the game loop.
The MonoGame Game Loop As you saw in the Game Loop Chapter of Game Programming Patterns:
A game loop runs continuously during gameplay. Each turn of the loop, it processes user input without blocking, updates the game state, and renders the game.">
    <meta property="og:url" content="https://textbooks.cs.ksu.edu/cis580/01-intro-to-monogame/02-the-game-class/index.html">
    <meta property="og:site_name" content="K-State CIS 580 Textbook">
    <meta property="og:title" content="The Game Class :: K-State CIS 580 Textbook">
    <meta property="og:description" content="At the heart of an XNA project is a class that inherits from Game. This class handles initializing the graphics device, manages components, and most importantly, implements the game loop.
The MonoGame Game Loop As you saw in the Game Loop Chapter of Game Programming Patterns:
A game loop runs continuously during gameplay. Each turn of the loop, it processes user input without blocking, updates the game state, and renders the game.">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Introduction to MonoGame">
    <meta property="article:published_time" content="2018-08-24T10:53:26-05:00">
    <meta property="article:modified_time" content="2024-08-14T16:23:49-05:00">
    <meta property="og:image" content="https://textbooks.cs.ksu.edu/cis580/images/hero.png">
    <meta itemprop="name" content="The Game Class :: K-State CIS 580 Textbook">
    <meta itemprop="description" content="At the heart of an XNA project is a class that inherits from Game. This class handles initializing the graphics device, manages components, and most importantly, implements the game loop.
The MonoGame Game Loop As you saw in the Game Loop Chapter of Game Programming Patterns:
A game loop runs continuously during gameplay. Each turn of the loop, it processes user input without blocking, updates the game state, and renders the game.">
    <meta itemprop="datePublished" content="2018-08-24T10:53:26-05:00">
    <meta itemprop="dateModified" content="2024-08-14T16:23:49-05:00">
    <meta itemprop="wordCount" content="730">
    <meta itemprop="image" content="https://textbooks.cs.ksu.edu/cis580/images/hero.png">
    <title>The Game Class :: K-State CIS 580 Textbook</title>
    <link href="https://textbooks.cs.ksu.edu/cis580/01-intro-to-monogame/02-the-game-class/index.html" rel="canonical" type="text/html" title="The Game Class :: K-State CIS 580 Textbook">
    <link href="/cis580/01-intro-to-monogame/02-the-game-class/index.xml" rel="alternate" type="application/rss+xml" title="The Game Class :: K-State CIS 580 Textbook">
    <link href="/cis580/01-intro-to-monogame/02-the-game-class/index.print.html" rel="alternate" type="text/html" title="The Game Class :: K-State CIS 580 Textbook">
    <link href="/cis580/01-intro-to-monogame/02-the-game-class/embed.html" rel="alternate" type="text/html" title="The Game Class :: K-State CIS 580 Textbook">
    <link href="/cis580/css/auto-complete/auto-complete.min.css?1756153111" rel="stylesheet">
    <script src="/cis580/js/auto-complete/auto-complete.min.js?1756153111" defer></script>
    <script src="/cis580/js/search-lunr.min.js?1756153111" defer></script>
    <script src="/cis580/js/search.min.js?1756153111" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/cis580/searchindex.en.js?1756153111";
    </script>
    <script src="/cis580/js/lunr/lunr.min.js?1756153111" defer></script>
    <script src="/cis580/js/lunr/lunr.stemmer.support.min.js?1756153111" defer></script>
    <script src="/cis580/js/lunr/lunr.multi.min.js?1756153111" defer></script>
    <script src="/cis580/js/lunr/lunr.en.min.js?1756153111" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/cis580/fonts/fontawesome/css/fontawesome-all.min.css?1756153111" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cis580/fonts/fontawesome/css/fontawesome-all.min.css?1756153111" rel="stylesheet"></noscript>
    <link href="/cis580/css/perfect-scrollbar/perfect-scrollbar.min.css?1756153111" rel="stylesheet">
    <link href="/cis580/css/theme.min.css?1756153111" rel="stylesheet">
    <link href="/cis580/css/format-html.min.css?1756153111" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/01-intro-to-monogame\/02-the-game-class\/index.html';
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='https:\/\/textbooks.cs.ksu.edu\/cis580';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=true;
      window.relearn.enableBlockCodeWrap=false;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      // variant stuff
      window.relearn.themevariants = [ 'light-theme' ];
      window.relearn.customvariantname = "my-custom-variant";
      // [x] russfeld
      window.relearn.writeVariant=false;
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          
          if (window.relearn.writeVariant) {
            window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
          }
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
    <link href="/cis580/css/custom.css?1756153111" rel="stylesheet">
  </head>
  <body class="mobile-support html" data-url="/cis580/01-intro-to-monogame/02-the-game-class/index.html">
    
    <div id="tele" class="tele mirror">
    
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      
      
      
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable 01-intro-to-monogame" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="the-game-class">The Game Class</h1>

<p>At the heart of an XNA project is a class that inherits from <a href="https://docs.monogame.net/api/Microsoft.Xna.Framework.Game.html" rel="external" target="_blank">Game</a>.  This class handles initializing the graphics device, manages components, and most importantly, implements the game loop.</p>
<h3 id="the-monogame-game-loop">The MonoGame Game Loop</h3>
<p>As you saw in the <a href="https://gameprogrammingpatterns.com/game-loop.html" rel="external" target="_blank">Game Loop Chapter</a> of <em>Game Programming Patterns</em>:</p>
<blockquote>
<p>A <strong>game loop</strong> runs continuously during gameplay. Each turn of the loop, it <strong>processes user input</strong> without blocking, <strong>updates the game state</strong>, and <strong>renders</strong> the game. It tracks the passage of time to <strong>control the rate of gameplay</strong>.</p>
</blockquote>
<p>This is precisely what the <code>Game</code> class implements for us - a loop that 1) processes user input, 2) updates the game state, and 3) renders the game.</p>
<p>As a MonoGame developer, you create a new class that inherits from <code>Game</code> (if you use one of the MonoGame templates, this class will probably be named <code>Game1</code>, but feel free to rename it).  Then, you can write code to execute during steps 2 and 3 of the loop by overriding the virtual methods: <code>Update(GameTime gameTime)</code> and <code>Draw(GameTime gameTime)</code>.  These methods are invoked by <code>Game</code> each time it executes the game loop.  In software engineering parlance, we call this kind of method a &ldquo;hook,&rdquo; as we can use it to pull new functionality into the existing class.</p>
<h3 id="time-and-the-game-loop">Time and the Game Loop</h3>
<p>Time in the MonoGame framework is typically measured using <a href="https://docs.microsoft.com/en-us/dotnet/api/system.timespan?view=net-5.0" rel="external" target="_blank">System.TimeSpan</a> struct.  While this struct has many general uses, for games we almost totally rely on the <code>TimeSpan.TotalSeconds</code> property, which is a double representing the full length of time the TimeSpan represents as a <code>double</code> measured in seconds.</p>
<p>You probably noticed that both methods have a <a href="https://docs.monogame.net/api/Microsoft.Xna.Framework.GameTime.html" rel="external" target="_blank">GameTime</a> object as a parameter.  This is a class used to store measurements of time in the game.  It is basically a data object with three properties:</p>
<ul>
<li><code>GameTime.ElapsedGameTime</code> is a <code>TimeSpan</code> measuring the time that elapsed between this and the previous call to <code>Update(GameTime)</code>.  In other words, it is the time between passes in the game loop.</li>
<li><code>GameTime.TotalGameTime</code> is a <code>TimeSpan</code> measuring the total time since the game was started.</li>
<li><code>IsRunningSlowly</code> is a <code>Boolean</code> indicating that the game is lagging (more on this shortly)</li>
</ul>
<p>As you saw in the <em>Game Programming Patterns</em>, the game loop can be clamped (fixed), or run as fast as possible.  MonoGame allows you to choose either strategy.  You can specify the strategy you want by changing the <code>Game.IsFixedTimeStep</code> boolean property.  When using a fixed time step, you can specify the desired time step (the time between game loop passes) by setting the <code>Game.TargetElapsedTime</code> property to a <code>TimeSpan</code> of the desired duration.</p>
<p>By default, MonoGame adopts the <strong>fixed update time step, variable rendering</strong> strategy from <em>Game Programming Patterns</em>.  If a pass through the game loop takes too long, it skips rendering (the <code>Game.Draw()</code> is not invoked), and the <code>TimeSpan</code> provided to the <code>Game.Update()</code> method has its <code>IsRunningSlowly</code> property set to <code>true</code>.  The game will continue to drop rendering frames until the <code>Game.MaximumElapsedTime</code> value is reached, at which point it will invoke <code>Game.Draw()</code>. <sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></p>
<p>Setting the <code>Game.IsFixedTimeStep</code> property to <code>false</code> instead runs the game loop as fast as possible.</p>

<details open class=" box cstyle notices info">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-info-circle"></i> 
    Info
  </summary>
  <div class="box-content">
<p>You might be wondering what timestep you should use.  It&rsquo;s a tricky question, but there are some easy parameters you can use to frame it:</p>
<p><strong>Fast enough to provide the illusion of motion</strong>  The human brain begins to translate quickly changing images to motion around 16 frames per second.  That&rsquo;s a timestep of <span class="math align-center">$ 0.0625 $</span></p>
<p><strong>At a multiple of 30 frames per second</strong>  At least, in the Americas and parts of Asia televisions and monitors refresh at a multiple of 30, as AC power is delivered at 60 hertz cycles (other parts of the world use 50 hertz).  Cheaper monitors run at 30 frames per second (a timestep of <span class="math align-center">$ 0.03\overline{3333} $</span>), while most modern monitors and televisions run at 60 frames per second (a timestep of <span class="math align-center">$ 0.01\overline{6666} $</span>) and high-end devices might run at 120 frames per second (a timestep of <span class="math align-center">$ 0.008\overline{3333} $</span>).</p>
<p><strong>Slow enough your game doesn&rsquo;t lag</strong>  This speed will vary depending on the hardware in question.  But if your game is consistently slow, you need to either increase the timestep or optimize your code.</p>
<p>By default, the <code>Game.TargetElapsedTime</code> is set to the refresh rate of your monitor - which in most cases will be the ideal rate (as drawing frames more often gives no benefit).</p>
  </div>
</details>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p><a href="https://www.shawnhargreaves.com/blog/understanding-gametime.html" rel="external" target="_blank">Hargreaves, Shawn (7/15/2007) Understanding Game Time</a>&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
      
      
      
    </div>
    <script>
      window.MathJax = Object.assign( window.MathJax || {}, {
        tex: {
          inlineMath:  [['\\(', '\\)'], ['$',  '$']],  
          displayMath: [['\\[', '\\]'], ['$$', '$$']], 
        },
        options: {
          enableMenu: false 
        }
      }, JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="/cis580/js/mathjax/tex-mml-chtml.js?1756153111"></script>
    <script src="/cis580/js/clipboard/clipboard.min.js?1756153111" defer></script>
    <script src="/cis580/js/perfect-scrollbar/perfect-scrollbar.min.js?1756153111" defer></script>
    <script src="/cis580/js/theme.min.js?1756153111" defer></script>
      
      
      
    </div> 
  <script src="/cis580/js/tele-scroll.min.js?1756153111" defer></script>
  </body>
</html>
