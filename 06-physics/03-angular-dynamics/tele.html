




  
	
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.128.0">
    <meta name="generator" content="Relearn 6.0.0">
    <meta name="description" content="There is a second set of equations that govern angular motion (rotation) you may have encountered, where $ \omega $ is angular velocity, $ \alpha $ the angular acceleration, and $ \theta $ the rotation of the body:
$$ \omega = \omega_0 &#43; \alpha t \tag{1} $$ $$ \theta = \theta_0 &#43; \omega_0 t &#43; \frac{1}{2}\alpha t^2 \tag{2} $$ $$ \theta = \theta_0 &#43; \frac{1}{2}(\omega_0 &#43; \omega)t \tag{3} $$ $$ \omega^2 = \omega_0^2 &#43; 2\alpha(\theta-\theta_0) \tag{4} $$ $$ \theta = \theta_0 &#43; \omega t - \frac{1}{2}\alpha t^2 \tag{5} $$">
    <meta name="author" content="Nathan Bean">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Angular Dynamics :: K-State CIS 580 Textbook">
    <meta name="twitter:description" content="There is a second set of equations that govern angular motion (rotation) you may have encountered, where $ \omega $ is angular velocity, $ \alpha $ the angular acceleration, and $ \theta $ the rotation of the body:
$$ \omega = \omega_0 &#43; \alpha t \tag{1} $$ $$ \theta = \theta_0 &#43; \omega_0 t &#43; \frac{1}{2}\alpha t^2 \tag{2} $$ $$ \theta = \theta_0 &#43; \frac{1}{2}(\omega_0 &#43; \omega)t \tag{3} $$ $$ \omega^2 = \omega_0^2 &#43; 2\alpha(\theta-\theta_0) \tag{4} $$ $$ \theta = \theta_0 &#43; \omega t - \frac{1}{2}\alpha t^2 \tag{5} $$">
    <meta property="og:url" content="https://textbooks.cs.ksu.edu/cis580/06-physics/03-angular-dynamics/">
    <meta property="og:site_name" content="K-State CIS 580 Textbook">
    <meta property="og:title" content="Angular Dynamics :: K-State CIS 580 Textbook">
    <meta property="og:description" content="There is a second set of equations that govern angular motion (rotation) you may have encountered, where $ \omega $ is angular velocity, $ \alpha $ the angular acceleration, and $ \theta $ the rotation of the body:
$$ \omega = \omega_0 &#43; \alpha t \tag{1} $$ $$ \theta = \theta_0 &#43; \omega_0 t &#43; \frac{1}{2}\alpha t^2 \tag{2} $$ $$ \theta = \theta_0 &#43; \frac{1}{2}(\omega_0 &#43; \omega)t \tag{3} $$ $$ \omega^2 = \omega_0^2 &#43; 2\alpha(\theta-\theta_0) \tag{4} $$ $$ \theta = \theta_0 &#43; \omega t - \frac{1}{2}\alpha t^2 \tag{5} $$">
    <meta property="og:locale" content="en-us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Physics">
    <meta property="article:published_time" content="2018-08-24T10:53:26-05:00">
    <meta property="article:modified_time" content="2023-08-14T11:41:07-05:00">
    <meta itemprop="name" content="Angular Dynamics :: K-State CIS 580 Textbook">
    <meta itemprop="description" content="There is a second set of equations that govern angular motion (rotation) you may have encountered, where $ \omega $ is angular velocity, $ \alpha $ the angular acceleration, and $ \theta $ the rotation of the body:
$$ \omega = \omega_0 &#43; \alpha t \tag{1} $$ $$ \theta = \theta_0 &#43; \omega_0 t &#43; \frac{1}{2}\alpha t^2 \tag{2} $$ $$ \theta = \theta_0 &#43; \frac{1}{2}(\omega_0 &#43; \omega)t \tag{3} $$ $$ \omega^2 = \omega_0^2 &#43; 2\alpha(\theta-\theta_0) \tag{4} $$ $$ \theta = \theta_0 &#43; \omega t - \frac{1}{2}\alpha t^2 \tag{5} $$">
    <meta itemprop="datePublished" content="2018-08-24T10:53:26-05:00">
    <meta itemprop="dateModified" content="2023-08-14T11:41:07-05:00">
    <meta itemprop="wordCount" content="1602">
    <title>Angular Dynamics :: K-State CIS 580 Textbook</title>
    <link href="https://textbooks.cs.ksu.edu/cis580/06-physics/03-angular-dynamics/" rel="canonical" type="text/html" title="Angular Dynamics :: K-State CIS 580 Textbook">
    <link href="/cis580/06-physics/03-angular-dynamics/index.xml" rel="alternate" type="application/rss+xml" title="Angular Dynamics :: K-State CIS 580 Textbook">
    <link href="/cis580/06-physics/03-angular-dynamics/index.print.html" rel="alternate" type="text/html" title="Angular Dynamics :: K-State CIS 580 Textbook">
    <link href="/cis580/06-physics/03-angular-dynamics/embed.html" rel="alternate" type="text/html" title="Angular Dynamics :: K-State CIS 580 Textbook">
    <link href="/cis580/css/fontawesome-all.min.css?1723670681" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cis580/css/fontawesome-all.min.css?1723670681" rel="stylesheet"></noscript>
    <link href="/cis580/css/nucleus.css?1723670681" rel="stylesheet">
    <link href="/cis580/css/auto-complete.css?1723670681" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cis580/css/auto-complete.css?1723670681" rel="stylesheet"></noscript>
    <link href="/cis580/css/perfect-scrollbar.min.css?1723670681" rel="stylesheet">
    <link href="/cis580/css/fonts.css?1723670681" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cis580/css/fonts.css?1723670681" rel="stylesheet"></noscript>
    <link href="/cis580/css/theme.css?1723670681" rel="stylesheet">
    <link href="/cis580/css/theme-auto.css?1723670681" rel="stylesheet" id="R-variant-style">
    <link href="/cis580/css/chroma-auto.css?1723670681" rel="stylesheet" id="R-variant-chroma-style">
    <link href="/cis580/css/variant.css?1723670681" rel="stylesheet">
    <link href="/cis580/css/print.css?1723670681" rel="stylesheet" media="print">
    <script src="/cis580/js/variant.js?1723670681"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='https:\/\/textbooks.cs.ksu.edu\/cis580';
      window.index_js_url="/cis580/index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'auto', 'light-theme', 'dark-theme' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
    
    <link href="/cis580/css/custom.css?1723670681" rel="stylesheet">
  </head>
  <body class="mobile-support tele disableInlineCopyToClipboard" data-url="/cis580/06-physics/03-angular-dynamics/">
    
    <div id="tele" class="tele mirror">
    
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      
      
      
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id="angular-dynamics">Angular Dynamics</h1>

<p>There is a second set of equations that govern angular motion (rotation) you may have encountered, where 
<span class="math align-center">$ \omega $</span> is angular velocity, 
<span class="math align-center">$ \alpha $</span> the angular acceleration, and 
<span class="math align-center">$ \theta $</span> the rotation of the body:</p>
<p>
<span class="math align-center">$$ \omega = \omega_0 + \alpha t \tag{1} $$</span>

<span class="math align-center">$$ \theta = \theta_0 + \omega_0 t + \frac{1}{2}\alpha t^2 \tag{2} $$</span>

<span class="math align-center">$$ \theta = \theta_0 + \frac{1}{2}(\omega_0 + \omega)t \tag{3} $$</span>

<span class="math align-center">$$ \omega^2 = \omega_0^2 + 2\alpha(\theta-\theta_0) \tag{4} $$</span>

<span class="math align-center">$$ \theta = \theta_0 + \omega t - \frac{1}{2}\alpha t^2 \tag{5} $$</span></p>
<p>These equations parallel those we saw for linear dynamics, and in fact, have the same derivative relationships between them:</p>
<p>
<span class="math align-center">$$ \theta(t) \tag{6} $$</span>

<span class="math align-center">$$ \omega(t) = \theta'(t) \tag{7} $$</span>

<span class="math align-center">$$ \alpha(t) = \omega'(t) \tag{8} $$</span></p>
<p>And, just like linear dynamics, we can utilize this relationship and our small timestep to sidestep complex calculations in our code.  Thus, we can calculate the rotational change from the angular velocity (assuming <code>float rotation</code>, <code>angularVelocity</code>, and <code>angularAcceleration</code> values expressed in radians):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl"><span class="n">rotation</span> <span class="p">+=</span> <span class="n">angularVelocity</span> <span class="p">*</span> <span class="n">gameTime</span><span class="p">.</span><span class="n">elapsedGameTime</span><span class="p">.</span><span class="n">TotalSeconds</span><span class="p">;</span></span></span></code></pre></div><p>And the change in angular velocity can be calculated from the angular acceleration:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl"><span class="n">angularAcceleration</span> <span class="p">=</span> <span class="n">angularVelocity</span> <span class="p">*</span> <span class="n">gameTime</span><span class="p">.</span><span class="n">elapsedGameTime</span><span class="p">.</span><span class="n">TotalSeconds</span><span class="p">;</span></span></span></code></pre></div><p>Finally, angular acceleration can be imposed with an instantaneous force.  However, this is slightly more complex than we saw with linear dynamics, as this force needs to be applied somewhere <em>other than the center of mass</em>.  Doing so applies both rotational and linear motion to an object.  This rotational aspect is referred to as <em>torque</em>, and is calculated by taking the cross product of the force&rsquo;s point of application relative to the center of mass and the force vector.  Thus:</p>

<span class="math align-center">$$ \tau = \overline{r} x \overline{F} $$</span>
<p>Where 
<span class="math align-center">$ tau $</span> is our torque, 
<span class="math align-center">$ \overline{r} $</span> is the vector from the center of mass to where the force is applied, and 
<span class="math align-center">$ \overline{F} $</span> is the force vector.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl"><span class="n">torque</span> <span class="p">=</span> <span class="n">force</span><span class="p">.</span><span class="n">X</span> <span class="p">*</span> <span class="n">r</span><span class="p">.</span><span class="n">Y</span> <span class="p">-</span> <span class="n">force</span><span class="p">.</span><span class="n">Y</span> <span class="p">*</span> <span class="n">r</span><span class="p">.</span><span class="n">X</span><span class="p">;</span></span></span></code></pre></div><p>Torque is the force imposing angular acceleration, and can be applied directly to the velocity:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl"><span class="n">angularAcceleration</span> <span class="p">+=</span> <span class="n">torque</span> <span class="p">*</span> <span class="n">gameTime</span><span class="p">.</span><span class="n">ElapsedGameTime</span><span class="p">.</span><span class="n">TotalSeconds</span><span class="p">;</span></span></span></code></pre></div><p>And much like force and linear acceleration, multiple torques applied to an object are summed.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>XNA does not define the cross product function in its <code>Vector2</code> library, so we computed it manually above.  If you would like to add it as a method in your projects, we can do so using an <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/extension-methods" rel="external" target="_blank">extension method</a>, i.e. define in one of your game&rsquo;s namespaces:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">static</span> <span class="k">class</span> <span class="nc">Vector2Extensions</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// Computes the cross product of two Vector2 structs</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;param ref=&#34;a&#34;&gt;The first vector&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;param ref=&#34;b&#34;&gt;The second vector&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">float</span> <span class="n">CrossProduct</span><span class="p">(</span><span class="n">Vector2</span> <span class="n">a</span><span class="p">,</span> <span class="n">Vector2</span> <span class="n">b</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">X</span> <span class="p">*</span> <span class="n">b</span><span class="p">.</span><span class="n">Y</span> <span class="p">-</span> <span class="n">a</span><span class="p">.</span><span class="n">Y</span> <span class="p">*</span> <span class="n">b</span><span class="p">.</span><span class="n">X</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// Computes the cross product of this vector with another</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;param ref=&#34;other&#34;&gt;the other vector&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">float</span> <span class="n">Cross</span><span class="p">(</span><span class="k">this</span> <span class="n">Vector2</span> <span class="n">a</span><span class="p">,</span> <span class="n">Vector2</span> <span class="n">other</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">CrossProduct</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">other</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div><p>As long as this class is in scope (i.e. you have an appropriate <code>using</code> statement), you should be able to invoke <code>Cross()</code> on any <code>Vector2</code>.  So the code listing:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl"><span class="n">torque</span> <span class="p">=</span> <span class="n">force</span><span class="p">.</span><span class="n">X</span> <span class="p">*</span> <span class="n">r</span><span class="p">.</span><span class="n">Y</span> <span class="p">-</span> <span class="n">force</span><span class="p">.</span><span class="n">Y</span> <span class="p">*</span> <span class="n">r</span><span class="p">.</span><span class="n">X</span><span class="p">;</span></span></span></code></pre></div><p>Could be rewritten as:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl"><span class="n">torque</span> <span class="p">=</span> <span class="n">force</span><span class="p">.</span><span class="n">Cross</span><span class="p">(</span><span class="n">r</span><span class="p">);</span></span></span></code></pre></div><p> </p>
</div>
</div>
<h3 id="rocket-thrust">Rocket Thrust</h3>
<p>Let&rsquo;s work through an example.  Consider this diagram:</p>
<p><a href="#R-image-f0ba944c51506d7e8500569a94eaaf9e" class="lightbox-link"><img alt="Torque applied to a spaceship" class="border lazy lightbox noshadow figure-image" loading="lazy" src="/cis580/images/6.3.1.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f0ba944c51506d7e8500569a94eaaf9e"><img alt="Torque applied to a spaceship" class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="/cis580/images/6.3.1.png"></a></p>
<p>The red arrow is the force vector applied from the left rocket.  The green arrow is the vector from the position the force is applied to the center of mass of the ship.  Firing just this one rocket will impose a rotation on the ship in the direction of the white arrow.  Firing <em>both</em> rockets will impose an opposite torque, cancelling both.</p>
<p>Let&rsquo;s write the control code for this spaceship.  We&rsquo;ll define class fields for both linear and angular velocity and acceleration, as well as position, direction, and angle.  We&rsquo;ll also supply a constant for the amount of linear acceleration applied by our spaceship:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl"><span class="c1">// Constants</span>
</span></span><span class="line"><span class="cl"><span class="kt">float</span> <span class="n">LINEAR_ACCELERATION</span> <span class="p">=</span> <span class="m">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Linear movement fields</span>
</span></span><span class="line"><span class="cl"><span class="n">Vector2</span> <span class="n">position</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">Vector2</span> <span class="n">direction</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">Vector2</span> <span class="n">velocity</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Angular movement fields</span>
</span></span><span class="line"><span class="cl"><span class="kt">float</span> <span class="n">angle</span><span class="p">;</span> 
</span></span><span class="line"><span class="cl"><span class="kt">float</span> <span class="n">angularVelocity</span><span class="p">;</span></span></span></code></pre></div><p>Then we&rsquo;ll use these in our update method:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl"><span class="kd">public</span> <span class="k">void</span> <span class="n">Update</span><span class="p">(</span><span class="n">GameTime</span> <span class="n">gameTime</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">KeyBoardState</span> <span class="n">keyboardState</span> <span class="p">=</span> <span class="n">Keyboard</span><span class="p">.</span><span class="n">GetState</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="kt">float</span> <span class="n">t</span> <span class="p">=</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">gameTime</span><span class="p">.</span><span class="n">ElapsedGameTime</span><span class="p">.</span><span class="n">TotalSeconds</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Vector2</span> <span class="n">acceleration</span> <span class="p">=</span> <span class="n">Vector2</span><span class="p">.</span><span class="n">Zero</span><span class="p">;</span> <span class="c1">// linear acceleration</span>
</span></span><span class="line"><span class="cl">    <span class="kt">float</span> <span class="n">angularAcceleration</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="c1">// angular acceleration</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Determine if the left rocket is firing</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="n">keyboardState</span><span class="p">.</span><span class="n">IsKeyPressed</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="n">A</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// LABEL A: Apply linear force in the direction we face from left rocket</span>
</span></span><span class="line"><span class="cl">        <span class="n">acceleration</span> <span class="p">+=</span> <span class="n">direction</span> <span class="p">*</span> <span class="n">LINEAR_ACCELERATION</span> <span class="p">*</span> <span class="n">t</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// TODO 1: Calculate and apply torque from left rocket</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Determine if the right rocket is firing </span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="n">keyboardState</span><span class="p">.</span><span class="n">IsKeyPressed</span><span class="p">(</span><span class="n">Keys</span><span class="p">.</span><span class="n">D</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// LABEL B: Apply linear force in the direction we face from right rocket</span>
</span></span><span class="line"><span class="cl">        <span class="n">acceleration</span> <span class="p">+=</span> <span class="n">direction</span> <span class="p">*</span> <span class="n">LINEAR_ACCELERATION</span> <span class="p">*</span> <span class="n">t</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// TODO 2: Calculate and apply torque from right rocket</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Update linear velocity and position </span>
</span></span><span class="line"><span class="cl">    <span class="n">velocity</span> <span class="p">+=</span> <span class="n">acceleration</span> <span class="p">*</span> <span class="n">t</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">position</span> <span class="p">+=</span> <span class="n">velocity</span> <span class="p">*</span> <span class="n">t</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// update angular velocity and rotation </span>
</span></span><span class="line"><span class="cl">    <span class="n">angularVelocity</span> <span class="p">+=</span> <span class="n">angularAcceleration</span> <span class="p">*</span> <span class="n">t</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">angle</span> <span class="p">+=</span> <span class="n">angularVelocity</span> <span class="p">*</span> <span class="n">t</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// LABEL C: Apply rotation to our direction vector  </span>
</span></span><span class="line"><span class="cl">    <span class="n">direction</span> <span class="p">=</span> <span class="n">Vector2</span><span class="p">.</span><span class="n">Transform</span><span class="p">(</span><span class="n">Vector2</span><span class="p">.</span><span class="n">UnitY</span><span class="p">,</span> <span class="k">new</span> <span class="n">Matrix</span><span class="p">.</span><span class="n">CreateRotationZ</span><span class="p">(</span><span class="n">theta</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div><p>There&rsquo;s a lot  going on in this method, so let&rsquo;s break it down in pieces, starting with the code following the <code>LABEL</code> comments:</p>
<h4 id="label-a--b---apply-linear-force-in-the-direction-we-face-from-left-rocket-and-right-rocket">LABEL A &amp; B - Apply linear force in the direction we face from left rocket and right rocket</h4>
<p>When we apply force against a body <em>not toward its center</em>, part of that force becomes torque, but the rest of it is linear acceleration.  Technically, we can calculate exactly what this is with trigonometry.  But in this case, we don&rsquo;t care - we just want the ship to accelerate in the direction it is facing.  So we multiply the <code>direction</code> vector by a constant representing the force divided by the mass of our spaceship (acceleration), and the number of seconds that force was applied.</p>
<p>Note that we consider our spaceship mass to be constant here.  If we were really trying to be 100% accurate, the mass would change over time as we burn fuel.  But that&rsquo;s extra calculations, so unless you are going for realism, it&rsquo;s simpler to provide a constant, a lá <code>LINEAR_ACCELERATION</code>.  Yet another example of simplifying physics for games.</p>
<h4 id="label-c---apply-rotation-to-our-direction-vector">LABEL C - Apply rotation to our direction vector</h4>
<p>We need to know the direction the ship is facing to apply our linear acceleration.  Thus, we need to convert our angle <code>angle</code> into a <code>Vector2</code>.  We can do this with trigonometry:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl"><span class="n">direction</span><span class="p">.</span><span class="n">X</span> <span class="p">=</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">Math</span><span class="p">.</span><span class="n">Cos</span><span class="p">(</span><span class="n">theta</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">direction</span><span class="p">.</span><span class="n">Y</span> <span class="p">=</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">Math</span><span class="p">.</span><span class="n">Sin</span><span class="p">(</span><span class="n">theta</span><span class="p">);</span></span></span></code></pre></div><p>Or we can utilize matrix operations:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl"><span class="n">direction</span> <span class="p">=</span> <span class="n">Vector2</span><span class="p">.</span><span class="n">Transform</span><span class="p">(</span><span class="n">Vector2</span><span class="p">.</span><span class="n">UnitY</span><span class="p">,</span> <span class="k">new</span> <span class="n">Matrix</span><span class="p">.</span><span class="n">CreateRotationZ</span><span class="p">(</span><span class="n">theta</span><span class="p">));</span></span></span></code></pre></div><p>We&rsquo;ll discuss the math behind this second method soon.  Either method will work.</p>
<h3 id="todo-1-calculate-and-apply-torque-from-left-rocket">TODO 1: Calculate and apply torque from left rocket</h3>
<p>Here we need to insert code for calculating the torque.  First, we need to know the distance from the rocket engine to the center of mass of the ship.  Let&rsquo;s assume our ship sprite is 
<span class="math align-center">$ 152x115 $</span>, and our center of mass is at 
<span class="math align-center">$ <76,50> $</span>.  Thus, our <code>r</code> vector would be:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl"><span class="n">Vector2</span> <span class="n">r</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector2</span><span class="p">(</span><span class="m">76</span><span class="p">,</span><span class="m">50</span><span class="p">);</span></span></span></code></pre></div><p>The second value we need is our force.  We could factor in our ship rotation at this point, but it is easier if we instead rotate our coordinate system and place its origin at the center of mass for the ship, i.e.:</p>
<p><a href="#R-image-a535debf62ffaf3242c61c08ce179dd1" class="lightbox-link"><img alt="The rotated coordinate system" class="border lazy lightbox noshadow figure-image" loading="lazy" src="/cis580/images/6.3.2.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-a535debf62ffaf3242c61c08ce179dd1"><img alt="The rotated coordinate system" class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="/cis580/images/6.3.2.png"></a></p>
<p>Then our force vector is simply a vector in the upward direction, whose magnitude is the amount of the force tangential to the <code>r</code> vector.  For simplicity, we&rsquo;ll use a literal constant instead of calculating this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl"><span class="n">Vector2</span> <span class="n">force</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector2</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">FORCE_MAGNITUDE</span><span class="p">);</span></span></span></code></pre></div><p>Then we can calculate the torque with the cross product of these two vectors:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl"><span class="kt">float</span> <span class="n">torque</span> <span class="p">=</span> <span class="n">force</span><span class="p">.</span><span class="n">X</span> <span class="p">*</span> <span class="n">r</span><span class="p">.</span><span class="n">Y</span> <span class="p">-</span> <span class="n">force</span><span class="p">.</span><span class="n">Y</span> <span class="p">*</span> <span class="n">r</span><span class="p">.</span><span class="n">X</span><span class="p">;</span></span></span></code></pre></div><p>And then calculate the rotational acceleration:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl"><span class="kt">float</span> <span class="n">angularAcceleration</span> <span class="p">+=</span> <span class="n">torque</span> <span class="p">/</span> <span class="n">ROTATIONAL_INERTIA</span><span class="p">;</span></span></span></code></pre></div><p>The <code>ROTATIONAL_INERTIA</code> represents the resistance of the body to rotation (basically, it plays the same role as mass in linear dynamics).  For simplicity, we could treat it as 
<span class="math align-center">$ 1 $</span> (no real effect - after all, we&rsquo;re in a vacuum), which allows us to refactor as:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl"><span class="kt">float</span> <span class="n">angularAcceleration</span> <span class="p">+=</span> <span class="n">torque</span><span class="p">;</span></span></span></code></pre></div><h3 id="todo-2-calculate-and-apply-torque-from-right-rocket">TODO 2: Calculate and apply torque from right rocket</h3>
<p>Now that we&rsquo;ve seen the longhand way of doing things &ldquo;properly&rdquo;, let&rsquo;s apply some game-programming savvy shortcuts to our right-engine calculations.</p>
<p>Note that for this example, the vector <code>r</code> does not change - the engine should always be the same distance from the center of mass, and the force vector of the engine will always be in the same direction. relative to <code>r</code>.  So the cross product of the two will <em>always be the same</em>.  So we could pre-calculate this value, <em>and</em> apply the proper moment of inertia, leaving us with a single constant representing the angular acceleration from the engines which we can represent as a constant, <code>ANGULAR_ACCELERATION</code>.  Since this is reversed for the  right engine, our simplified acceleration calculation would be:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl"><span class="n">angularAcceleration</span> <span class="p">-=</span> <span class="n">ANGULAR_ACCELERATION</span> <span class="p">*</span> <span class="n">t</span><span class="p">;</span></span></span></code></pre></div><p>(and the right engine would have been <code>angularAcceleration += ANGULAR_ACCELERATION * t;</code>)</p>
<p>Thus, with careful thought we can simplify six addition operations, four multiplications, one subtraction, one multiplication, and two struct allocation operations to just <em>two multiplications and two additions</em>.  This kind of simplification and optimization is common in game programming.  And, in fact, after calculating the <code>ANGULAR_ACCELERATION</code> value we would probably tweak it until the movement felt natural and fun (or just guess at the value to begin with)!</p>
<p>Of course, if we were doing scientific simulation, we would instead have to carry out all of the calculations, couldn&rsquo;t use fudge factors, and would have additional considerations.  For example, if the fuel tanks are not at the center of mass, then every time we fire our rockets <em>the center of mass will shift!</em>  That is why scientific simulations are considered <em>hard simulations</em>.  Not so much because they are hard to write - but because accuracy is so important.</p>

            <footer class="footline">
              
              
              
              
            </footer>
          </article>
</div>
</main>
</div>

</div>




<script src="/cis580/js/clipboard.min.js?1723670681" defer></script>
<script src="/cis580/js/perfect-scrollbar.min.js?1723670681" defer></script>
    <script>
      function useMathJax( config ){
        window.MathJax = Object.assign( window.MathJax || {}, {
          tex: {
            inlineMath:  [['\\(', '\\)'], ['$',  '$']],  
            displayMath: [['\\[', '\\]'], ['$$', '$$']], 
          },
          options: {
            enableMenu: false 
          }
        }, config );
      }
      useMathJax( JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="/cis580/js/mathjax/tex-mml-chtml.js?1723670681"></script>
<script src="/cis580/js/theme.js?1723670681" defer></script>

<script src="/cis580/js/tele-scroll.js?1723670681" defer></script>

</body>
</html>
