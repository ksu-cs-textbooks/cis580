<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="print">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.128.0">
    <meta name="generator" content="Relearn 8.0.0">
    <meta name="description" content="There is a second set of equations that govern angular motion (rotation) you may have encountered, where $ \omega $ is angular velocity, $ \alpha $ the angular acceleration, and $ \theta $ the rotation of the body:
$$ \omega = \omega_0 &#43; \alpha t \tag{1} $$ $$ \theta = \theta_0 &#43; \omega_0 t &#43; \frac{1}{2}\alpha t^2 \tag{2} $$ $$ \theta = \theta_0 &#43; \frac{1}{2}(\omega_0 &#43; \omega)t \tag{3} $$ $$ \omega^2 = \omega_0^2 &#43; 2\alpha(\theta-\theta_0) \tag{4} $$ $$ \theta = \theta_0 &#43; \omega t - \frac{1}{2}\alpha t^2 \tag{5} $$">
    <meta name="author" content="Nathan H. Bean">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://textbooks.cs.ksu.edu/cis580/images/hero.png">
    <meta name="twitter:title" content="Angular Dynamics :: K-State CIS 580 Textbook">
    <meta name="twitter:description" content="There is a second set of equations that govern angular motion (rotation) you may have encountered, where $ \omega $ is angular velocity, $ \alpha $ the angular acceleration, and $ \theta $ the rotation of the body:
$$ \omega = \omega_0 &#43; \alpha t \tag{1} $$ $$ \theta = \theta_0 &#43; \omega_0 t &#43; \frac{1}{2}\alpha t^2 \tag{2} $$ $$ \theta = \theta_0 &#43; \frac{1}{2}(\omega_0 &#43; \omega)t \tag{3} $$ $$ \omega^2 = \omega_0^2 &#43; 2\alpha(\theta-\theta_0) \tag{4} $$ $$ \theta = \theta_0 &#43; \omega t - \frac{1}{2}\alpha t^2 \tag{5} $$">
    <meta property="og:url" content="https://textbooks.cs.ksu.edu/cis580/06-physics/03-angular-dynamics/index.html">
    <meta property="og:site_name" content="K-State CIS 580 Textbook">
    <meta property="og:title" content="Angular Dynamics :: K-State CIS 580 Textbook">
    <meta property="og:description" content="There is a second set of equations that govern angular motion (rotation) you may have encountered, where $ \omega $ is angular velocity, $ \alpha $ the angular acceleration, and $ \theta $ the rotation of the body:
$$ \omega = \omega_0 &#43; \alpha t \tag{1} $$ $$ \theta = \theta_0 &#43; \omega_0 t &#43; \frac{1}{2}\alpha t^2 \tag{2} $$ $$ \theta = \theta_0 &#43; \frac{1}{2}(\omega_0 &#43; \omega)t \tag{3} $$ $$ \omega^2 = \omega_0^2 &#43; 2\alpha(\theta-\theta_0) \tag{4} $$ $$ \theta = \theta_0 &#43; \omega t - \frac{1}{2}\alpha t^2 \tag{5} $$">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Physics">
    <meta property="article:published_time" content="2018-08-24T10:53:26-05:00">
    <meta property="article:modified_time" content="2023-08-14T11:41:07-05:00">
    <meta property="og:image" content="https://textbooks.cs.ksu.edu/cis580/images/hero.png">
    <meta itemprop="name" content="Angular Dynamics :: K-State CIS 580 Textbook">
    <meta itemprop="description" content="There is a second set of equations that govern angular motion (rotation) you may have encountered, where $ \omega $ is angular velocity, $ \alpha $ the angular acceleration, and $ \theta $ the rotation of the body:
$$ \omega = \omega_0 &#43; \alpha t \tag{1} $$ $$ \theta = \theta_0 &#43; \omega_0 t &#43; \frac{1}{2}\alpha t^2 \tag{2} $$ $$ \theta = \theta_0 &#43; \frac{1}{2}(\omega_0 &#43; \omega)t \tag{3} $$ $$ \omega^2 = \omega_0^2 &#43; 2\alpha(\theta-\theta_0) \tag{4} $$ $$ \theta = \theta_0 &#43; \omega t - \frac{1}{2}\alpha t^2 \tag{5} $$">
    <meta itemprop="datePublished" content="2018-08-24T10:53:26-05:00">
    <meta itemprop="dateModified" content="2023-08-14T11:41:07-05:00">
    <meta itemprop="wordCount" content="1618">
    <meta itemprop="image" content="https://textbooks.cs.ksu.edu/cis580/images/hero.png">
    <title>Angular Dynamics :: K-State CIS 580 Textbook</title>
    <link href="https://textbooks.cs.ksu.edu/cis580/06-physics/03-angular-dynamics/index.html" rel="canonical" type="text/html" title="Angular Dynamics :: K-State CIS 580 Textbook">
    <link href="/cis580/06-physics/03-angular-dynamics/index.xml" rel="alternate" type="application/rss+xml" title="Angular Dynamics :: K-State CIS 580 Textbook">
    <link href="/cis580/06-physics/03-angular-dynamics/tele.html" rel="alternate" type="text/html" title="Angular Dynamics :: K-State CIS 580 Textbook">
    <link href="/cis580/06-physics/03-angular-dynamics/embed.html" rel="alternate" type="text/html" title="Angular Dynamics :: K-State CIS 580 Textbook">
    <link href="/cis580/css/auto-complete/auto-complete.min.css?1756153111" rel="stylesheet">
    <script src="/cis580/js/auto-complete/auto-complete.min.js?1756153111" defer></script>
    <script src="/cis580/js/search-lunr.min.js?1756153111" defer></script>
    <script src="/cis580/js/search.min.js?1756153111" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/cis580/searchindex.en.js?1756153111";
    </script>
    <script src="/cis580/js/lunr/lunr.min.js?1756153111" defer></script>
    <script src="/cis580/js/lunr/lunr.stemmer.support.min.js?1756153111" defer></script>
    <script src="/cis580/js/lunr/lunr.multi.min.js?1756153111" defer></script>
    <script src="/cis580/js/lunr/lunr.en.min.js?1756153111" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/cis580/fonts/fontawesome/css/fontawesome-all.min.css?1756153111" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cis580/fonts/fontawesome/css/fontawesome-all.min.css?1756153111" rel="stylesheet"></noscript>
    <link href="/cis580/css/perfect-scrollbar/perfect-scrollbar.min.css?1756153111" rel="stylesheet">
    <link href="/cis580/css/theme.min.css?1756153111" rel="stylesheet">
    <link href="/cis580/css/format-print.min.css?1756153111" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/06-physics\/03-angular-dynamics\/index.html';
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='https:\/\/textbooks.cs.ksu.edu\/cis580';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=true;
      window.relearn.enableBlockCodeWrap=false;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      // variant stuff
      window.relearn.themevariants = [ 'light-theme' ];
      window.relearn.customvariantname = "my-custom-variant";
      // [x] russfeld
      window.relearn.writeVariant=false;
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          
          if (window.relearn.writeVariant) {
            window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
          }
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
    <link href="/cis580/css/custom.css?1756153111" rel="stylesheet">
  </head>
  <body class="mobile-support print" data-url="/cis580/06-physics/03-angular-dynamics/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#rocket-thrust">Rocket Thrust</a></li>
        <li><a href="#todo-1-calculate-and-apply-torque-from-left-rocket">TODO 1: Calculate and apply torque from left rocket</a></li>
        <li><a href="#todo-2-calculate-and-apply-torque-from-right-rocket">TODO 2: Calculate and apply torque from right rocket</a></li>
      </ul>
    </li>
  </ul>
</nav>
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class="a11y-only"><a itemprop="item" href="/cis580/index.html"><span itemprop="name">CIS 580: Foundations of Game Programming</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/cis580/06-physics/index.html"><span itemprop="name">Physics</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><span itemprop="name">Angular Dynamics</span><meta itemprop="position" content="3"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-edit" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show"><a class="topbar-control" href="https://github.com/ksu-cs-textbooks/cis580/edit/master/content/06-physics/03-angular-dynamics.md" rel="external" target="_blank" title="Edit (CTRL+ALT+w)"><i class="fa-fw fas fa-pen"></i></a>
            </div>
            <div class="topbar-button topbar-button-print" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/cis580/06-physics/03-angular-dynamics/index.print.html" title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a>
            </div>
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/cis580/06-physics/02-linear-dynamics/index.html" title="Linear Dynamics (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/cis580/06-physics/04-elastic-collisions/index.html" title="Elastic Collisions (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
            <div class="topbar-button topbar-button-embed" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/cis580/06-physics/03-angular-dynamics/embed.html" title="Embeddable Version"><i class="fa-fw fas fa-expand-arrows-alt"></i></a>
            </div>
            <div class="topbar-button topbar-button-tele" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/cis580/06-physics/03-angular-dynamics/tele.html" title="Teleprompter View"><i class="fa-fw fas fa-tv"></i></a>
            </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable 06-physics" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="angular-dynamics">Angular Dynamics</h1>

<p>There is a second set of equations that govern angular motion (rotation) you may have encountered, where <span class="math align-center">$ \omega $</span> is angular velocity, <span class="math align-center">$ \alpha $</span> the angular acceleration, and <span class="math align-center">$ \theta $</span> the rotation of the body:</p>
<p><span class="math align-center">$$ \omega = \omega_0 + \alpha t \tag{1} $$</span>
<span class="math align-center">$$ \theta = \theta_0 + \omega_0 t + \frac{1}{2}\alpha t^2 \tag{2} $$</span>
<span class="math align-center">$$ \theta = \theta_0 + \frac{1}{2}(\omega_0 + \omega)t \tag{3} $$</span>
<span class="math align-center">$$ \omega^2 = \omega_0^2 + 2\alpha(\theta-\theta_0) \tag{4} $$</span>
<span class="math align-center">$$ \theta = \theta_0 + \omega t - \frac{1}{2}\alpha t^2 \tag{5} $$</span></p>
<p>These equations parallel those we saw for linear dynamics, and in fact, have the same derivative relationships between them:</p>
<p><span class="math align-center">$$ \theta(t) \tag{6} $$</span>
<span class="math align-center">$$ \omega(t) = \theta'(t) \tag{7} $$</span>
<span class="math align-center">$$ \alpha(t) = \omega'(t) \tag{8} $$</span></p>
<p>And, just like linear dynamics, we can utilize this relationship and our small timestep to sidestep complex calculations in our code.  Thus, we can calculate the rotational change from the angular velocity (assuming <code>float rotation</code>, <code>angularVelocity</code>, and <code>angularAcceleration</code> values expressed in radians):</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>rotation += angularVelocity * gameTime.elapsedGameTime.TotalSeconds;</span></span></code></pre></div>
<p>And the change in angular velocity can be calculated from the angular acceleration:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>angularAcceleration = angularVelocity * gameTime.elapsedGameTime.TotalSeconds;</span></span></code></pre></div>
<p>Finally, angular acceleration can be imposed with an instantaneous force.  However, this is slightly more complex than we saw with linear dynamics, as this force needs to be applied somewhere <em>other than the center of mass</em>.  Doing so applies both rotational and linear motion to an object.  This rotational aspect is referred to as <em>torque</em>, and is calculated by taking the cross product of the force&rsquo;s point of application relative to the center of mass and the force vector.  Thus:</p>
<span class="math align-center">$$ \tau = \overline{r} x \overline{F} $$</span>
<p>Where <span class="math align-center">$ tau $</span> is our torque, <span class="math align-center">$ \overline{r} $</span> is the vector from the center of mass to where the force is applied, and <span class="math align-center">$ \overline{F} $</span> is the force vector.</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>torque = force.X * r.Y - force.Y * r.X;</span></span></code></pre></div>
<p>Torque is the force imposing angular acceleration, and can be applied directly to the velocity:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>angularAcceleration += torque * gameTime.ElapsedGameTime.TotalSeconds;</span></span></code></pre></div>
<p>And much like force and linear acceleration, multiple torques applied to an object are summed.</p>

<details open class=" box cstyle notices info">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-info-circle"></i> 
    Info
  </summary>
  <div class="box-content">
<p>XNA does not define the cross product function in its <code>Vector2</code> library, so we computed it manually above.  If you would like to add it as a method in your projects, we can do so using an <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/extension-methods" rel="external" target="_blank">extension method</a>, i.e. define in one of your game&rsquo;s namespaces:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Vector2Extensions</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Computes the cross product of two Vector2 structs</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param ref=&#34;a&#34;&gt;The first vector&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param ref=&#34;b&#34;&gt;The second vector&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">float</span> CrossProduct(Vector2 a, Vector2 b)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> a.X * b.Y - a.Y * b.X;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Computes the cross product of this vector with another</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param ref=&#34;other&#34;&gt;the other vector&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">float</span> Cross(<span style="color:#66d9ef">this</span> Vector2 a, Vector2 other)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> CrossProduct(a, other);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>As long as this class is in scope (i.e. you have an appropriate <code>using</code> statement), you should be able to invoke <code>Cross()</code> on any <code>Vector2</code>.  So the code listing:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>torque = force.X * r.Y - force.Y * r.X;</span></span></code></pre></div>
<p>Could be rewritten as:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>torque = force.Cross(r);</span></span></code></pre></div>
<p> </p>
  </div>
</details>
<h3 id="rocket-thrust">Rocket Thrust</h3>
<p>Let&rsquo;s work through an example.  Consider this diagram:</p>
<p><a href="#R-image-06a79fd59f61eb50ebe338c3e02cab8a" class="lightbox-link"><img alt="Torque applied to a spaceship" class="border lazy lightbox figure-image" loading="lazy" src="/cis580/images/6.3.1.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-06a79fd59f61eb50ebe338c3e02cab8a"><img alt="Torque applied to a spaceship" class="border lazy lightbox lightbox-image" loading="lazy" src="/cis580/images/6.3.1.png"></a></p>
<p>The red arrow is the force vector applied from the left rocket.  The green arrow is the vector from the position the force is applied to the center of mass of the ship.  Firing just this one rocket will impose a rotation on the ship in the direction of the white arrow.  Firing <em>both</em> rockets will impose an opposite torque, cancelling both.</p>
<p>Let&rsquo;s write the control code for this spaceship.  We&rsquo;ll define class fields for both linear and angular velocity and acceleration, as well as position, direction, and angle.  We&rsquo;ll also supply a constant for the amount of linear acceleration applied by our spaceship:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">// Constants</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">float</span> LINEAR_ACCELERATION = <span style="color:#ae81ff">10</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Linear movement fields</span>
</span></span><span style="display:flex;"><span>Vector2 position;
</span></span><span style="display:flex;"><span>Vector2 direction;
</span></span><span style="display:flex;"><span>Vector2 velocity;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Angular movement fields</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">float</span> angle; 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">float</span> angularVelocity;</span></span></code></pre></div>
<p>Then we&rsquo;ll use these in our update method:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> Update(GameTime gameTime) 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    KeyBoardState keyboardState = Keyboard.GetState();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">float</span> t = (<span style="color:#66d9ef">float</span>)gameTime.ElapsedGameTime.TotalSeconds;
</span></span><span style="display:flex;"><span>    Vector2 acceleration = Vector2.Zero; <span style="color:#75715e">// linear acceleration</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">float</span> angularAcceleration = <span style="color:#ae81ff">0</span>; <span style="color:#75715e">// angular acceleration</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Determine if the left rocket is firing</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(keyboardState.IsKeyPressed(Keys.A))
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// LABEL A: Apply linear force in the direction we face from left rocket</span>
</span></span><span style="display:flex;"><span>        acceleration += direction * LINEAR_ACCELERATION * t;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// TODO 1: Calculate and apply torque from left rocket</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Determine if the right rocket is firing </span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(keyboardState.IsKeyPressed(Keys.D))
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// LABEL B: Apply linear force in the direction we face from right rocket</span>
</span></span><span style="display:flex;"><span>        acceleration += direction * LINEAR_ACCELERATION * t;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// TODO 2: Calculate and apply torque from right rocket</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Update linear velocity and position </span>
</span></span><span style="display:flex;"><span>    velocity += acceleration * t;
</span></span><span style="display:flex;"><span>    position += velocity * t;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// update angular velocity and rotation </span>
</span></span><span style="display:flex;"><span>    angularVelocity += angularAcceleration * t;
</span></span><span style="display:flex;"><span>    angle += angularVelocity * t;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// LABEL C: Apply rotation to our direction vector  </span>
</span></span><span style="display:flex;"><span>    direction = Vector2.Transform(Vector2.UnitY, <span style="color:#66d9ef">new</span> Matrix.CreateRotationZ(theta));
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>There&rsquo;s a lot  going on in this method, so let&rsquo;s break it down in pieces, starting with the code following the <code>LABEL</code> comments:</p>
<h4 id="label-a--b---apply-linear-force-in-the-direction-we-face-from-left-rocket-and-right-rocket">LABEL A &amp; B - Apply linear force in the direction we face from left rocket and right rocket</h4>
<p>When we apply force against a body <em>not toward its center</em>, part of that force becomes torque, but the rest of it is linear acceleration.  Technically, we can calculate exactly what this is with trigonometry.  But in this case, we don&rsquo;t care - we just want the ship to accelerate in the direction it is facing.  So we multiply the <code>direction</code> vector by a constant representing the force divided by the mass of our spaceship (acceleration), and the number of seconds that force was applied.</p>
<p>Note that we consider our spaceship mass to be constant here.  If we were really trying to be 100% accurate, the mass would change over time as we burn fuel.  But that&rsquo;s extra calculations, so unless you are going for realism, it&rsquo;s simpler to provide a constant, a lá <code>LINEAR_ACCELERATION</code>.  Yet another example of simplifying physics for games.</p>
<h4 id="label-c---apply-rotation-to-our-direction-vector">LABEL C - Apply rotation to our direction vector</h4>
<p>We need to know the direction the ship is facing to apply our linear acceleration.  Thus, we need to convert our angle <code>angle</code> into a <code>Vector2</code>.  We can do this with trigonometry:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>direction.X = (<span style="color:#66d9ef">float</span>)Math.Cos(theta);
</span></span><span style="display:flex;"><span>direction.Y = (<span style="color:#66d9ef">float</span>)Math.Sin(theta);</span></span></code></pre></div>
<p>Or we can utilize matrix operations:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>direction = Vector2.Transform(Vector2.UnitY, <span style="color:#66d9ef">new</span> Matrix.CreateRotationZ(theta));</span></span></code></pre></div>
<p>We&rsquo;ll discuss the math behind this second method soon.  Either method will work.</p>
<h3 id="todo-1-calculate-and-apply-torque-from-left-rocket">TODO 1: Calculate and apply torque from left rocket</h3>
<p>Here we need to insert code for calculating the torque.  First, we need to know the distance from the rocket engine to the center of mass of the ship.  Let&rsquo;s assume our ship sprite is <span class="math align-center">$ 152x115 $</span>, and our center of mass is at <span class="math align-center">$ <76,50> $</span>.  Thus, our <code>r</code> vector would be:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Vector2 r = <span style="color:#66d9ef">new</span> Vector2(<span style="color:#ae81ff">76</span>,<span style="color:#ae81ff">50</span>);</span></span></code></pre></div>
<p>The second value we need is our force.  We could factor in our ship rotation at this point, but it is easier if we instead rotate our coordinate system and place its origin at the center of mass for the ship, i.e.:</p>
<p><a href="#R-image-33f80bdaf4d275ec14a9c2de617c34d5" class="lightbox-link"><img alt="The rotated coordinate system" class="border lazy lightbox figure-image" loading="lazy" src="/cis580/images/6.3.2.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-33f80bdaf4d275ec14a9c2de617c34d5"><img alt="The rotated coordinate system" class="border lazy lightbox lightbox-image" loading="lazy" src="/cis580/images/6.3.2.png"></a></p>
<p>Then our force vector is simply a vector in the upward direction, whose magnitude is the amount of the force tangential to the <code>r</code> vector.  For simplicity, we&rsquo;ll use a literal constant instead of calculating this:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Vector2 force = <span style="color:#66d9ef">new</span> Vector2(<span style="color:#ae81ff">0</span>, FORCE_MAGNITUDE);</span></span></code></pre></div>
<p>Then we can calculate the torque with the cross product of these two vectors:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">float</span> torque = force.X * r.Y - force.Y * r.X;</span></span></code></pre></div>
<p>And then calculate the rotational acceleration:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">float</span> angularAcceleration += torque / ROTATIONAL_INERTIA;</span></span></code></pre></div>
<p>The <code>ROTATIONAL_INERTIA</code> represents the resistance of the body to rotation (basically, it plays the same role as mass in linear dynamics).  For simplicity, we could treat it as <span class="math align-center">$ 1 $</span> (no real effect - after all, we&rsquo;re in a vacuum), which allows us to refactor as:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">float</span> angularAcceleration += torque;</span></span></code></pre></div>
<h3 id="todo-2-calculate-and-apply-torque-from-right-rocket">TODO 2: Calculate and apply torque from right rocket</h3>
<p>Now that we&rsquo;ve seen the longhand way of doing things &ldquo;properly&rdquo;, let&rsquo;s apply some game-programming savvy shortcuts to our right-engine calculations.</p>
<p>Note that for this example, the vector <code>r</code> does not change - the engine should always be the same distance from the center of mass, and the force vector of the engine will always be in the same direction. relative to <code>r</code>.  So the cross product of the two will <em>always be the same</em>.  So we could pre-calculate this value, <em>and</em> apply the proper moment of inertia, leaving us with a single constant representing the angular acceleration from the engines which we can represent as a constant, <code>ANGULAR_ACCELERATION</code>.  Since this is reversed for the  right engine, our simplified acceleration calculation would be:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>angularAcceleration -= ANGULAR_ACCELERATION * t;</span></span></code></pre></div>
<p>(and the right engine would have been <code>angularAcceleration += ANGULAR_ACCELERATION * t;</code>)</p>
<p>Thus, with careful thought we can simplify six addition operations, four multiplications, one subtraction, one multiplication, and two struct allocation operations to just <em>two multiplications and two additions</em>.  This kind of simplification and optimization is common in game programming.  And, in fact, after calculating the <code>ANGULAR_ACCELERATION</code> value we would probably tweak it until the movement felt natural and fun (or just guess at the value to begin with)!</p>
<p>Of course, if we were doing scientific simulation, we would instead have to carry out all of the calculations, couldn&rsquo;t use fudge factors, and would have additional considerations.  For example, if the fuel tanks are not at the center of mass, then every time we fire our rockets <em>the center of mass will shift!</em>  That is why scientific simulations are considered <em>hard simulations</em>.  Not so much because they are hard to write - but because accuracy is so important.</p>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
<div class="git-footer">
  <p class="theme-version-footer">8.0.0</p>
<p>Last modified by:
              <i class='fa-fw fas fa-user'></i> Russell Feldhausen
              <i class='fas fa-calendar'></i> <a href="https://github.com/ksu-cs-textbooks/cis580/commit/5f59dff29e6746cb45cf91bffa33b978549f76a8">Aug 14, 2023</a>
</p>

</div>
    </div>
    <script>
      window.MathJax = Object.assign( window.MathJax || {}, {
        tex: {
          inlineMath:  [['\\(', '\\)'], ['$',  '$']],  
          displayMath: [['\\[', '\\]'], ['$$', '$$']], 
        },
        options: {
          enableMenu: false 
        }
      }, JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="/cis580/js/mathjax/tex-mml-chtml.js?1756153111"></script>
    <script src="/cis580/js/clipboard/clipboard.min.js?1756153111" defer></script>
    <script src="/cis580/js/perfect-scrollbar/perfect-scrollbar.min.js?1756153111" defer></script>
    <script src="/cis580/js/theme.min.js?1756153111" defer></script>
  </body>
</html>
