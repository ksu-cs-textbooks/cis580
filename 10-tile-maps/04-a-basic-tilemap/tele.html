




  
	
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.128.0">
    <meta name="generator" content="Relearn 6.0.0">
    <meta name="description" content="Now that we have a good sense of what a tile map consists of, as well as how to effectively use a 1-dimensional array as a 2-dimensional array, let’s discuss actual implementations. As we discussed conceptually, we need: 1) a set of tiles, and 2) the arrangement of those tiles into a map.
Let’s start by thinking about our tiles. To draw a tile, we need to know:
What texture the tile appears in The bounds of the tile in that texture Where the tile should appear on screen To determine this information, we need several other items:">
    <meta name="author" content="Nathan Bean">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="A Basic Tile Engine :: K-State CIS 580 Textbook">
    <meta name="twitter:description" content="Now that we have a good sense of what a tile map consists of, as well as how to effectively use a 1-dimensional array as a 2-dimensional array, let’s discuss actual implementations. As we discussed conceptually, we need: 1) a set of tiles, and 2) the arrangement of those tiles into a map.
Let’s start by thinking about our tiles. To draw a tile, we need to know:
What texture the tile appears in The bounds of the tile in that texture Where the tile should appear on screen To determine this information, we need several other items:">
    <meta property="og:url" content="https://textbooks.cs.ksu.edu/cis580/10-tile-maps/04-a-basic-tilemap/">
    <meta property="og:site_name" content="K-State CIS 580 Textbook">
    <meta property="og:title" content="A Basic Tile Engine :: K-State CIS 580 Textbook">
    <meta property="og:description" content="Now that we have a good sense of what a tile map consists of, as well as how to effectively use a 1-dimensional array as a 2-dimensional array, let’s discuss actual implementations. As we discussed conceptually, we need: 1) a set of tiles, and 2) the arrangement of those tiles into a map.
Let’s start by thinking about our tiles. To draw a tile, we need to know:
What texture the tile appears in The bounds of the tile in that texture Where the tile should appear on screen To determine this information, we need several other items:">
    <meta property="og:locale" content="en-us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Tile Maps">
    <meta property="article:published_time" content="2020-03-20T10:53:05-05:00">
    <meta property="article:modified_time" content="2022-03-03T14:59:28-06:00">
    <meta itemprop="name" content="A Basic Tile Engine :: K-State CIS 580 Textbook">
    <meta itemprop="description" content="Now that we have a good sense of what a tile map consists of, as well as how to effectively use a 1-dimensional array as a 2-dimensional array, let’s discuss actual implementations. As we discussed conceptually, we need: 1) a set of tiles, and 2) the arrangement of those tiles into a map.
Let’s start by thinking about our tiles. To draw a tile, we need to know:
What texture the tile appears in The bounds of the tile in that texture Where the tile should appear on screen To determine this information, we need several other items:">
    <meta itemprop="datePublished" content="2020-03-20T10:53:05-05:00">
    <meta itemprop="dateModified" content="2022-03-03T14:59:28-06:00">
    <meta itemprop="wordCount" content="786">
    <title>A Basic Tile Engine :: K-State CIS 580 Textbook</title>
    <link href="https://textbooks.cs.ksu.edu/cis580/10-tile-maps/04-a-basic-tilemap/" rel="canonical" type="text/html" title="A Basic Tile Engine :: K-State CIS 580 Textbook">
    <link href="/cis580/10-tile-maps/04-a-basic-tilemap/index.xml" rel="alternate" type="application/rss+xml" title="A Basic Tile Engine :: K-State CIS 580 Textbook">
    <link href="/cis580/10-tile-maps/04-a-basic-tilemap/index.print.html" rel="alternate" type="text/html" title="A Basic Tile Engine :: K-State CIS 580 Textbook">
    <link href="/cis580/10-tile-maps/04-a-basic-tilemap/embed.html" rel="alternate" type="text/html" title="A Basic Tile Engine :: K-State CIS 580 Textbook">
    <link href="/cis580/css/fontawesome-all.min.css?1723670681" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cis580/css/fontawesome-all.min.css?1723670681" rel="stylesheet"></noscript>
    <link href="/cis580/css/nucleus.css?1723670681" rel="stylesheet">
    <link href="/cis580/css/auto-complete.css?1723670681" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cis580/css/auto-complete.css?1723670681" rel="stylesheet"></noscript>
    <link href="/cis580/css/perfect-scrollbar.min.css?1723670681" rel="stylesheet">
    <link href="/cis580/css/fonts.css?1723670681" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cis580/css/fonts.css?1723670681" rel="stylesheet"></noscript>
    <link href="/cis580/css/theme.css?1723670681" rel="stylesheet">
    <link href="/cis580/css/theme-auto.css?1723670681" rel="stylesheet" id="R-variant-style">
    <link href="/cis580/css/chroma-auto.css?1723670681" rel="stylesheet" id="R-variant-chroma-style">
    <link href="/cis580/css/variant.css?1723670681" rel="stylesheet">
    <link href="/cis580/css/print.css?1723670681" rel="stylesheet" media="print">
    <script src="/cis580/js/variant.js?1723670681"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='https:\/\/textbooks.cs.ksu.edu\/cis580';
      window.index_js_url="/cis580/index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'auto', 'light-theme', 'dark-theme' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
    
    <link href="/cis580/css/custom.css?1723670681" rel="stylesheet">
  </head>
  <body class="mobile-support tele disableInlineCopyToClipboard" data-url="/cis580/10-tile-maps/04-a-basic-tilemap/">
    
    <div id="tele" class="tele mirror">
    
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      
      
      
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id="a-basic-tile-engine">A Basic Tile Engine</h1>

<p>Now that we have a good sense of what a tile map consists of, as well as how to effectively use a 1-dimensional array as a 2-dimensional array, let&rsquo;s discuss actual implementations. As we discussed conceptually, we need: 1) a set of tiles, and 2) the arrangement of those tiles into a map.</p>
<p>Let&rsquo;s start by thinking about our tiles.  To draw a tile, we need to know:</p>
<ol>
<li>What texture the tile appears in</li>
<li>The bounds of the tile in that texture</li>
<li>Where the tile should appear on screen</li>
</ol>
<p>To determine this information, we need several other items:</p>
<ul>
<li>The width of the map in tiles</li>
<li>The height of the map in tiles</li>
<li>The width of a tile in pixels</li>
<li>The height of a tile in pixels</li>
</ul>
<p>And we can simplify the problem with some assumptions:</p>
<ul>
<li>Tiles are all the same size</li>
<li>The tileset image has the tiles organized side-by-side in a grid pattern</li>
</ul>
<h4 id="representing-the-map">Representing the Map</h4>
<p>Given this understanding, we can determine some fields we&rsquo;ll need to keep track of the data:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl"><span class="cs">/// &lt;summary&gt;The map filename&lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="kt">string</span> <span class="n">_mapFilename</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cs">/// &lt;summary&gt;The tileset texture&lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="n">Texture2D</span> <span class="n">_tilesetTexture</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cs">/// &lt;summary&gt;The map and tile dimensions&lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="kt">int</span> <span class="n">_tileWidth</span><span class="p">,</span> <span class="n">_tileHeight</span><span class="p">,</span> <span class="n">_mapWidth</span><span class="p">,</span> <span class="n">_mapHeight</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cs">/// &lt;summary&gt;The tileset data&lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="n">Rectangle</span><span class="p">[]</span> <span class="n">_tiles</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cs">/// &lt;summary&gt;The map data&lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kd">private</span> <span class="kt">int</span><span class="p">[]</span> <span class="n">_map</span><span class="p">;</span></span></span></code></pre></div><h4 id="loading-the-data">Loading the Data</h4>
<p>Now let&rsquo;s turn our attention to how we can <em>populate</em> those fields. Let&rsquo;s first consider how we might write the data for a tilemap in a text file:</p>
<div class="highlight"><pre tabindex="0"><code>tileset
64, 64
10, 10
3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 4, 4, 4, 2, 2, 2, 2, 2, 2, 3, 3, 2, 4, 4, 1, 4, 2, 2, 2, 3, 3, 2, 2, 2, 2, 4, 4, 4, 2, 3, 3, 2, 2, 2, 2, 2, 2, 1, 2, 3, 3, 3, 1, 3, 2, 2, 2, 4, 4, 3, 3, 2, 2, 3, 2, 3, 2, 2, 4, 4, 3, 2, 2, 3, 2, 3, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3</code></pre></div><p>In this example, the first line is the name of the tileset image file (which is loaded through the content pipeline, so it has no extension).  The second line is the width and height of a tile, and the third line is the width and height of the map (measured in tiles).  The last line is the indices of the tiles from the tileset image.</p>
<p>Loading the data from this file requires a method like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl"><span class="kd">public</span> <span class="k">void</span> <span class="n">LoadContent</span><span class="p">(</span><span class="n">ContentManager</span> <span class="n">content</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Read in the map file</span>
</span></span><span class="line"><span class="cl">    <span class="kt">string</span> <span class="n">data</span> <span class="p">=</span> <span class="n">File</span><span class="p">.</span><span class="n">ReadAllText</span><span class="p">(</span><span class="n">Path</span><span class="p">.</span><span class="n">Join</span><span class="p">(</span><span class="n">content</span><span class="p">.</span><span class="n">RootDirectory</span><span class="p">,</span> <span class="n">_mapFilename</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="kt">var</span> <span class="n">lines</span> <span class="p">=</span> <span class="n">data</span><span class="p">.</span><span class="n">Split</span><span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// First line is tileset image file name </span>
</span></span><span class="line"><span class="cl">    <span class="kt">var</span> <span class="n">tilesetFileName</span> <span class="p">=</span> <span class="n">lines</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">Trim</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">_tilesetTexture</span> <span class="p">=</span> <span class="n">content</span><span class="p">.</span><span class="n">Load</span><span class="p">&lt;</span><span class="n">Texture2D</span><span class="p">&gt;(</span><span class="n">tilesetFileName</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Second line is tile size</span>
</span></span><span class="line"><span class="cl">    <span class="kt">var</span> <span class="n">secondLine</span> <span class="p">=</span> <span class="n">lines</span><span class="p">[</span><span class="m">1</span><span class="p">].</span><span class="n">Split</span><span class="p">(</span><span class="sc">&#39;,&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">_tileWidth</span> <span class="p">=</span> <span class="kt">int</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">secondLine</span><span class="p">[</span><span class="m">0</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">    <span class="n">_tileHeight</span> <span class="p">=</span> <span class="kt">int</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">secondLine</span><span class="p">[</span><span class="m">1</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Now that we know the tile size and tileset</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// image, we can determine tile bounds</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">tilesetColumns</span> <span class="p">=</span> <span class="n">_tilesetTexture</span><span class="p">.</span><span class="n">Width</span> <span class="p">/</span> <span class="n">_tileWidth</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">tilesetRows</span> <span class="p">=</span> <span class="n">_tilesetTexture</span><span class="p">.</span><span class="n">Height</span> <span class="p">/</span> <span class="n">_tileWidth</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">_tiles</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Rectangle</span><span class="p">[</span><span class="n">tilesetColumns</span> <span class="p">*</span> <span class="n">tilesetRows</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">y</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">y</span> <span class="p">&lt;</span> <span class="n">tilesetRows</span><span class="p">;</span> <span class="n">y</span><span class="p">++)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">x</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">x</span> <span class="p">&lt;</span> <span class="n">tilesetColumns</span><span class="p">;</span> <span class="n">x</span><span class="p">++)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">_tiles</span><span class="p">[</span><span class="n">y</span> <span class="p">*</span> <span class="n">tilesetColumns</span> <span class="p">+</span> <span class="n">x</span><span class="p">]</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Rectangle</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="n">x</span> <span class="p">*</span> <span class="n">_tileWidth</span><span class="p">,</span> <span class="c1">// upper left-hand x cordinate</span>
</span></span><span class="line"><span class="cl">                <span class="n">y</span> <span class="p">*</span> <span class="n">_tileHeight</span><span class="p">,</span> <span class="c1">// upper left-hand y coordinate</span>
</span></span><span class="line"><span class="cl">                <span class="n">_tileWidth</span><span class="p">,</span> <span class="c1">// width </span>
</span></span><span class="line"><span class="cl">                <span class="n">_tileHeight</span> <span class="c1">// height</span>
</span></span><span class="line"><span class="cl">                <span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Third line is map size (in tiles)</span>
</span></span><span class="line"><span class="cl">    <span class="kt">var</span> <span class="n">thirdLine</span> <span class="p">=</span> <span class="n">lines</span><span class="p">[</span><span class="m">2</span><span class="p">].</span><span class="n">Split</span><span class="p">(</span><span class="sc">&#39;,&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">_mapWidth</span> <span class="p">=</span> <span class="kt">int</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">thirdLine</span><span class="p">[</span><span class="m">0</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">    <span class="n">_mapHeight</span> <span class="p">=</span> <span class="kt">int</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">thirdLine</span><span class="p">[</span><span class="m">1</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Fourth line is map data</span>
</span></span><span class="line"><span class="cl">    <span class="n">_map</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">[</span><span class="n">_mapWidth</span> <span class="p">*</span> <span class="n">_mapHeight</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="kt">var</span> <span class="n">fourthLine</span> <span class="p">=</span> <span class="n">lines</span><span class="p">[</span><span class="m">3</span><span class="p">].</span><span class="n">Split</span><span class="p">(</span><span class="sc">&#39;,&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">_mapWidth</span> <span class="p">*</span> <span class="n">_mapHeight</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">_map</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">=</span> <span class="kt">int</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">fourthLine</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div><p>While there is a lot going on here, it is also mostly basic File I/O based on the structure of the file.</p>
<h4 id="rendering-the-tilemap">Rendering the Tilemap</h4>
<p>Finally, drawing the map involves iterating over the data and invoking <code>SpriteBatch.Draw()</code> for each tile that needs drawn.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl"><span class="kd">public</span> <span class="k">void</span> <span class="n">Draw</span><span class="p">(</span><span class="n">GameTime</span> <span class="n">gameTime</span><span class="p">,</span> <span class="n">SpriteBatch</span> <span class="n">spriteBatch</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">y</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">y</span> <span class="p">&lt;</span> <span class="n">_mapHeight</span><span class="p">;</span> <span class="n">y</span><span class="p">++)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">x</span> <span class="p">&lt;</span> <span class="n">_mapWidth</span><span class="p">;</span> <span class="n">x</span><span class="p">++)</span> 
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// Indexes start at 1, so shift for array coordinates</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">index</span> <span class="p">=</span> <span class="n">_map</span><span class="p">[</span><span class="n">y</span> <span class="p">*</span> <span class="n">_mapWidth</span> <span class="p">+</span> <span class="n">x</span><span class="p">]</span> <span class="p">-</span> <span class="m">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// Index of -1 (shifted from 0) should not be drawn</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">index</span> <span class="p">==</span> <span class="p">-</span><span class="m">1</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">spriteBatch</span><span class="p">.</span><span class="n">Draw</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="n">_tilesetTexture</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="k">new</span> <span class="n">Vector2</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                    <span class="n">x</span> <span class="p">*</span> <span class="n">_tileWidth</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="n">y</span> <span class="p">*</span> <span class="n">_tileHeight</span>
</span></span><span class="line"><span class="cl">                <span class="p">),</span>
</span></span><span class="line"><span class="cl">                <span class="n">_tiles</span><span class="p">[</span><span class="n">index</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">                <span class="n">Color</span><span class="p">.</span><span class="n">White</span>
</span></span><span class="line"><span class="cl">            <span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div><p>Organizing these fields and methods into a class gives us a simple tile engine. This can be expanded to address a lot of different games&rsquo; needs.  However, it <em>does</em> require building the map file by hand, using raw tile indices.  This gets challenging quickly, which leads us to our next topic - using a tilemap editor.</p>

            <footer class="footline">
              
              
              
              
            </footer>
          </article>
</div>
</main>
</div>

</div>




<script src="/cis580/js/clipboard.min.js?1723670681" defer></script>
<script src="/cis580/js/perfect-scrollbar.min.js?1723670681" defer></script>
<script src="/cis580/js/theme.js?1723670681" defer></script>

<script src="/cis580/js/tele-scroll.js?1723670681" defer></script>

</body>
</html>
