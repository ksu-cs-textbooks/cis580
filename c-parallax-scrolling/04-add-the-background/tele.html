<!DOCTYPE html>

<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.128.0">
    <meta name="generator" content="Relearn 8.0.0">
    <meta name="description" content="Now that we have our ParallaxLayer class, let’s add instances of it to our Game1 class.
The Background Layer Let’s start with the background layer. First, we’ll need to import our three texture, in our LoadContent method:
var backgroundTexture = Content.Load&lt;Texture2D&gt;(&#34;background&#34;); Then we can create StaticSprite instance:
var backgroundSprite = new StaticSprite(backgroundTexture); And finally, create our ParallaxLayer instance:
var backgroundLayer = new ParallaxLayer(this); We’ll add our sprite to it:
backgroundLayer.Sprites.Add(backgroundSprite); And set its DrawOrder.">
    <meta name="author" content="Nathan H. Bean">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://textbooks.cs.ksu.edu/cis580/images/hero.png">
    <meta name="twitter:title" content="Adding the Background :: K-State CIS 580 Textbook">
    <meta name="twitter:description" content="Now that we have our ParallaxLayer class, let’s add instances of it to our Game1 class.
The Background Layer Let’s start with the background layer. First, we’ll need to import our three texture, in our LoadContent method:
var backgroundTexture = Content.Load&lt;Texture2D&gt;(&#34;background&#34;); Then we can create StaticSprite instance:
var backgroundSprite = new StaticSprite(backgroundTexture); And finally, create our ParallaxLayer instance:
var backgroundLayer = new ParallaxLayer(this); We’ll add our sprite to it:
backgroundLayer.Sprites.Add(backgroundSprite); And set its DrawOrder.">
    <meta property="og:url" content="https://textbooks.cs.ksu.edu/cis580/c-parallax-scrolling/04-add-the-background/index.html">
    <meta property="og:site_name" content="K-State CIS 580 Textbook">
    <meta property="og:title" content="Adding the Background :: K-State CIS 580 Textbook">
    <meta property="og:description" content="Now that we have our ParallaxLayer class, let’s add instances of it to our Game1 class.
The Background Layer Let’s start with the background layer. First, we’ll need to import our three texture, in our LoadContent method:
var backgroundTexture = Content.Load&lt;Texture2D&gt;(&#34;background&#34;); Then we can create StaticSprite instance:
var backgroundSprite = new StaticSprite(backgroundTexture); And finally, create our ParallaxLayer instance:
var backgroundLayer = new ParallaxLayer(this); We’ll add our sprite to it:
backgroundLayer.Sprites.Add(backgroundSprite); And set its DrawOrder.">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Parallax Scrolling">
    <meta property="article:published_time" content="2020-03-24T10:00:00-05:00">
    <meta property="article:modified_time" content="2023-08-11T11:18:05-05:00">
    <meta property="og:image" content="https://textbooks.cs.ksu.edu/cis580/images/hero.png">
    <meta itemprop="name" content="Adding the Background :: K-State CIS 580 Textbook">
    <meta itemprop="description" content="Now that we have our ParallaxLayer class, let’s add instances of it to our Game1 class.
The Background Layer Let’s start with the background layer. First, we’ll need to import our three texture, in our LoadContent method:
var backgroundTexture = Content.Load&lt;Texture2D&gt;(&#34;background&#34;); Then we can create StaticSprite instance:
var backgroundSprite = new StaticSprite(backgroundTexture); And finally, create our ParallaxLayer instance:
var backgroundLayer = new ParallaxLayer(this); We’ll add our sprite to it:
backgroundLayer.Sprites.Add(backgroundSprite); And set its DrawOrder.">
    <meta itemprop="datePublished" content="2020-03-24T10:00:00-05:00">
    <meta itemprop="dateModified" content="2023-08-11T11:18:05-05:00">
    <meta itemprop="wordCount" content="293">
    <meta itemprop="image" content="https://textbooks.cs.ksu.edu/cis580/images/hero.png">
    <title>Adding the Background :: K-State CIS 580 Textbook</title>
    <link href="https://textbooks.cs.ksu.edu/cis580/c-parallax-scrolling/04-add-the-background/index.html" rel="canonical" type="text/html" title="Adding the Background :: K-State CIS 580 Textbook">
    <link href="/cis580/c-parallax-scrolling/04-add-the-background/index.xml" rel="alternate" type="application/rss+xml" title="Adding the Background :: K-State CIS 580 Textbook">
    <link href="/cis580/c-parallax-scrolling/04-add-the-background/index.print.html" rel="alternate" type="text/html" title="Adding the Background :: K-State CIS 580 Textbook">
    <link href="/cis580/c-parallax-scrolling/04-add-the-background/embed.html" rel="alternate" type="text/html" title="Adding the Background :: K-State CIS 580 Textbook">
    <link href="/cis580/css/auto-complete/auto-complete.min.css?1756153111" rel="stylesheet">
    <script src="/cis580/js/auto-complete/auto-complete.min.js?1756153111" defer></script>
    <script src="/cis580/js/search-lunr.min.js?1756153111" defer></script>
    <script src="/cis580/js/search.min.js?1756153111" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/cis580/searchindex.en.js?1756153111";
    </script>
    <script src="/cis580/js/lunr/lunr.min.js?1756153111" defer></script>
    <script src="/cis580/js/lunr/lunr.stemmer.support.min.js?1756153111" defer></script>
    <script src="/cis580/js/lunr/lunr.multi.min.js?1756153111" defer></script>
    <script src="/cis580/js/lunr/lunr.en.min.js?1756153111" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/cis580/fonts/fontawesome/css/fontawesome-all.min.css?1756153111" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cis580/fonts/fontawesome/css/fontawesome-all.min.css?1756153111" rel="stylesheet"></noscript>
    <link href="/cis580/css/perfect-scrollbar/perfect-scrollbar.min.css?1756153111" rel="stylesheet">
    <link href="/cis580/css/theme.min.css?1756153111" rel="stylesheet">
    <link href="/cis580/css/format-html.min.css?1756153111" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/c-parallax-scrolling\/04-add-the-background\/index.html';
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='https:\/\/textbooks.cs.ksu.edu\/cis580';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=true;
      window.relearn.enableBlockCodeWrap=false;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      // variant stuff
      window.relearn.themevariants = [ 'light-theme' ];
      window.relearn.customvariantname = "my-custom-variant";
      // [x] russfeld
      window.relearn.writeVariant=false;
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          
          if (window.relearn.writeVariant) {
            window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
          }
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
    <link href="/cis580/css/custom.css?1756153111" rel="stylesheet">
  </head>
  <body class="mobile-support html" data-url="/cis580/c-parallax-scrolling/04-add-the-background/index.html">
    
    <div id="tele" class="tele mirror">
    
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      
      
      
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable c-parallax-scrolling" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="adding-the-background">Adding the Background</h1>

<p>Now that we have our <code>ParallaxLayer</code> class, let&rsquo;s add instances of it to our <code>Game1</code> class.</p>
<h2 id="the-background-layer">The Background Layer</h2>
<p>Let&rsquo;s start with the background layer.  First, we&rsquo;ll need to import our three texture, in our <code>LoadContent</code> method:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> backgroundTexture = Content.Load&lt;Texture2D&gt;(<span style="color:#e6db74">&#34;background&#34;</span>);</span></span></code></pre></div>
<p>Then we can create <code>StaticSprite</code> instance:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> backgroundSprite = <span style="color:#66d9ef">new</span> StaticSprite(backgroundTexture);</span></span></code></pre></div>
<p>And finally, create our <code>ParallaxLayer</code> instance:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> backgroundLayer = <span style="color:#66d9ef">new</span> ParallaxLayer(<span style="color:#66d9ef">this</span>);</span></span></code></pre></div>
<p>We&rsquo;ll add our sprite to it:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    backgroundLayer.Sprites.Add(backgroundSprite);</span></span></code></pre></div>
<p>And set its <code>DrawOrder</code>.  This property comes from the base class <code>DrawableGameComponent</code>, and is used to set the order game components are drawn in.  The lower numbers are drawn <em>first</em>, so we want our background to have a low number:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    backgroundLayer.DrawOrder = <span style="color:#ae81ff">0</span>;</span></span></code></pre></div>
<p>Finally, we need to add the layer to the <code>Game1.Components</code> list:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    Components.Add(backgroundLayer);</span></span></code></pre></div>
<p>By adding it to the list, we let the <code>Game1</code> instance take care of updating and rendering the <code>ParallaxLayer</code>.  If you run your code now, you should see the background:</p>
<p><a href="#R-image-2c03f71bfe2ee35667ffff3b6a45519d" class="lightbox-link"><img alt="Background Layer" class="border lazy lightbox figure-image" loading="lazy" src="/cis580/images/parallax-4.1.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-2c03f71bfe2ee35667ffff3b6a45519d"><img alt="Background Layer" class="border lazy lightbox lightbox-image" loading="lazy" src="/cis580/images/parallax-4.1.png"></a></p>
<p>But what has happened to our player helicopter?  Let&rsquo;s look at our <code>Game1.Draw</code> method:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">void</span> Draw(GameTime gameTime)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        GraphicsDevice.Clear(Color.CornflowerBlue);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// TODO: Add your drawing code here</span>
</span></span><span style="display:flex;"><span>        spriteBatch.Begin();
</span></span><span style="display:flex;"><span>        player.Draw(spriteBatch);
</span></span><span style="display:flex;"><span>        spriteBatch.End();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">base</span>.Draw(gameTime);
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div>
<p>Notice how we invoke the <code>base.Draw()</code> <em>after</em> we have drawn our player?  The game components in the <code>Game1.Components</code> list are drawn as part of that call, so the background is being drawn <em>after</em> our player.  We could fix this in a couple of ways.</p>
<p>One solution is to make the player a game componet as well, and set its <code>DrawOrder</code> to a larger number than the background, and add it to the <code>Game1.Components</code> list.</p>
<p>A second solution would be to make the <code>Player</code> class implement the <code>ISprite</code> interface, and add it to a <code>ParallaxLayer</code>.  Let&rsquo;s do this second approach, and create our foreground layer, next.</p>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
      
      
      
    </div>
    <script src="/cis580/js/clipboard/clipboard.min.js?1756153111" defer></script>
    <script src="/cis580/js/perfect-scrollbar/perfect-scrollbar.min.js?1756153111" defer></script>
    <script src="/cis580/js/theme.min.js?1756153111" defer></script>
      
      
      
    </div> 
  <script src="/cis580/js/tele-scroll.min.js?1756153111" defer></script>
  </body>
</html>
