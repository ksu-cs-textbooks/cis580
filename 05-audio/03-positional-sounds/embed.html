




	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.117.0">
    <meta name="generator" content="Relearn 5.18.0">
    <meta name="description" content="K-State CIS 580 Textbook">
    <meta name="author" content="Nathan H. Bean">
    <title>Positional Sounds :: K-State CIS 580 Textbook</title>
    <link href="https://ksu-cs-textbooks.github.io/cis580/05-audio/03-positional-sounds/index.html" rel="canonical" type="text/html" title="Positional Sounds :: K-State CIS 580 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis580/05-audio/03-positional-sounds/index.xml" rel="alternate" type="application/rss+xml" title="Positional Sounds :: K-State CIS 580 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis580/05-audio/03-positional-sounds/index.print.html" rel="alternate" type="text/html" title="Positional Sounds :: K-State CIS 580 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis580/05-audio/03-positional-sounds/tele.html" rel="alternate" type="text/html" title="Positional Sounds :: K-State CIS 580 Textbook">
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/fontawesome-all.min.css?1692031296" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis580/css/fontawesome-all.min.css?1692031296" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/nucleus.css?1692031296" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/auto-complete.css?1692031296" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis580/css/auto-complete.css?1692031296" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/perfect-scrollbar.min.css?1692031296" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/fonts.css?1692031296" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis580/css/fonts.css?1692031296" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/theme.css?1692031296" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/theme-auto.css?1692031296" rel="stylesheet" id="variant-style">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/variant.css?1692031296" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/print.css?1692031296" rel="stylesheet" media="print">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/ie.css?1692031296" rel="stylesheet">
    <script src="https://ksu-cs-textbooks.github.io/cis580/js/url.js?1692031296"></script>
    <script src="https://ksu-cs-textbooks.github.io/cis580/js/variant.js?1692031296"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      window.index_js_url="https://ksu-cs-textbooks.github.io/cis580/index.search.js";
      var root_url="https://ksu-cs-textbooks.github.io/cis580/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      window.T_No_results_found = 'No results found for \u0022{0}\u0022';
      window.T_N_results_found = '{1} results found for \u0022{0}\u0022';
      // some further base stuff
      var baseUriFull='https:\/\/ksu-cs-textbooks.github.io\/cis580/';
      window.variants && variants.init( [ 'auto', 'light-theme', 'dark-theme' ] );
    </script>
    
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/custom.css?1692031296" rel="stylesheet">

  </head>
  <body class="mobile-support embed disableInlineCopyToClipboard" data-url="https://ksu-cs-textbooks.github.io/cis580/05-audio/03-positional-sounds/embed.html">
    <div id="body" class="default-animation">
      
      
      
      <main id="body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
    
    
    
<p>Positional sounds provide the illusion of depth and movement by using panning, doppler shift, and other techniques to emulate the affect movement and distance have on sounds.  Positional sounds can convey important information in games, especially when combined with surround-sound speakers and headphones.</p>
<p>To create positional sound effects, we need to place the sound in a 3D (or pseudo 2D) soundscape, which incorporates both a <em>listener</em> (i.e. the player) and an <em>emitter</em> (the source of the sound).  Consider the example soundscape below:</p>
<p>
<a href="#image-948a93df65da384273b6f941cf7b81b6" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis580/images/5.3.1.png" alt="An example soundscape" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-948a93df65da384273b6f941cf7b81b6">
<img src="https://ksu-cs-textbooks.github.io/cis580/images/5.3.1.png" alt="An example soundscape" class="lightbox-image" loading="lazy">
</a></p>
<p>We have two sound effects, one played by <em>emitter A</em> and one by <em>emitter B</em>, and the player is represented by the <em>listener</em>.  If we imagine the listener is facing downwards, we would expect that the sound from emitter A will play more on the right speaker, and emitter B on the left (given stereo speakers).  For a surround sound system, these would be further distinguished by playing on the <em>front</em> speakers.</p>
<p>In addition to determining which speaker(s) a sound is played with, positional sounds also usually incorporate <em>attenuation</em> and <em>doppler effect</em>.</p>
<p><a href="https://en.wikipedia.org/wiki/Acoustic_attenuation" target="_blank">Attenuation</a>
 in this context means that sound waves get softer the farther they travel (as some of the energy in the wave is absorbed by the air as heat).  Thus, as emitter B is farther from the listener than emitter A, we would expect that if the same sound were played by both emitters, emitter B would be softer.</p>
<p><a href="https://en.wikipedia.org/wiki/Doppler_effect" target="_blank">Doppler effect</a>
 refers to the change in pitch of a sound when either the emitter or listener is moving.  When the distance between the emitter and listener  is getting smaller, the sound waves emitted by the emitter are closer together (higher frequency), resulting in a higher pitch.  And when they are moving apart, the waves are farther apart, resulting in a lower frequency and pitch.</p>

  
  
<div class="box notices cstyle info">
  <div class="box-label"><i class="fa-fw fas fa-info-circle"></i> Info</div>
  <div class="box-content">

<p>Position, attenuation, and doppler effect represent some of the easiest-to-implement aspects of the physics of sound, which is why they are commonly implemented in video game audio libraries.  More complex is the interaction of sound with the environment, i.e. absorption and reflection by surfaces in the game world. This parallels the early days of 3D rendering, when the Phong illumination model (which we&rsquo;ll talk about soon) provided a simplistic but adequate technique for handling lights in a 3D scene.</p>
</div>
</div>
<p>The MonoGame framework provides two classes for establishing positional sound, the <a href="https://docs.monogame.net/api/Microsoft.Xna.Framework.Audio.AudioEmitter.html" target="_blank"><code>AudioEmitter</code></a>
 and <a href="https://docs.monogame.net/api/Microsoft.Xna.Framework.Audio.AudioListener.html" target="_blank"><code>AudioListener</code></a>
.</p>
<h3 id="audiolistener-class">AudioListener Class</h3>
<p>The <code>AudioListener</code> class represents the player (or microphone) in the game world, and all position, attenuation, and doppler effects are calculated relative to its position, orientation, and velocity.  It exposes four properties:</p>
<ul>
<li><code>Position</code> is a <code>Vector3</code> defining the position of the listener in the game world</li>
<li><code>Forward</code> is a <code>Vector3</code> defining the direction the listener is facing in the game world.</li>
<li><code>Up</code> is a <code>Vector3</code> defining the direction <em>up</em> relative to the direction the player is facing (generally it would be <code>Vector3.Up</code>).  It is used as part of the 3D math calculating the effects.</li>
<li><code>Velocity</code> is a <code>Vector3</code> defining the velocity at which the listener is moving in the game world.</li>
</ul>
<p>When using an <code>AudioListener</code> instance, you would set these each update to reflect the corresponding position, orientation, and velocity of the player.</p>
<h3 id="audioemitter-class">AudioEmitter Class</h3>
<p>The <code>AudioEmitter</code> class represents the source of a sound in the game world.  It exposes the same properties as the <code>AudioListener</code>:</p>
<ul>
<li><code>Position</code> is a <code>Vector3</code> defining the position of the emitter in the game world</li>
<li><code>Forward</code> is a <code>Vector3</code> defining the direction the emitter is facing in the game world.</li>
<li><code>Up</code> is a <code>Vector3</code> defining the direction <em>up</em> relative to the direction the emitter is facing (generally it would be <code>Vector3.Up</code>).  It is used as part of the 3D math calculating the effects.</li>
<li><code>Velocity</code> is a <code>Vector3</code> defining the velocity at which the emitter is moving in the game world.</li>
</ul>
<h3 id="playing-positional-sound">Playing Positional Sound</h3>
<p>Positional sounds are played by a <code>SoundEffectInstance</code>, not by the actual emitter; the emitter rather serves to locate the sound source.  Thus, to calculate and apply the 3D effects on a sound effect we would use something like:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>SoundEffect sfx = Content.Load&lt;sfx&gt;(<span style="color:#e6db74">&#34;sound&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> instance = sfx.CreateInstance();
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> listener = <span style="color:#66d9ef">new</span> AudioListener();
</span></span><span style="display:flex;"><span><span style="color:#75715e">// TODO: Position and orient listener </span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> emitter = <span style="color:#66d9ef">new</span> AudioEmitter();
</span></span><span style="display:flex;"><span><span style="color:#75715e">// TODO: Position and orient emitter</span>
</span></span><span style="display:flex;"><span>instance.Apply3D(listener, emitter);</span></span></code></pre></div><h3 id="using-positional-sound-in-a-2d-game">Using Positional Sound in a 2D Game</h3>
<p>The positional sound support in MonoGame is for 3D soundscapes, but just as we can render 2D sprites using 3D hardware, we can create 2D soundscapes in 3D.  The easiest technique for this is to position all our emitters and listeners in the plane 
<span class="math align-center">$ z=0 $</span>.</p>
<p>The <code>Vector3</code> constructor actually has support for this built-in as it can take a <code>Vector2</code> for the <code>X</code> and <code>Y</code> components, and a separate scalar for the <code>Z</code> component.  Consider a game where we represent the player&rsquo;s position with a <code>Vector2 position</code>, direction with a <code>Vector2 direction</code>, and velocity with a <code>Vector2 velocity</code>.  We can update our <code>AudioListener listener</code> with:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">// Update listener properties</span>
</span></span><span style="display:flex;"><span>listener.Position = <span style="color:#66d9ef">new</span> Vector3(position, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>listener.Forward = <span style="color:#66d9ef">new</span> Vector3(direction, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>listener.Velocity = <span style="color:#66d9ef">new</span> Vector3(velocity, <span style="color:#ae81ff">0</span>);</span></span></code></pre></div><p>Since the <code>Up</code> vector will never change, we can just set it to <code>Vector3.UnitZ</code> (which is the vector 
<span class="math align-center">$ <0,0,1> $</span>) when we first create the listener.</p>
<p>The emitters would be set up the same way.</p>

            <footer class="footline">

            </footer>
          </article>
        </div>
      </main>
    </div>
    
    
    
    <script src="https://ksu-cs-textbooks.github.io/cis580/js/clipboard.min.js?1692031296" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis580/js/perfect-scrollbar.min.js?1692031296" defer></script>
    <script>
      function useMathJax( config ){
        if( !Object.assign ){
          
          return;
        }
        window.MathJax = Object.assign( window.MathJax || {}, {
          loader: {
            load: ['[tex]/mhchem']
          },
          startup: {
            elements: [
              '.math'
            ]
          },
          tex: {
            inlineMath: [
              ['$', '$'], 
              ['\\(', '\\)']
            ]
          },
          options: {
            enableMenu: false 
          }
        }, config );
      }
      useMathJax( JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="https://ksu-cs-textbooks.github.io/cis580/js/mathjax/tex-mml-chtml.js?1692031296"></script>
    <script src="https://ksu-cs-textbooks.github.io/cis580/js/theme.js?1692031296" defer></script>
  </body>
</html>
