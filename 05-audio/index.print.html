<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="print">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.128.0">
    <meta name="generator" content="Relearn 8.0.0">
    <meta name="description" content="Chapter 5 Audio Get your games rocking!">
    <meta name="author" content="Nathan H. Bean">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://textbooks.cs.ksu.edu/cis580/images/hero.png">
    <meta name="twitter:title" content="Audio :: K-State CIS 580 Textbook">
    <meta name="twitter:description" content="Chapter 5 Audio Get your games rocking!">
    <meta property="og:url" content="https://textbooks.cs.ksu.edu/cis580/05-audio/index.html">
    <meta property="og:site_name" content="K-State CIS 580 Textbook">
    <meta property="og:title" content="Audio :: K-State CIS 580 Textbook">
    <meta property="og:description" content="Chapter 5 Audio Get your games rocking!">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://textbooks.cs.ksu.edu/cis580/images/hero.png">
    <meta itemprop="name" content="Audio :: K-State CIS 580 Textbook">
    <meta itemprop="description" content="Chapter 5 Audio Get your games rocking!">
    <meta itemprop="datePublished" content="2018-08-24T10:53:05-05:00">
    <meta itemprop="dateModified" content="2023-08-11T11:18:05-05:00">
    <meta itemprop="wordCount" content="7">
    <meta itemprop="image" content="https://textbooks.cs.ksu.edu/cis580/images/hero.png">
    <title>Audio :: K-State CIS 580 Textbook</title>
    <link href="https://textbooks.cs.ksu.edu/cis580/05-audio/index.html" rel="canonical" type="text/html" title="Audio :: K-State CIS 580 Textbook">
    <link href="/cis580/05-audio/index.xml" rel="alternate" type="application/rss+xml" title="Audio :: K-State CIS 580 Textbook">
    <link href="/cis580/05-audio/tele.html" rel="alternate" type="text/html" title="Audio :: K-State CIS 580 Textbook">
    <link href="/cis580/05-audio/embed.html" rel="alternate" type="text/html" title="Audio :: K-State CIS 580 Textbook">
    <link href="/cis580/css/auto-complete/auto-complete.min.css?1755628803" rel="stylesheet">
    <script src="/cis580/js/auto-complete/auto-complete.min.js?1755628803" defer></script>
    <script src="/cis580/js/search-lunr.min.js?1755628803" defer></script>
    <script src="/cis580/js/search.min.js?1755628803" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/cis580/searchindex.en.js?1755628803";
    </script>
    <script src="/cis580/js/lunr/lunr.min.js?1755628803" defer></script>
    <script src="/cis580/js/lunr/lunr.stemmer.support.min.js?1755628803" defer></script>
    <script src="/cis580/js/lunr/lunr.multi.min.js?1755628803" defer></script>
    <script src="/cis580/js/lunr/lunr.en.min.js?1755628803" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/cis580/fonts/fontawesome/css/fontawesome-all.min.css?1755628803" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cis580/fonts/fontawesome/css/fontawesome-all.min.css?1755628803" rel="stylesheet"></noscript>
    <link href="/cis580/css/perfect-scrollbar/perfect-scrollbar.min.css?1755628803" rel="stylesheet">
    <link href="/cis580/css/theme.min.css?1755628803" rel="stylesheet">
    <link href="/cis580/css/format-print.min.css?1755628803" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/05-audio\/index.html';
      window.relearn.relBasePath='..';
      window.relearn.relBaseUri='..\/..';
      window.relearn.absBaseUri='https:\/\/textbooks.cs.ksu.edu\/cis580';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=true;
      window.relearn.enableBlockCodeWrap=false;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      // variant stuff
      window.relearn.themevariants = [ 'light-theme' ];
      window.relearn.customvariantname = "my-custom-variant";
      // [x] russfeld
      window.relearn.writeVariant=false;
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          
          if (window.relearn.writeVariant) {
            window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
          }
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
    <link href="/cis580/css/custom.css?1755628803" rel="stylesheet">
  </head>
  <body class="mobile-support print" data-url="/cis580/05-audio/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#chapter-5">Chapter 5</a></li>
      </ul>
    </li>
  </ul>
</nav>
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class="a11y-only"><a itemprop="item" href="/cis580/index.html"><span itemprop="name">CIS 580: Foundations of Game Programming</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><span itemprop="name">Audio</span><meta itemprop="position" content="2"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-edit" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show"><a class="topbar-control" href="https://github.com/ksu-cs-textbooks/cis580/edit/master/content/05-audio/_index.md" rel="external" target="_blank" title="Edit (CTRL+ALT+w)"><i class="fa-fw fas fa-pen"></i></a>
            </div>
            <div class="topbar-button topbar-button-print" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/cis580/05-audio/index.print.html" title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a>
            </div>
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/cis580/04-collisions/07-summary/index.html" title="Summary (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/cis580/05-audio/01-introduction/index.html" title="Introduction (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
            <div class="topbar-button topbar-button-embed" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/cis580/05-audio/embed.html" title="Embeddable Version"><i class="fa-fw fas fa-expand-arrows-alt"></i></a>
            </div>
            <div class="topbar-button topbar-button-tele" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/cis580/05-audio/tele.html" title="Teleprompter View"><i class="fa-fw fas fa-tv"></i></a>
            </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable 05-audio" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="audio">Audio</h1>

<h3 id="chapter-5">Chapter 5</h3>
<h1 id="audio">Audio</h1>
<p>Get your games rocking!</p>
<img src="https://media.giphy.com/media/ahqXZjdmep0Zy/giphy.gif">
  <footer class="footline">
  </footer>
</article>
          <section>
            <h1 class="a11y-only">Subsections of Audio</h1>
<article class="default">
  <header class="headline">
  </header>

<h1 id="introduction">Introduction</h1>

<p>We often focus on the <em>visual</em> aspects of games, but the <em>audio</em> aspects can really make a game shine.  Consider that many game tracks are now presented as orchestral performances:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/DgslU4EKKHY" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<iframe width="560" height="315" src="https://www.youtube.com/embed/nOJi5QSxJbw" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>And how important sound effects can be for conveying what is happening in a game?</p>
<p>In this chapter, we will explore both sound effects and music, and how to implement them within MonoGame.</p>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="sound-effects">Sound Effects</h1>

<p>From the &ldquo;bing&rdquo; of a coin box in <em>Super Mario Bros</em> to the reveal chimes of the <em>Zelda</em> series, sound effects provide a powerful mechanism for informing the player of what is happening in your game world.</p>
<h3 id="soundeffect-class">SoundEffect Class</h3>
<p>MonoGame represents sound effects with the <a href="https://docs.monogame.net/api/Microsoft.Xna.Framework.Audio.SoundEffect.html" rel="external" target="_blank"><code>SoundEffect</code></a> class.  Like other asset types, we don&rsquo;t normally construct this directly, we rather load it through the content pipeline.  Usually, a sound effect will start as a <em>.wav</em> file, though a handful of other file formats are acceptable.</p>
<p>Once loaded, the <code>SoundEffect</code> can be played with the <code>SoundEffect.Play()</code> method. This is essentially a fire-and-forget method - you invoke, it and the framework takes care of loading and playing the sound.</p>
<p>You can also use the <code>SoundEffect.Play(float volume, float pitch, float pan)</code> to customize the playback:</p>
<ul>
<li><code>volume</code> ranges from <span class="math align-center">$ 0.0 $</span> (silence) to <span class="math align-center">$ 1.0 $</span> (full volume)</li>
<li><code>pitch</code> adjusts the pitch from <span class="math align-center">$ -1.0 $</span> (down an octave) to <span class="math align-center">$ 1.0 $</span> (up an octave), with <span class="math align-center">$ 0.0 $</span> indicating no change</li>
<li><code>pan</code> pans the sound in stereo, with <span class="math align-center">$ -1.0 $</span> entirely on the left speaker, and <span class="math align-center">$ 1.0 $</span> on the right, and <span class="math align-center">$ 0.0 $</span> centered.</li>
</ul>
<p>Note that the per-sound-effect volume is multiplied by the static <code>SoundEffect.MasterVolume</code> property. This allows for the adjustment of <em>all</em> sound effects in the game, separate from music.</p>

<details open class=" box cstyle notices warning">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-exclamation-triangle"></i> 
    Warning
  </summary>
  <div class="box-content">
<p>Note that if you invoke <code>Play()</code> on a sound effect multiple frames in a row, it will start playing another copy of the sound effect on each frame.  <em>The result will be an ugly mash of sound</em>.  So be sure that you only invoke <code>Play()</code> <em>once</em> per each time you want to use the sound!</p>
  </div>
</details>
<h3 id="soundeffectinstance-class">SoundEffectInstance Class</h3>
<p>If you need finer control of your sound effects, you can also create a <a href="https://docs.monogame.net/api/Microsoft.Xna.Framework.Audio.SoundEffectInstance.html" rel="external" target="_blank"><code>SoundEffectInstance</code></a> from one with: <code>SoundEffect.CreateInstance()</code>.  This represents a single <em>instance</em> of a sound effect, so invoking its <code>Play()</code> method will restart the sound from the beginning (essentially, <code>SoundEffect.Play()</code> creates a <code>SoundEffectInstance</code> that plays and disposes of itself automatically).</p>
<p>The <code>SoundEffectInstance</code> exposes properties that can be used to modify its behavior:</p>
<ul>
<li><code>IsLooped</code> is a boolean that when set to true, causes the sound effect to loop indefinitely.</li>
<li><code>Pan</code> pans the sound in stereo, with <span class="math align-center">$ -1.0 $</span> entirely on the left speaker, and <span class="math align-center">$ 1.0 $</span> on the right, and <span class="math align-center">$ 0.0 $</span> centered.</li>
<li><code>Pitch</code> adjusts the pitch from <span class="math align-center">$ -1.0 $</span> (down an octave) to <span class="math align-center">$ 1.0 $</span> (up an octave), with <span class="math align-center">$ 0.0 $</span> indicating no change</li>
<li><code>Volume</code> ranges from <span class="math align-center">$ 0.0 $</span> (silence) to <span class="math align-center">$ 1.0 $</span> (full volume)</li>
<li><code>State</code> returns a <code>SoundState</code> enumeration value, one of (<code>SoundState.Paused</code>, <code>SoundState.Playing</code>, or <code>SoundState.Stopped</code>)</li>
</ul>
<p>The <code>SoundEffectInstance</code> also provides a number of methods:</p>
<ul>
<li><code>Play()</code> plays or resumes the sound effect</li>
<li><code>Pause()</code> pauses the sound effect</li>
<li><code>Resume()</code> resumes a paused sound effect</li>
<li><code>Stop()</code> immediately stops the sound effect (so when started it starts from the beginning)</li>
<li><code>Stop(bool immediate)</code> also stops the sound effect, immediately if <code>true</code>, or its authored release phase, i.e. a fade, if <code>false</code></li>
</ul>
<p>Perhaps the strongest reason for creating a <code>SoundEffectInstance</code> is to be able to crate positional sound.  We&rsquo;ll discuss this next.</p>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="positional-sounds">Positional Sounds</h1>

<p>Positional sounds provide the illusion of depth and movement by using panning, doppler shift, and other techniques to emulate the affect movement and distance have on sounds.  Positional sounds can convey important information in games, especially when combined with surround-sound speakers and headphones.</p>
<p>To create positional sound effects, we need to place the sound in a 3D (or pseudo 2D) soundscape, which incorporates both a <em>listener</em> (i.e. the player) and an <em>emitter</em> (the source of the sound).  Consider the example soundscape below:</p>
<p><a href="#R-image-430adbb18281120e0dea15b61807dc5d" class="lightbox-link"><img alt="An example soundscape" class="border lazy lightbox figure-image" loading="lazy" src="/cis580/images/5.3.1.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-430adbb18281120e0dea15b61807dc5d"><img alt="An example soundscape" class="border lazy lightbox lightbox-image" loading="lazy" src="/cis580/images/5.3.1.png"></a></p>
<p>We have two sound effects, one played by <em>emitter A</em> and one by <em>emitter B</em>, and the player is represented by the <em>listener</em>.  If we imagine the listener is facing downwards, we would expect that the sound from emitter A will play more on the right speaker, and emitter B on the left (given stereo speakers).  For a surround sound system, these would be further distinguished by playing on the <em>front</em> speakers.</p>
<p>In addition to determining which speaker(s) a sound is played with, positional sounds also usually incorporate <em>attenuation</em> and <em>doppler effect</em>.</p>
<p><a href="https://en.wikipedia.org/wiki/Acoustic_attenuation" rel="external" target="_blank">Attenuation</a> in this context means that sound waves get softer the farther they travel (as some of the energy in the wave is absorbed by the air as heat).  Thus, as emitter B is farther from the listener than emitter A, we would expect that if the same sound were played by both emitters, emitter B would be softer.</p>
<p><a href="https://en.wikipedia.org/wiki/Doppler_effect" rel="external" target="_blank">Doppler effect</a> refers to the change in pitch of a sound when either the emitter or listener is moving.  When the distance between the emitter and listener  is getting smaller, the sound waves emitted by the emitter are closer together (higher frequency), resulting in a higher pitch.  And when they are moving apart, the waves are farther apart, resulting in a lower frequency and pitch.</p>

<details open class=" box cstyle notices info">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-info-circle"></i> 
    Info
  </summary>
  <div class="box-content">
<p>Position, attenuation, and doppler effect represent some of the easiest-to-implement aspects of the physics of sound, which is why they are commonly implemented in video game audio libraries.  More complex is the interaction of sound with the environment, i.e. absorption and reflection by surfaces in the game world. This parallels the early days of 3D rendering, when the Phong illumination model (which we&rsquo;ll talk about soon) provided a simplistic but adequate technique for handling lights in a 3D scene.</p>
  </div>
</details>
<p>The MonoGame framework provides two classes for establishing positional sound, the <a href="https://docs.monogame.net/api/Microsoft.Xna.Framework.Audio.AudioEmitter.html" rel="external" target="_blank"><code>AudioEmitter</code></a> and <a href="https://docs.monogame.net/api/Microsoft.Xna.Framework.Audio.AudioListener.html" rel="external" target="_blank"><code>AudioListener</code></a>.</p>
<h3 id="audiolistener-class">AudioListener Class</h3>
<p>The <code>AudioListener</code> class represents the player (or microphone) in the game world, and all position, attenuation, and doppler effects are calculated relative to its position, orientation, and velocity.  It exposes four properties:</p>
<ul>
<li><code>Position</code> is a <code>Vector3</code> defining the position of the listener in the game world</li>
<li><code>Forward</code> is a <code>Vector3</code> defining the direction the listener is facing in the game world.</li>
<li><code>Up</code> is a <code>Vector3</code> defining the direction <em>up</em> relative to the direction the player is facing (generally it would be <code>Vector3.Up</code>).  It is used as part of the 3D math calculating the effects.</li>
<li><code>Velocity</code> is a <code>Vector3</code> defining the velocity at which the listener is moving in the game world.</li>
</ul>
<p>When using an <code>AudioListener</code> instance, you would set these each update to reflect the corresponding position, orientation, and velocity of the player.</p>
<h3 id="audioemitter-class">AudioEmitter Class</h3>
<p>The <code>AudioEmitter</code> class represents the source of a sound in the game world.  It exposes the same properties as the <code>AudioListener</code>:</p>
<ul>
<li><code>Position</code> is a <code>Vector3</code> defining the position of the emitter in the game world</li>
<li><code>Forward</code> is a <code>Vector3</code> defining the direction the emitter is facing in the game world.</li>
<li><code>Up</code> is a <code>Vector3</code> defining the direction <em>up</em> relative to the direction the emitter is facing (generally it would be <code>Vector3.Up</code>).  It is used as part of the 3D math calculating the effects.</li>
<li><code>Velocity</code> is a <code>Vector3</code> defining the velocity at which the emitter is moving in the game world.</li>
</ul>
<h3 id="playing-positional-sound">Playing Positional Sound</h3>
<p>Positional sounds are played by a <code>SoundEffectInstance</code>, not by the actual emitter; the emitter rather serves to locate the sound source.  Thus, to calculate and apply the 3D effects on a sound effect we would use something like:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>SoundEffect sfx = Content.Load&lt;sfx&gt;(<span style="color:#e6db74">&#34;sound&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> instance = sfx.CreateInstance();
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> listener = <span style="color:#66d9ef">new</span> AudioListener();
</span></span><span style="display:flex;"><span><span style="color:#75715e">// TODO: Position and orient listener </span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> emitter = <span style="color:#66d9ef">new</span> AudioEmitter();
</span></span><span style="display:flex;"><span><span style="color:#75715e">// TODO: Position and orient emitter</span>
</span></span><span style="display:flex;"><span>instance.Apply3D(listener, emitter);</span></span></code></pre></div>
<h3 id="using-positional-sound-in-a-2d-game">Using Positional Sound in a 2D Game</h3>
<p>The positional sound support in MonoGame is for 3D soundscapes, but just as we can render 2D sprites using 3D hardware, we can create 2D soundscapes in 3D.  The easiest technique for this is to position all our emitters and listeners in the plane <span class="math align-center">$ z=0 $</span>.</p>
<p>The <code>Vector3</code> constructor actually has support for this built-in as it can take a <code>Vector2</code> for the <code>X</code> and <code>Y</code> components, and a separate scalar for the <code>Z</code> component.  Consider a game where we represent the player&rsquo;s position with a <code>Vector2 position</code>, direction with a <code>Vector2 direction</code>, and velocity with a <code>Vector2 velocity</code>.  We can update our <code>AudioListener listener</code> with:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">// Update listener properties</span>
</span></span><span style="display:flex;"><span>listener.Position = <span style="color:#66d9ef">new</span> Vector3(position, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>listener.Forward = <span style="color:#66d9ef">new</span> Vector3(direction, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>listener.Velocity = <span style="color:#66d9ef">new</span> Vector3(velocity, <span style="color:#ae81ff">0</span>);</span></span></code></pre></div>
<p>Since the <code>Up</code> vector will never change, we can just set it to <code>Vector3.UnitZ</code> (which is the vector <span class="math align-center">$ <0,0,1> $</span>) when we first create the listener.</p>
<p>The emitters would be set up the same way.</p>

  <footer class="footline">
  </footer>
</article>
<article class="default">
  <header class="headline">
  </header>

<h1 id="music">Music</h1>

<p>Music also has a powerful role to play in setting the mood.  It can also be used to convey information to the player, as <em>Super Mario Bros</em> does when the remaining time to finish the level falls below 1 minute.</p>
<h3 id="song-class">Song Class</h3>
<p>While it is possible to play music using a <code>SoundEffect</code>,
MonoGame supports music through the <a href="https://docs.monogame.net/api/Microsoft.Xna.Framework.Media.Song.html" rel="external" target="_blank"><code>Song</code></a> class.  This represents a song loaded from a wav or mp4 file.</p>
<p>In addition to the audio data, the <code>Song</code> defines properties for accessing the audio file&rsquo;s metadata:</p>
<ul>
<li><code>Name</code> is the name of the song</li>
<li><code>Album</code> is the album the song is from</li>
<li><code>Artist</code> is the song&rsquo;s artist</li>
<li><code>Duration</code> is the length of the song.</li>
<li><code>Genre</code> is the genre of the song</li>
<li><code>TrackNumber</code> is song&rsquo;s track number on its album</li>
</ul>
<p>Note that for these properties to be populated, the original audio file would need to have the corresponding metadata set.</p>
<p>Unlike the <code>SoundEffect</code>, the <code>Song</code> class does not have a play method.  Instead it is played with the static <a href="https://docs.monogame.net/api/Microsoft.Xna.Framework.Media.MediaPlayer.html" rel="external" target="_blank"><code>MediaPlayer</code></a> class, i.e.:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Song song = Content.Load&lt;Song&gt;(<span style="color:#e6db74">&#34;mysong&#34;</span>);
</span></span><span style="display:flex;"><span>MediaPlayer.Play(song);</span></span></code></pre></div>
<h3 id="songcollection-class">SongCollection Class</h3>
<p>Invoking <code>MediaPlayer.Play()</code> will <em>immediately end the current song</em>, so if you want your game to transition between songs smoothly, you&rsquo;ll probably want to use the <a href="https://docs.monogame.net/api/Microsoft.Xna.Framework.Media.SongCollection.html" rel="external" target="_blank"><code>SongCollection</code></a> class.</p>
<p>As you might expect, this is a collection of <code>Song</code> objects, and implements methods:</p>
<ul>
<li><code>Add(Song song)</code> adds a song to the collection</li>
<li><code>Clear()</code> clears the collection.</li>
</ul>
<p><code>SongCollections</code> can also be played with the static <code>MediaPlayer.Play(SongCollection collection)</code> method:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>Song song1 = Content.Load&lt;Song&gt;(<span style="color:#e6db74">&#34;song1&#34;</span>);
</span></span><span style="display:flex;"><span>Song song2 = Content.Load&lt;Song&gt;(<span style="color:#e6db74">&#34;song2&#34;</span>);
</span></span><span style="display:flex;"><span>Song song3 = Content.Load&lt;Song&gt;(<span style="color:#e6db74">&#34;song3&#34;</span>);
</span></span><span style="display:flex;"><span>SongCollection songCollection = <span style="color:#66d9ef">new</span> SongCollection();
</span></span><span style="display:flex;"><span>songCollection.Add(song1);
</span></span><span style="display:flex;"><span>songCollection.Add(song2);
</span></span><span style="display:flex;"><span>songCollection.Add(song3);
</span></span><span style="display:flex;"><span>MediaPlayer.Play(songCollection);</span></span></code></pre></div>
<h3 id="the-mediaplayer-class">The MediaPlayer Class</h3>
<p>The static <code>MediaPlayer</code> class is really an interface to the Windows Media Player.  Unlike the <code>SoundEffect</code> class, which communicates directly with the sound card and manipulates audio buffers, songs are piped through the Windows Media Player.  Hence, the reason <code>MediaPlayer</code> can only play a single song at a time.</p>
<p>Some of the most useful properties of the <code>MediaPlayer</code> for games are:</p>
<ul>
<li><code>IsMuted</code> - A boolean property that can be used to mute or unmute the game&rsquo;s music</li>
<li><code>Volume</code> - A number between 0 (silent) and 1 (full volume) that the music will play at</li>
<li><code>IsRepeating</code> - A boolean property that determines if the song or song list should repeat</li>
<li><code>IsShuffled</code> - A boolean property that determines if a song list should be played in a shuffled order</li>
<li><code>State</code> - A value of the <a href="https://docs.monogame.net/api/Microsoft.Xna.Framework.Media.MediaState.html" rel="external" target="_blank"><code>MediaState</code></a> enum, describing the current state of the media player, which can be <code>MediaState.Paused</code>, <code>MediaState.Playing</code>, or <code>MediaState.Stopped</code>.</li>
</ul>
<p>Much like you would expect from a media playing device, the <code>MediaPlayer</code> also implements some familiar controls as methods:</p>
<ul>
<li><code>Play(Song song)</code> and <code>Play(SongList songList)</code> play the specified song or song list.</li>
<li><code>Pause()</code> pauses the currently playing song</li>
<li><code>Resume()</code> resumes a paused song</li>
<li><code>Stop()</code> stops playing the current song</li>
<li><code>MoveNext()</code> moves to the next song in the song list</li>
<li><code>MovePrevious()</code> moves to the previous song in the song list</li>
</ul>
<p>In addition, the <code>MediaPlayer</code> implements two events that may be useful:</p>
<ul>
<li><code>ActiveSongChanged</code> - triggered when the active song changes</li>
<li><code>MediaStateChanged</code> - triggered when the media state changes</li>
</ul>

<details open class=" box cstyle notices info">
  <summary class="box-label" tabindex="-1">
    <i class="fa-fw fas fa-info-circle"></i> 
    Info
  </summary>
  <div class="box-content">
<p>This section only touches on the classes, methods and properties of the <code>Microsoft.Xna.Framework.Media</code> namespace most commonly used in games.  Because it is a wrapper around the Windows Media Player, it is also possible to access and play the users&rsquo; songs and playlists that have been added to Windows Media Player.  Refer to the MonoGame documentation for more details.</p>
  </div>
</details>

  <footer class="footline">
  </footer>
</article>
          </section>
        </div>
      </main>
<div class="git-footer">
  <p class="theme-version-footer">8.0.0</p>
<p>Last modified by:
              <i class='fa-fw fas fa-user'></i> Russell Feldhausen
              <i class='fas fa-calendar'></i> <a href="https://github.com/ksu-cs-textbooks/cis580/commit/43f194969a638fa4572819da4b31060ad574a9ce">Aug 11, 2023</a>
</p>

</div>
    </div>
    <script>
      window.MathJax = Object.assign( window.MathJax || {}, {
        tex: {
          inlineMath:  [['\\(', '\\)'], ['$',  '$']],  
          displayMath: [['\\[', '\\]'], ['$$', '$$']], 
        },
        options: {
          enableMenu: false 
        }
      }, JSON.parse("{}") );
    </script>
    <script id="MathJax-script" async src="/cis580/js/mathjax/tex-mml-chtml.js?1755628803"></script>
    <script src="/cis580/js/clipboard/clipboard.min.js?1755628803" defer></script>
    <script src="/cis580/js/perfect-scrollbar/perfect-scrollbar.min.js?1755628803" defer></script>
    <script src="/cis580/js/theme.min.js?1755628803" defer></script>
  </body>
</html>
