




  
	
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.128.0">
    <meta name="generator" content="Relearn 6.0.0">
    <meta name="description" content="While the point of a TriangleStrip is to optimize by reducing the number of vertices, in most cases it still will have repeats, and it is difficult to define a complex mesh out of a single strip. Thus, in addition to vertices, we can provide indices to specific vertices. The collection of indices contains nothing more than integers referencing vertices in the vertices collection. This means each unique vertex needs to be defined exactly once, and the indices take on the role of defining the triangles by giving the position of each successive vertex in the triangle list in the vertex array.">
    <meta name="author" content="Nathan Bean">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Rendering a Textured Quad :: K-State CIS 580 Textbook">
    <meta name="twitter:description" content="While the point of a TriangleStrip is to optimize by reducing the number of vertices, in most cases it still will have repeats, and it is difficult to define a complex mesh out of a single strip. Thus, in addition to vertices, we can provide indices to specific vertices. The collection of indices contains nothing more than integers referencing vertices in the vertices collection. This means each unique vertex needs to be defined exactly once, and the indices take on the role of defining the triangles by giving the position of each successive vertex in the triangle list in the vertex array.">
    <meta property="og:url" content="https://textbooks.cs.ksu.edu/cis580/13-basic-3d-rendering/03-rendering-a-textured-quad/">
    <meta property="og:site_name" content="K-State CIS 580 Textbook">
    <meta property="og:title" content="Rendering a Textured Quad :: K-State CIS 580 Textbook">
    <meta property="og:description" content="While the point of a TriangleStrip is to optimize by reducing the number of vertices, in most cases it still will have repeats, and it is difficult to define a complex mesh out of a single strip. Thus, in addition to vertices, we can provide indices to specific vertices. The collection of indices contains nothing more than integers referencing vertices in the vertices collection. This means each unique vertex needs to be defined exactly once, and the indices take on the role of defining the triangles by giving the position of each successive vertex in the triangle list in the vertex array.">
    <meta property="og:locale" content="en-us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Basic 3D Rendering">
    <meta property="article:published_time" content="2020-03-24T10:00:00-05:00">
    <meta property="article:modified_time" content="2023-08-11T11:18:05-05:00">
    <meta itemprop="name" content="Rendering a Textured Quad :: K-State CIS 580 Textbook">
    <meta itemprop="description" content="While the point of a TriangleStrip is to optimize by reducing the number of vertices, in most cases it still will have repeats, and it is difficult to define a complex mesh out of a single strip. Thus, in addition to vertices, we can provide indices to specific vertices. The collection of indices contains nothing more than integers referencing vertices in the vertices collection. This means each unique vertex needs to be defined exactly once, and the indices take on the role of defining the triangles by giving the position of each successive vertex in the triangle list in the vertex array.">
    <meta itemprop="datePublished" content="2020-03-24T10:00:00-05:00">
    <meta itemprop="dateModified" content="2023-08-11T11:18:05-05:00">
    <meta itemprop="wordCount" content="1168">
    <title>Rendering a Textured Quad :: K-State CIS 580 Textbook</title>
    <link href="https://textbooks.cs.ksu.edu/cis580/13-basic-3d-rendering/03-rendering-a-textured-quad/" rel="canonical" type="text/html" title="Rendering a Textured Quad :: K-State CIS 580 Textbook">
    <link href="/cis580/13-basic-3d-rendering/03-rendering-a-textured-quad/index.xml" rel="alternate" type="application/rss+xml" title="Rendering a Textured Quad :: K-State CIS 580 Textbook">
    <link href="/cis580/13-basic-3d-rendering/03-rendering-a-textured-quad/tele.html" rel="alternate" type="text/html" title="Rendering a Textured Quad :: K-State CIS 580 Textbook">
    <link href="/cis580/13-basic-3d-rendering/03-rendering-a-textured-quad/embed.html" rel="alternate" type="text/html" title="Rendering a Textured Quad :: K-State CIS 580 Textbook">
    <link href="/cis580/css/fontawesome-all.min.css?1719519539" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cis580/css/fontawesome-all.min.css?1719519539" rel="stylesheet"></noscript>
    <link href="/cis580/css/nucleus.css?1719519539" rel="stylesheet">
    <link href="/cis580/css/auto-complete.css?1719519539" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cis580/css/auto-complete.css?1719519539" rel="stylesheet"></noscript>
    <link href="/cis580/css/perfect-scrollbar.min.css?1719519539" rel="stylesheet">
    <link href="/cis580/css/fonts.css?1719519539" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cis580/css/fonts.css?1719519539" rel="stylesheet"></noscript>
    <link href="/cis580/css/theme.css?1719519539" rel="stylesheet">
    <link href="/cis580/css/theme-auto.css?1719519539" rel="stylesheet" id="R-variant-style">
    <link href="/cis580/css/chroma-auto.css?1719519539" rel="stylesheet" id="R-variant-chroma-style">
    <link href="/cis580/css/variant.css?1719519539" rel="stylesheet">
    <link href="/cis580/css/print.css?1719519539" rel="stylesheet" media="print">
    <link href="/cis580/css/format-print.css?1719519539" rel="stylesheet">
    <script src="/cis580/js/variant.js?1719519539"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='https:\/\/textbooks.cs.ksu.edu\/cis580';
      window.index_js_url="/cis580/index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'auto', 'light-theme', 'dark-theme' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
    
    <link href="/cis580/css/custom.css?1719519539" rel="stylesheet">
  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="/cis580/13-basic-3d-rendering/03-rendering-a-textured-quad/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="/cis580/13-basic-3d-rendering/"><span itemprop="name">Basic 3D Rendering</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Rendering a Textured Quad</span><meta itemprop="position" content="2"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/cis580/13-basic-3d-rendering/02-it-starts-with-triangles/" title="It Starts with Triangles (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/cis580/13-basic-3d-rendering/04-rendering-a-cube/" title="Rendering a Cube (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id="rendering-a-textured-quad">Rendering a Textured Quad</h1>

<p>While the point of a <code>TriangleStrip</code> is to optimize by reducing the number of vertices, in most cases it still will have repeats, and it is difficult to define a complex mesh out of a single strip.  Thus, in addition to vertices, we can provide <em>indices</em> to specific vertices.  The collection of indices contains nothing more than integers referencing vertices in the vertices collection.  This means each unique vertex needs to be defined exactly once, and the indices take on the role of defining the triangles by giving the position of each successive vertex in the triangle list in the vertex array.</p>
<h2 id="defining-a-textured-quad">Defining a Textured Quad</h2>
<p>Let&rsquo;s give this a try by defining a <code>Quad</code> class with both vertices and indices:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl"><span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cs">/// A class representing a quad (a rectangle composed of two triangles)</span>
</span></span><span class="line"><span class="cl"><span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="k">class</span> <span class="nc">Quad</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// The vertices of the quad</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">VertexPositionTexture</span><span class="p">[]</span> <span class="n">vertices</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// The vertex indices of the quad</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">short</span><span class="p">[]</span> <span class="n">indices</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// The effect to use rendering the triangle</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">BasicEffect</span> <span class="n">effect</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// The game this cube belongs to </span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Game</span> <span class="n">game</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div><p>You will note that instead of our vertex structure being a <code>VertexPositionColor</code>, this time we&rsquo;re using <code>VertexPositionTexture</code>.  Instead of giving each vertex a color, this time we&rsquo;ll be giving it a texture coordinate, and having our <code>effect</code> apply a texture to the face of the quad.</p>
<p>Note also that we use the <code>short</code> data type for our index array.  As a quad has only four vertices (one in each corner), we only need four vertices to define one.  If our vertices start at index 0, that means we only need to represent indices 1-4, so a short is more than sufficient.  With a larger vertex array, we might need to use a larger type of integer.</p>
<h3 id="defining-the-vertices">Defining the Vertices</h3>
<p>As with our triangle, we&rsquo;ll initialize our vertices in a helper method, <code>InitializeVertices</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl">    <span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// Initializes the vertices of our quad</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="k">void</span> <span class="n">InitializeVertices</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">vertices</span> <span class="p">=</span> <span class="k">new</span> <span class="n">VertexPositionTexture</span><span class="p">[</span><span class="m">4</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Define vertex 0 (top left)</span>
</span></span><span class="line"><span class="cl">        <span class="n">vertices</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">Position</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(-</span><span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">vertices</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">TextureCoordinate</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector2</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="p">-</span><span class="m">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Define vertex 1 (top right)</span>
</span></span><span class="line"><span class="cl">        <span class="n">vertices</span><span class="p">[</span><span class="m">1</span><span class="p">].</span><span class="n">Position</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">vertices</span><span class="p">[</span><span class="m">1</span><span class="p">].</span><span class="n">TextureCoordinate</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector2</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="p">-</span><span class="m">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// define vertex 2 (bottom right)</span>
</span></span><span class="line"><span class="cl">        <span class="n">vertices</span><span class="p">[</span><span class="m">2</span><span class="p">].</span><span class="n">Position</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="p">-</span><span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">vertices</span><span class="p">[</span><span class="m">2</span><span class="p">].</span><span class="n">TextureCoordinate</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector2</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// define vertex 3 (bottom left) </span>
</span></span><span class="line"><span class="cl">        <span class="n">vertices</span><span class="p">[</span><span class="m">3</span><span class="p">].</span><span class="n">Position</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(-</span><span class="m">1</span><span class="p">,</span> <span class="p">-</span><span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">vertices</span><span class="p">[</span><span class="m">3</span><span class="p">].</span><span class="n">TextureCoordinate</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector2</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span></span></span></code></pre></div><p>The quad is two by two, centered on the origin.  The texture coordinates are expressed as floats that fall in the range [0 &hellip; 1].  The texture coordinate (0,0) is the upper-left hand corner of our texture, and (1, 1) is the lower-right corner.</p>
<h3 id="defining-the-indices">Defining the Indices</h3>
<p>Now let&rsquo;s define our indices in their own helper method, <code>InitializeIndices</code>.  Let&rsquo;s assume we&rsquo;re using a triangle list, so we&rsquo;ll need to define all six vertices (with a triangle strip we could cut this to 4):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl">    <span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// Initialize the indices of our quad</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="k">void</span> <span class="n">InitializeIndices</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">indices</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">short</span><span class="p">[</span><span class="m">6</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// Define triangle 0 </span>
</span></span><span class="line"><span class="cl">        <span class="n">indices</span><span class="p">[</span><span class="m">0</span><span class="p">]</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">indices</span><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">indices</span><span class="p">[</span><span class="m">2</span><span class="p">]</span> <span class="p">=</span> <span class="m">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// define triangle 1</span>
</span></span><span class="line"><span class="cl">        <span class="n">indices</span><span class="p">[</span><span class="m">3</span><span class="p">]</span> <span class="p">=</span> <span class="m">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">indices</span><span class="p">[</span><span class="m">4</span><span class="p">]</span> <span class="p">=</span> <span class="m">3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">indices</span><span class="p">[</span><span class="m">5</span><span class="p">]</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span></span></span></code></pre></div><h2 id="initializing-the-effect">Initializing the Effect</h2>
<p>And we&rsquo;ll need to set up our effect, which we&rsquo;ll again do in a method named <code>InitializeEffect()</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl">    <span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// Initializes the basic effect used to draw the quad</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="k">void</span> <span class="n">InitializeEffect</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">effect</span> <span class="p">=</span> <span class="k">new</span> <span class="n">BasicEffect</span><span class="p">(</span><span class="n">game</span><span class="p">.</span><span class="n">GraphicsDevice</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">effect</span><span class="p">.</span><span class="n">World</span> <span class="p">=</span> <span class="n">Matrix</span><span class="p">.</span><span class="n">Identity</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">effect</span><span class="p">.</span><span class="n">View</span> <span class="p">=</span> <span class="n">Matrix</span><span class="p">.</span><span class="n">CreateLookAt</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">4</span><span class="p">),</span> <span class="c1">// The camera position</span>
</span></span><span class="line"><span class="cl">            <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span> <span class="c1">// The camera target,</span>
</span></span><span class="line"><span class="cl">            <span class="n">Vector3</span><span class="p">.</span><span class="n">Up</span>            <span class="c1">// The camera up vector</span>
</span></span><span class="line"><span class="cl">        <span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">effect</span><span class="p">.</span><span class="n">Projection</span> <span class="p">=</span> <span class="n">Matrix</span><span class="p">.</span><span class="n">CreatePerspectiveFieldOfView</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">MathHelper</span><span class="p">.</span><span class="n">PiOver4</span><span class="p">,</span>                         <span class="c1">// The field-of-view </span>
</span></span><span class="line"><span class="cl">            <span class="n">game</span><span class="p">.</span><span class="n">GraphicsDevice</span><span class="p">.</span><span class="n">Viewport</span><span class="p">.</span><span class="n">AspectRatio</span><span class="p">,</span>   <span class="c1">// The aspect ratio</span>
</span></span><span class="line"><span class="cl">            <span class="m">0.1f</span><span class="p">,</span> <span class="c1">// The near plane distance </span>
</span></span><span class="line"><span class="cl">            <span class="m">100.0f</span> <span class="c1">// The far plane distance</span>
</span></span><span class="line"><span class="cl">        <span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">effect</span><span class="p">.</span><span class="n">TextureEnabled</span> <span class="p">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">effect</span><span class="p">.</span><span class="n">Texture</span> <span class="p">=</span> <span class="n">game</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">Load</span><span class="p">&lt;</span><span class="n">Texture2D</span><span class="p">&gt;(</span><span class="s">&#34;monogame-logo&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span></span></span></code></pre></div><p>This looks almost identical to our triangle example.  The only difference is in the last two lines - instead of setting <code>effect.VertexColorEnabled</code>, we&rsquo;re setting <code>effect.TextureEnabled</code> to <code>true</code>, and providing the <em>monogame-logo.png</em> texture to the <code>effect</code>.</p>
<h3 id="draw-method">Draw() Method</h3>
<p>Now let&rsquo;s write our <code>Draw()</code> method:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl">    <span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// Draws the quad</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="k">void</span> <span class="n">Draw</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">effect</span><span class="p">.</span><span class="n">CurrentTechnique</span><span class="p">.</span><span class="n">Passes</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">Apply</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">game</span><span class="p">.</span><span class="n">GraphicsDevice</span><span class="p">.</span><span class="n">DrawUserIndexedPrimitives</span><span class="p">&lt;</span><span class="n">VertexPositionTexture</span><span class="p">&gt;(</span>
</span></span><span class="line"><span class="cl">            <span class="n">PrimitiveType</span><span class="p">.</span><span class="n">TriangleList</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">vertices</span><span class="p">,</span>   <span class="c1">// The vertex collection</span>
</span></span><span class="line"><span class="cl">            <span class="m">0</span><span class="p">,</span>          <span class="c1">// The starting index in the vertex array</span>
</span></span><span class="line"><span class="cl">            <span class="m">4</span><span class="p">,</span>          <span class="c1">// The number of indices in the shape</span>
</span></span><span class="line"><span class="cl">            <span class="n">indices</span><span class="p">,</span>    <span class="c1">// The index collection</span>
</span></span><span class="line"><span class="cl">            <span class="m">0</span><span class="p">,</span>          <span class="c1">// The starting index in the index array</span>
</span></span><span class="line"><span class="cl">            <span class="m">2</span>           <span class="c1">// The number of triangles to draw</span>
</span></span><span class="line"><span class="cl">        <span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span></span></span></code></pre></div><h3 id="the-quad-constructor">The Quad Constructor</h3>
<p>To wrap up the <code>Quad</code>, we&rsquo;ll need to add a constructor that takes a parameter of type <code>Game</code> and invokes our initialization:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl">    <span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// Constructs the Quad</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;param name=&#34;game&#34;&gt;The Game the Quad belongs to&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Quad</span><span class="p">(</span><span class="n">Game</span> <span class="n">game</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="p">.</span><span class="n">game</span> <span class="p">=</span> <span class="n">game</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">InitializeVertices</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">InitializeIndices</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">InitializeEffect</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>   </span></span></code></pre></div><h2 id="adding-our-quad-to-game1">Adding our Quad to Game1</h2>
<p>Now let&rsquo;s use our <code>Quad</code> in <code>Game1</code>.  Add a field for the quad to the <code>Game1</code> class:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl">    <span class="c1">// The quad to draw</span>
</span></span><span class="line"><span class="cl">    <span class="n">Quad</span> <span class="n">quad</span><span class="p">;</span></span></span></code></pre></div><p>And construct it in our <code>Game1.LoadContent()</code>.  We want to be sure the graphics device is set up before we construct our <code>Quad</code>, so this is a good spot:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl">    <span class="c1">// Create the quad</span>
</span></span><span class="line"><span class="cl">    <span class="n">quad</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Quad</span><span class="p">(</span><span class="k">this</span><span class="p">);</span></span></span></code></pre></div><p>And finally, let&rsquo;s render it in our <code>Game1.Draw()</code> method:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl">    <span class="c1">// Draw the quad</span>
</span></span><span class="line"><span class="cl">    <span class="n">quad</span><span class="p">.</span><span class="n">Draw</span><span class="p">();</span></span></span></code></pre></div><p>If you run your code, you should now see the textured quad rendered:</p>
<p><a href="#R-image-49043ecd60661950593f5baca1c2291e" class="lightbox-link"><img alt="The rendered quad" class="border lazy lightbox noshadow figure-image" loading="lazy" src="/cis580/images/basic-3d-3.1.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-49043ecd60661950593f5baca1c2291e"><img alt="The rendered quad" class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="/cis580/images/basic-3d-3.1.png"></a></p>
<p>Notice that even though our texture has a transparent background, the background is rendered in black.  Alpha blending is managed by the <code>GraphicsDevice.BlendState</code>, so we&rsquo;ll need to tweak it before we draw the quad:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl">    <span class="n">game</span><span class="p">.</span><span class="n">GraphicsDevice</span><span class="p">.</span><span class="n">BlendState</span> <span class="p">=</span> <span class="n">BlendState</span><span class="p">.</span><span class="n">AlphaBlend</span><span class="p">;</span></span></span></code></pre></div><p>Notice the <a href="https://www.monogame.net/documentation/?page=T_Microsoft_Xna_Framework_Graphics_BlendState" rel="external" target="_blank">BlendState</a> class is the same one we used with <code>SpriteBatch</code> - and it works the same way.</p>
<p>If you run the game now, the logo&rsquo;s background will be properly transparent.</p>
<p>Just as with the <code>RasterizerState</code>, it is a good idea to restore the old <code>BlendState</code>.  So our final <code>Quad.Draw()</code> method might look like:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl"><span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cs">/// Draws the quad</span>
</span></span><span class="line"><span class="cl"><span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="k">void</span> <span class="n">Draw</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Cache the old blend state </span>
</span></span><span class="line"><span class="cl">    <span class="n">BlendState</span> <span class="n">oldBlendState</span> <span class="p">=</span> <span class="n">game</span><span class="p">.</span><span class="n">GraphicsDevice</span><span class="p">.</span><span class="n">BlendState</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Enable alpha blending </span>
</span></span><span class="line"><span class="cl">    <span class="n">game</span><span class="p">.</span><span class="n">GraphicsDevice</span><span class="p">.</span><span class="n">BlendState</span> <span class="p">=</span> <span class="n">BlendState</span><span class="p">.</span><span class="n">AlphaBlend</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Apply our effect</span>
</span></span><span class="line"><span class="cl">    <span class="n">effect</span><span class="p">.</span><span class="n">CurrentTechnique</span><span class="p">.</span><span class="n">Passes</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">Apply</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Render the quad</span>
</span></span><span class="line"><span class="cl">    <span class="n">game</span><span class="p">.</span><span class="n">GraphicsDevice</span><span class="p">.</span><span class="n">DrawUserIndexedPrimitives</span><span class="p">&lt;</span><span class="n">VertexPositionTexture</span><span class="p">&gt;(</span>
</span></span><span class="line"><span class="cl">        <span class="n">PrimitiveType</span><span class="p">.</span><span class="n">TriangleList</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">vertices</span><span class="p">,</span>   <span class="c1">// The vertex collection</span>
</span></span><span class="line"><span class="cl">        <span class="m">0</span><span class="p">,</span>          <span class="c1">// The starting index in the vertex array</span>
</span></span><span class="line"><span class="cl">        <span class="m">4</span><span class="p">,</span>          <span class="c1">// The number of indices in the shape</span>
</span></span><span class="line"><span class="cl">        <span class="n">indices</span><span class="p">,</span>    <span class="c1">// The index collection</span>
</span></span><span class="line"><span class="cl">        <span class="m">0</span><span class="p">,</span>          <span class="c1">// The starting index in the index array</span>
</span></span><span class="line"><span class="cl">        <span class="m">2</span>           <span class="c1">// The number of triangles to draw</span>
</span></span><span class="line"><span class="cl">    <span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Restore the old blend state </span>
</span></span><span class="line"><span class="cl">    <span class="n">game</span><span class="p">.</span><span class="n">GraphicsDevice</span><span class="p">.</span><span class="n">BlendState</span> <span class="p">=</span> <span class="n">oldBlendState</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div><p>This <code>Quad</code> is very similar to the sprites we&rsquo;ve worked with already - in fact, the <code>SpriteBatch</code> is an optimized way of drawing a lot of textured quads.  It also configures the graphics device and has its own effect, the <a href="https://www.monogame.net/documentation/?page=T_Microsoft_Xna_Framework_Graphics_SpriteEffect" rel="external" target="_blank">SpriteEffect</a>.  Because of this optimization, in most cases, you&rsquo;ll want to use the <code>SpriteBatch</code> for textured quads.  But it is good to understand how it is drawing 2D sprites using the 3D pipeline.</p>
<p>Speaking of&hellip; so far we&rsquo;ve only drawn 2D shapes in a 3D world.  Let&rsquo;s move on to an actual 3D shape next.</p>

            <footer class="footline">
              
              
              
              
            </footer>
          </article>

        </div>
      </main>
    
<div class="git-footer">
  <p class="theme-version-footer">6.0.0</p>
  <p>Last modified by: 
              <i class='fas fa-user'></i> Russell Feldhausen
              <i class='fas fa-calendar'></i> <a href="https://github.com/ksu-cs-textbooks/cis580/commit/43f194969a638fa4572819da4b31060ad574a9ce">Aug 11, 2023</a>
  </p>
  </div>
  
    
    </div>
    <script src="/cis580/js/clipboard.min.js?1719519539" defer></script>
    <script src="/cis580/js/perfect-scrollbar.min.js?1719519539" defer></script>
    <script src="/cis580/js/theme.js?1719519539" defer></script>
  </body>
</html>
