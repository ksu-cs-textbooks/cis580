




  
	
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.128.0">
    <meta name="generator" content="Relearn 6.0.0">
    <meta name="description" content="We’ll continue our exploration of the rendering pipeline with another shape - a cube. And as before, we’ll introduce another concept - vertex and index buffers.
For our triangle and quad, we drew our shapes using GraphicsDevice.DrawUserPrimitives&lt;T&gt;() and GraphicsDevice.DrawUserIndexedPrimitives&lt;T&gt;(). Our vertices and indices were simply arrays we declared normally, that we passed to the graphics card using the aforementioned methods. As with most variables we deal with in C#, the memory used by the vertices and indices arrays was allocated from the computer’s RAM.">
    <meta name="author" content="Nathan Bean">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Rendering a Cube :: K-State CIS 580 Textbook">
    <meta name="twitter:description" content="We’ll continue our exploration of the rendering pipeline with another shape - a cube. And as before, we’ll introduce another concept - vertex and index buffers.
For our triangle and quad, we drew our shapes using GraphicsDevice.DrawUserPrimitives&lt;T&gt;() and GraphicsDevice.DrawUserIndexedPrimitives&lt;T&gt;(). Our vertices and indices were simply arrays we declared normally, that we passed to the graphics card using the aforementioned methods. As with most variables we deal with in C#, the memory used by the vertices and indices arrays was allocated from the computer’s RAM.">
    <meta property="og:url" content="https://textbooks.cs.ksu.edu/cis580/13-basic-3d-rendering/04-rendering-a-cube/">
    <meta property="og:site_name" content="K-State CIS 580 Textbook">
    <meta property="og:title" content="Rendering a Cube :: K-State CIS 580 Textbook">
    <meta property="og:description" content="We’ll continue our exploration of the rendering pipeline with another shape - a cube. And as before, we’ll introduce another concept - vertex and index buffers.
For our triangle and quad, we drew our shapes using GraphicsDevice.DrawUserPrimitives&lt;T&gt;() and GraphicsDevice.DrawUserIndexedPrimitives&lt;T&gt;(). Our vertices and indices were simply arrays we declared normally, that we passed to the graphics card using the aforementioned methods. As with most variables we deal with in C#, the memory used by the vertices and indices arrays was allocated from the computer’s RAM.">
    <meta property="og:locale" content="en-us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Basic 3D Rendering">
    <meta property="article:published_time" content="2020-03-24T10:00:00-05:00">
    <meta property="article:modified_time" content="2023-08-11T11:18:05-05:00">
    <meta itemprop="name" content="Rendering a Cube :: K-State CIS 580 Textbook">
    <meta itemprop="description" content="We’ll continue our exploration of the rendering pipeline with another shape - a cube. And as before, we’ll introduce another concept - vertex and index buffers.
For our triangle and quad, we drew our shapes using GraphicsDevice.DrawUserPrimitives&lt;T&gt;() and GraphicsDevice.DrawUserIndexedPrimitives&lt;T&gt;(). Our vertices and indices were simply arrays we declared normally, that we passed to the graphics card using the aforementioned methods. As with most variables we deal with in C#, the memory used by the vertices and indices arrays was allocated from the computer’s RAM.">
    <meta itemprop="datePublished" content="2020-03-24T10:00:00-05:00">
    <meta itemprop="dateModified" content="2023-08-11T11:18:05-05:00">
    <meta itemprop="wordCount" content="1353">
    <title>Rendering a Cube :: K-State CIS 580 Textbook</title>
    <link href="https://textbooks.cs.ksu.edu/cis580/13-basic-3d-rendering/04-rendering-a-cube/" rel="canonical" type="text/html" title="Rendering a Cube :: K-State CIS 580 Textbook">
    <link href="/cis580/13-basic-3d-rendering/04-rendering-a-cube/index.xml" rel="alternate" type="application/rss+xml" title="Rendering a Cube :: K-State CIS 580 Textbook">
    <link href="/cis580/13-basic-3d-rendering/04-rendering-a-cube/index.print.html" rel="alternate" type="text/html" title="Rendering a Cube :: K-State CIS 580 Textbook">
    <link href="/cis580/13-basic-3d-rendering/04-rendering-a-cube/embed.html" rel="alternate" type="text/html" title="Rendering a Cube :: K-State CIS 580 Textbook">
    <link href="/cis580/css/fontawesome-all.min.css?1723670681" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cis580/css/fontawesome-all.min.css?1723670681" rel="stylesheet"></noscript>
    <link href="/cis580/css/nucleus.css?1723670681" rel="stylesheet">
    <link href="/cis580/css/auto-complete.css?1723670681" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cis580/css/auto-complete.css?1723670681" rel="stylesheet"></noscript>
    <link href="/cis580/css/perfect-scrollbar.min.css?1723670681" rel="stylesheet">
    <link href="/cis580/css/fonts.css?1723670681" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cis580/css/fonts.css?1723670681" rel="stylesheet"></noscript>
    <link href="/cis580/css/theme.css?1723670681" rel="stylesheet">
    <link href="/cis580/css/theme-auto.css?1723670681" rel="stylesheet" id="R-variant-style">
    <link href="/cis580/css/chroma-auto.css?1723670681" rel="stylesheet" id="R-variant-chroma-style">
    <link href="/cis580/css/variant.css?1723670681" rel="stylesheet">
    <link href="/cis580/css/print.css?1723670681" rel="stylesheet" media="print">
    <script src="/cis580/js/variant.js?1723670681"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='https:\/\/textbooks.cs.ksu.edu\/cis580';
      window.index_js_url="/cis580/index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'auto', 'light-theme', 'dark-theme' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
    
    <link href="/cis580/css/custom.css?1723670681" rel="stylesheet">
  </head>
  <body class="mobile-support tele disableInlineCopyToClipboard" data-url="/cis580/13-basic-3d-rendering/04-rendering-a-cube/">
    
    <div id="tele" class="tele mirror">
    
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      
      
      
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id="rendering-a-cube">Rendering a Cube</h1>

<p>We&rsquo;ll continue our exploration of the rendering pipeline with another shape - a cube.  And as before, we&rsquo;ll introduce another concept - <em>vertex</em> and <em>index buffers</em>.</p>
<p>For our triangle and quad, we drew our shapes using <code>GraphicsDevice.DrawUserPrimitives&lt;T&gt;()</code> and <code>GraphicsDevice.DrawUserIndexedPrimitives&lt;T&gt;()</code>.   Our <code>vertices</code> and <code>indices</code> were simply arrays we declared normally, that we passed to the graphics card using the aforementioned methods.  As with most variables we deal with in C#, the memory used by the <code>vertices</code> and <code>indices</code> arrays was allocated from the computer&rsquo;s RAM.  When we invoked the methods, one of the tasks they do is stream the data to the GPU, so that it can be rendered.</p>
<p>This process can be significantly sped up if, instead of storing the vertex and index data in RAM, we store it in Video Ram (VRAM).  VRAM is the memory that is a part of our graphics card.  Not surprisingly, the GPU has direct access to VRAM and can stream data from it quite quickly - more quickly than it can from RAM.  Especially if we are drawing the same shape using the same vertex and index data every frame.</p>
<p>So how do we get this data into the VRAM?  We have to create a <a href="https://www.monogame.net/documentation/?page=T_Microsoft_Xna_Framework_Graphics_VertexBuffer" rel="external" target="_blank">VertexBuffer</a> and an <a href="https://www.monogame.net/documentation/?page=T_Microsoft_Xna_Framework_Graphics_IndexBuffer" rel="external" target="_blank">IndexBuffer</a>.  Let&rsquo;s create a <code>Cube</code> class with instances of these classes.</p>
<h2 id="defining-the-cube-class">Defining the Cube Class</h2>
<p>We&rsquo;ll declare a <code>Cube</code> class much like our <code>Triangle</code> and <code>Quad</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl"><span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cs">/// A class for rendering a cube</span>
</span></span><span class="line"><span class="cl"><span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="k">class</span> <span class="nc">Cube</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// The vertices of the cube</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">VertexBuffer</span> <span class="n">vertices</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// The vertex indices of the cube</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">IndexBuffer</span> <span class="n">indices</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// The effect to use rendering the cube</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">BasicEffect</span> <span class="n">effect</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// The game this cube belongs to </span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Game</span> <span class="n">game</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div><p>The only real difference at this point is the use of a <code>VertexBuffer</code> and <code>IndexBuffer</code> as fields.</p>
<h3 id="creating-the-vertex-buffer">Creating the Vertex Buffer</h3>
<p>We need to create the vertex data in much the same way we did with our other shapes - we start with a collection of vertices (we&rsquo;ll use an array again, and give our vertices colors), but then we&rsquo;ll copy that data <em>into</em> the <code>VertexBuffer</code>, which effectively copies it into VRAM (if space is available).  Once again we&rsquo;ll wrap this in an initialization method:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl">    <span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// Initialize the vertex buffer</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="k">void</span> <span class="n">InitializeVertices</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">var</span> <span class="n">vertexData</span> <span class="p">=</span> <span class="k">new</span> <span class="n">VertexPositionColor</span><span class="p">[]</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">            <span class="k">new</span> <span class="n">VertexPositionColor</span><span class="p">()</span> <span class="p">{</span> <span class="n">Position</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(-</span><span class="m">3</span><span class="p">,</span>  <span class="m">3</span><span class="p">,</span> <span class="p">-</span><span class="m">3</span><span class="p">),</span> <span class="n">Color</span> <span class="p">=</span> <span class="n">Color</span><span class="p">.</span><span class="n">Blue</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="k">new</span> <span class="n">VertexPositionColor</span><span class="p">()</span> <span class="p">{</span> <span class="n">Position</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span> <span class="m">3</span><span class="p">,</span>  <span class="m">3</span><span class="p">,</span> <span class="p">-</span><span class="m">3</span><span class="p">),</span> <span class="n">Color</span> <span class="p">=</span> <span class="n">Color</span><span class="p">.</span><span class="n">Green</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="k">new</span> <span class="n">VertexPositionColor</span><span class="p">()</span> <span class="p">{</span> <span class="n">Position</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(-</span><span class="m">3</span><span class="p">,</span> <span class="p">-</span><span class="m">3</span><span class="p">,</span> <span class="p">-</span><span class="m">3</span><span class="p">),</span> <span class="n">Color</span> <span class="p">=</span> <span class="n">Color</span><span class="p">.</span><span class="n">Red</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="k">new</span> <span class="n">VertexPositionColor</span><span class="p">()</span> <span class="p">{</span> <span class="n">Position</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span> <span class="m">3</span><span class="p">,</span> <span class="p">-</span><span class="m">3</span><span class="p">,</span> <span class="p">-</span><span class="m">3</span><span class="p">),</span> <span class="n">Color</span> <span class="p">=</span> <span class="n">Color</span><span class="p">.</span><span class="n">Cyan</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="k">new</span> <span class="n">VertexPositionColor</span><span class="p">()</span> <span class="p">{</span> <span class="n">Position</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(-</span><span class="m">3</span><span class="p">,</span>  <span class="m">3</span><span class="p">,</span>  <span class="m">3</span><span class="p">),</span> <span class="n">Color</span> <span class="p">=</span> <span class="n">Color</span><span class="p">.</span><span class="n">Blue</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="k">new</span> <span class="n">VertexPositionColor</span><span class="p">()</span> <span class="p">{</span> <span class="n">Position</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span> <span class="m">3</span><span class="p">,</span>  <span class="m">3</span><span class="p">,</span>  <span class="m">3</span><span class="p">),</span> <span class="n">Color</span> <span class="p">=</span> <span class="n">Color</span><span class="p">.</span><span class="n">Red</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="k">new</span> <span class="n">VertexPositionColor</span><span class="p">()</span> <span class="p">{</span> <span class="n">Position</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(-</span><span class="m">3</span><span class="p">,</span> <span class="p">-</span><span class="m">3</span><span class="p">,</span>  <span class="m">3</span><span class="p">),</span> <span class="n">Color</span> <span class="p">=</span> <span class="n">Color</span><span class="p">.</span><span class="n">Green</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="k">new</span> <span class="n">VertexPositionColor</span><span class="p">()</span> <span class="p">{</span> <span class="n">Position</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span> <span class="m">3</span><span class="p">,</span> <span class="p">-</span><span class="m">3</span><span class="p">,</span>  <span class="m">3</span><span class="p">),</span> <span class="n">Color</span> <span class="p">=</span> <span class="n">Color</span><span class="p">.</span><span class="n">Cyan</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">};</span>
</span></span><span class="line"><span class="cl">        <span class="n">vertices</span> <span class="p">=</span> <span class="k">new</span> <span class="n">VertexBuffer</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">game</span><span class="p">.</span><span class="n">GraphicsDevice</span><span class="p">,</span>            <span class="c1">// The graphics device to load the buffer on </span>
</span></span><span class="line"><span class="cl">            <span class="k">typeof</span><span class="p">(</span><span class="n">VertexPositionColor</span><span class="p">),</span>    <span class="c1">// The type of the vertex data </span>
</span></span><span class="line"><span class="cl">            <span class="m">8</span><span class="p">,</span>                              <span class="c1">// The count of the vertices </span>
</span></span><span class="line"><span class="cl">            <span class="n">BufferUsage</span><span class="p">.</span><span class="n">None</span>                <span class="c1">// How the buffer will be used</span>
</span></span><span class="line"><span class="cl">        <span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">vertices</span><span class="p">.</span><span class="n">SetData</span><span class="p">&lt;</span><span class="n">VertexPositionColor</span><span class="p">&gt;(</span><span class="n">vertexData</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span></span></span></code></pre></div><p>We declare our <code>vertexData</code> as an instance variable, which means once this method returns, its memory will be reclaimed.  The <code>VertexBuffer</code> constructor allocates the space needed for the data in VRAM, while the <code>VertexBuffer.SetData()</code> method what actually copies it into that location, managing the process for us.</p>
<p>If we were writing DirectX code in C++, we would need to:</p>
<ol>
<li>Allocate memory in VRAM for the buffer</li>
<li>Lock that memory location (remember, both the GPU and CPU can access VRAM at a given time)</li>
<li>Copy the bytes of the buffer into that location, and</li>
<li>Release the lock</li>
</ol>
<p>If you are interested in seeing what the equivalent code in C++ looks like, visit <a href="http://www.directxtutorial.com/Lesson.aspx?lessonid=9-4-7" rel="external" target="_blank">www.directxtutorial.com</a>.  Our vertex and index data is adapted from the cube presented there.</p>
<h3 id="creating-the-index-buffer">Creating the Index Buffer</h3>
<p>The index buffer is initialized and the data copied in the same way:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl">    <span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// Initializes the index buffer</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="k">void</span> <span class="n">InitializeIndices</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">var</span> <span class="n">indexData</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">short</span><span class="p">[]</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="c1">// Side 0</span>
</span></span><span class="line"><span class="cl">            <span class="m">2</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="m">4</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">6</span><span class="p">,</span> <span class="c1">// Side 1</span>
</span></span><span class="line"><span class="cl">            <span class="m">6</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="m">7</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">6</span><span class="p">,</span> <span class="c1">// Side 2</span>
</span></span><span class="line"><span class="cl">            <span class="m">6</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="m">3</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="c1">// Side 3 </span>
</span></span><span class="line"><span class="cl">            <span class="m">7</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="m">4</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="c1">// Side 4 </span>
</span></span><span class="line"><span class="cl">            <span class="m">0</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="m">3</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="c1">// Side 5 </span>
</span></span><span class="line"><span class="cl">            <span class="m">2</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">6</span>
</span></span><span class="line"><span class="cl">        <span class="p">};</span>
</span></span><span class="line"><span class="cl">        <span class="n">indices</span> <span class="p">=</span> <span class="k">new</span> <span class="n">IndexBuffer</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">game</span><span class="p">.</span><span class="n">GraphicsDevice</span><span class="p">,</span>            <span class="c1">// The graphics device to use</span>
</span></span><span class="line"><span class="cl">            <span class="n">IndexElementSize</span><span class="p">.</span><span class="n">SixteenBits</span><span class="p">,</span>   <span class="c1">// The size of the index </span>
</span></span><span class="line"><span class="cl">            <span class="m">36</span><span class="p">,</span>                             <span class="c1">// The count of the indices</span>
</span></span><span class="line"><span class="cl">            <span class="n">BufferUsage</span><span class="p">.</span><span class="n">None</span>                <span class="c1">// How the buffer will be used</span>
</span></span><span class="line"><span class="cl">        <span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">indices</span><span class="p">.</span><span class="n">SetData</span><span class="p">&lt;</span><span class="kt">short</span><span class="p">&gt;(</span><span class="n">indexData</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span></span></span></code></pre></div><h3 id="initializing-the-effect">Initializing the Effect</h3>
<p>And our <code>BasicEffect</code> is configured identically to how we di so for our <code>Triangle</code> class:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl">    <span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// Initializes the BasicEffect to render our cube</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="k">void</span> <span class="n">InitializeEffect</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">effect</span> <span class="p">=</span> <span class="k">new</span> <span class="n">BasicEffect</span><span class="p">(</span><span class="n">game</span><span class="p">.</span><span class="n">GraphicsDevice</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">effect</span><span class="p">.</span><span class="n">World</span> <span class="p">=</span> <span class="n">Matrix</span><span class="p">.</span><span class="n">Identity</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">effect</span><span class="p">.</span><span class="n">View</span> <span class="p">=</span> <span class="n">Matrix</span><span class="p">.</span><span class="n">CreateLookAt</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">4</span><span class="p">),</span> <span class="c1">// The camera position</span>
</span></span><span class="line"><span class="cl">            <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span> <span class="c1">// The camera target,</span>
</span></span><span class="line"><span class="cl">            <span class="n">Vector3</span><span class="p">.</span><span class="n">Up</span>            <span class="c1">// The camera up vector</span>
</span></span><span class="line"><span class="cl">        <span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">effect</span><span class="p">.</span><span class="n">Projection</span> <span class="p">=</span> <span class="n">Matrix</span><span class="p">.</span><span class="n">CreatePerspectiveFieldOfView</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">MathHelper</span><span class="p">.</span><span class="n">PiOver4</span><span class="p">,</span>                         <span class="c1">// The field-of-view </span>
</span></span><span class="line"><span class="cl">            <span class="n">game</span><span class="p">.</span><span class="n">GraphicsDevice</span><span class="p">.</span><span class="n">Viewport</span><span class="p">.</span><span class="n">AspectRatio</span><span class="p">,</span>   <span class="c1">// The aspect ratio</span>
</span></span><span class="line"><span class="cl">            <span class="m">0.1f</span><span class="p">,</span> <span class="c1">// The near plane distance </span>
</span></span><span class="line"><span class="cl">            <span class="m">100.0f</span> <span class="c1">// The far plane distance</span>
</span></span><span class="line"><span class="cl">        <span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">effect</span><span class="p">.</span><span class="n">VertexColorEnabled</span> <span class="p">=</span> <span class="kc">true</span><span class="p">;</span>     
</span></span><span class="line"><span class="cl">    <span class="p">}</span></span></span></code></pre></div><h3 id="drawing-the-cube">Drawing the Cube</h3>
<p>Our <code>cube.Draw()</code> method will be a bit different though:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl">    <span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// Draws the Cube</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="k">void</span> <span class="n">Draw</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// apply the effect </span>
</span></span><span class="line"><span class="cl">        <span class="n">effect</span><span class="p">.</span><span class="n">CurrentTechnique</span><span class="p">.</span><span class="n">Passes</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">Apply</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// set the vertex buffer</span>
</span></span><span class="line"><span class="cl">        <span class="n">game</span><span class="p">.</span><span class="n">GraphicsDevice</span><span class="p">.</span><span class="n">SetVertexBuffer</span><span class="p">(</span><span class="n">vertices</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// set the index buffer</span>
</span></span><span class="line"><span class="cl">        <span class="n">game</span><span class="p">.</span><span class="n">GraphicsDevice</span><span class="p">.</span><span class="n">Indices</span> <span class="p">=</span> <span class="n">indices</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Draw the triangles</span>
</span></span><span class="line"><span class="cl">        <span class="n">game</span><span class="p">.</span><span class="n">GraphicsDevice</span><span class="p">.</span><span class="n">DrawIndexedPrimitives</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">PrimitiveType</span><span class="p">.</span><span class="n">TriangleList</span><span class="p">,</span> <span class="c1">// Tye type to draw</span>
</span></span><span class="line"><span class="cl">            <span class="m">0</span><span class="p">,</span>                          <span class="c1">// The first vertex to use</span>
</span></span><span class="line"><span class="cl">            <span class="m">0</span><span class="p">,</span>                          <span class="c1">// The first index to use</span>
</span></span><span class="line"><span class="cl">            <span class="m">12</span>                          <span class="c1">// the number of triangles to draw</span>
</span></span><span class="line"><span class="cl">        <span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span></span></span></code></pre></div><p>Before we can use <a href="https://www.monogame.net/documentation/?page=M_Microsoft_Xna_Framework_Graphics_GraphicsDevice_DrawIndexedPrimitives" rel="external" target="_blank">GraphicsDevice.DrawIndexedPrimitives()</a>, we need to tell the <code>GraphicsDevice</code> which <code>VertexBuffer</code> and <code>IndexBuffer</code> to use.  The first is set with a method, the second through assignment.  With both set, we can invoke <code>GraphicsDevice.DrawIndexedPrimitives()</code> and it will draw the contents of the buffers.</p>
<h3 id="constructing-the-cube">Constructing the Cube</h3>
<p>The <code>Cube</code> constructor is back in familiar territory:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl">    <span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// Constructs a cube instance</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;param name=&#34;game&#34;&gt;The game that is creating the cube&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Cube</span><span class="p">(</span><span class="n">Game1</span> <span class="n">game</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="p">.</span><span class="n">game</span> <span class="p">=</span> <span class="n">game</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">InitializeVertices</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">InitializeIndices</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">InitializeEffect</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span></span></span></code></pre></div><h2 id="adding-the-cube-to-game1">Adding the Cube to Game1</h2>
<p>To render our cube, we must go back to the <code>Game1</code> class and add a reference to one:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl">    <span class="c1">// The cube to draw </span>
</span></span><span class="line"><span class="cl">    <span class="n">Cube</span> <span class="n">cube</span><span class="p">;</span></span></span></code></pre></div><p>Construct it in the <code>Game1.LoadContent()</code> method:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl">    <span class="c1">// Create the cube</span>
</span></span><span class="line"><span class="cl">    <span class="n">cube</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Cube</span><span class="p">(</span><span class="k">this</span><span class="p">);</span></span></span></code></pre></div><p>And draw it in the <code>Game1.Draw()</code> method:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl">    <span class="c1">// draw the cube</span>
</span></span><span class="line"><span class="cl">    <span class="n">cube</span><span class="p">.</span><span class="n">Draw</span><span class="p">();</span></span></span></code></pre></div><p>If you run your code now, the cube is so big that the front face takes up the whole screen!</p>
<h2 id="changing-the-view-matrix">Changing the View Matrix</h2>
<p>We could scale our cube down with a world transform - but rather than doing that, let&rsquo;s look at it from farther away by changing the view transform.  Let&rsquo;s add an <code>Update()</code> method to our <code>Cube</code> class:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl">    <span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// Updates the Cube</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;param name=&#34;gameTime&#34;&gt;&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="k">void</span> <span class="n">Update</span><span class="p">(</span><span class="n">GameTime</span> <span class="n">gameTime</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Look at the cube from farther away</span>
</span></span><span class="line"><span class="cl">        <span class="n">effect</span><span class="p">.</span><span class="n">View</span> <span class="p">=</span> <span class="n">Matrix</span><span class="p">.</span><span class="n">CreateLookAt</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="p">-</span><span class="m">10</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="n">Vector3</span><span class="p">.</span><span class="n">Zero</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">Vector3</span><span class="p">.</span><span class="n">Up</span>
</span></span><span class="line"><span class="cl">        <span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span></span></span></code></pre></div><p>And invoke this method in the <code>Game1.Update()</code> method:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl">    <span class="c1">// update the cube </span>
</span></span><span class="line"><span class="cl">    <span class="n">cube</span><span class="p">.</span><span class="n">Update</span><span class="p">(</span><span class="n">gameTime</span><span class="p">);</span></span></span></code></pre></div><p>Now if you run the program, you should see the cube, and be able to see that its edges are distorted to simulate depth:</p>
<p><a href="#R-image-94a179729ce450385c58842d5f57a9e2" class="lightbox-link"><img alt="Rendered Cube" class="border lazy lightbox noshadow figure-image" loading="lazy" src="/cis580/images/basic-3d-4.1.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-94a179729ce450385c58842d5f57a9e2"><img alt="Rendered Cube" class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="/cis580/images/basic-3d-4.1.png"></a></p>
<p>Let&rsquo;s set our viewpoint rotating around the cube by refactoring our <code>Cube.Update()</code> method:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl">    <span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// Updates the Cube</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;param name=&#34;gameTime&#34;&gt;&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="k">void</span> <span class="n">Update</span><span class="p">(</span><span class="n">GameTime</span> <span class="n">gameTime</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">float</span> <span class="n">angle</span> <span class="p">=</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">gameTime</span><span class="p">.</span><span class="n">TotalGameTime</span><span class="p">.</span><span class="n">TotalSeconds</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Look at the cube from farther away while spinning around it</span>
</span></span><span class="line"><span class="cl">        <span class="n">effect</span><span class="p">.</span><span class="n">View</span> <span class="p">=</span> <span class="n">Matrix</span><span class="p">.</span><span class="n">CreateRotationY</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span> <span class="p">*</span> <span class="n">Matrix</span><span class="p">.</span><span class="n">CreateLookAt</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="k">new</span> <span class="n">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="p">-</span><span class="m">10</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="n">Vector3</span><span class="p">.</span><span class="n">Zero</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">Vector3</span><span class="p">.</span><span class="n">Up</span>
</span></span><span class="line"><span class="cl">        <span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="p">}</span></span></span></code></pre></div><p>Now our cube appears to be spinning!  But actually, it is our vantage point that is circling the cube, unlike the triangle, which is actually spinning in place.  The final effect is the same, but one spin is applied to the world transform, and the other to the view transform.  We&rsquo;ll speak about both in more detail later.</p>

            <footer class="footline">
              
              
              
              
            </footer>
          </article>
</div>
</main>
</div>

</div>




<script src="/cis580/js/clipboard.min.js?1723670681" defer></script>
<script src="/cis580/js/perfect-scrollbar.min.js?1723670681" defer></script>
<script src="/cis580/js/theme.js?1723670681" defer></script>

<script src="/cis580/js/tele-scroll.js?1723670681" defer></script>

</body>
</html>
