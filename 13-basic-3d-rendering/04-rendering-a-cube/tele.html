<!DOCTYPE html>

<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.128.0">
    <meta name="generator" content="Relearn 8.0.0">
    <meta name="description" content="We’ll continue our exploration of the rendering pipeline with another shape - a cube. And as before, we’ll introduce another concept - vertex and index buffers.
For our triangle and quad, we drew our shapes using GraphicsDevice.DrawUserPrimitives&lt;T&gt;() and GraphicsDevice.DrawUserIndexedPrimitives&lt;T&gt;(). Our vertices and indices were simply arrays we declared normally, that we passed to the graphics card using the aforementioned methods. As with most variables we deal with in C#, the memory used by the vertices and indices arrays was allocated from the computer’s RAM.">
    <meta name="author" content="Nathan H. Bean">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://textbooks.cs.ksu.edu/cis580/images/hero.png">
    <meta name="twitter:title" content="Rendering a Cube :: K-State CIS 580 Textbook">
    <meta name="twitter:description" content="We’ll continue our exploration of the rendering pipeline with another shape - a cube. And as before, we’ll introduce another concept - vertex and index buffers.
For our triangle and quad, we drew our shapes using GraphicsDevice.DrawUserPrimitives&lt;T&gt;() and GraphicsDevice.DrawUserIndexedPrimitives&lt;T&gt;(). Our vertices and indices were simply arrays we declared normally, that we passed to the graphics card using the aforementioned methods. As with most variables we deal with in C#, the memory used by the vertices and indices arrays was allocated from the computer’s RAM.">
    <meta property="og:url" content="https://textbooks.cs.ksu.edu/cis580/13-basic-3d-rendering/04-rendering-a-cube/index.html">
    <meta property="og:site_name" content="K-State CIS 580 Textbook">
    <meta property="og:title" content="Rendering a Cube :: K-State CIS 580 Textbook">
    <meta property="og:description" content="We’ll continue our exploration of the rendering pipeline with another shape - a cube. And as before, we’ll introduce another concept - vertex and index buffers.
For our triangle and quad, we drew our shapes using GraphicsDevice.DrawUserPrimitives&lt;T&gt;() and GraphicsDevice.DrawUserIndexedPrimitives&lt;T&gt;(). Our vertices and indices were simply arrays we declared normally, that we passed to the graphics card using the aforementioned methods. As with most variables we deal with in C#, the memory used by the vertices and indices arrays was allocated from the computer’s RAM.">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Basic 3D Rendering">
    <meta property="article:published_time" content="2020-03-24T10:00:00-05:00">
    <meta property="article:modified_time" content="2023-08-11T11:18:05-05:00">
    <meta property="og:image" content="https://textbooks.cs.ksu.edu/cis580/images/hero.png">
    <meta itemprop="name" content="Rendering a Cube :: K-State CIS 580 Textbook">
    <meta itemprop="description" content="We’ll continue our exploration of the rendering pipeline with another shape - a cube. And as before, we’ll introduce another concept - vertex and index buffers.
For our triangle and quad, we drew our shapes using GraphicsDevice.DrawUserPrimitives&lt;T&gt;() and GraphicsDevice.DrawUserIndexedPrimitives&lt;T&gt;(). Our vertices and indices were simply arrays we declared normally, that we passed to the graphics card using the aforementioned methods. As with most variables we deal with in C#, the memory used by the vertices and indices arrays was allocated from the computer’s RAM.">
    <meta itemprop="datePublished" content="2020-03-24T10:00:00-05:00">
    <meta itemprop="dateModified" content="2023-08-11T11:18:05-05:00">
    <meta itemprop="wordCount" content="1365">
    <meta itemprop="image" content="https://textbooks.cs.ksu.edu/cis580/images/hero.png">
    <title>Rendering a Cube :: K-State CIS 580 Textbook</title>
    <link href="https://textbooks.cs.ksu.edu/cis580/13-basic-3d-rendering/04-rendering-a-cube/index.html" rel="canonical" type="text/html" title="Rendering a Cube :: K-State CIS 580 Textbook">
    <link href="/cis580/13-basic-3d-rendering/04-rendering-a-cube/index.xml" rel="alternate" type="application/rss+xml" title="Rendering a Cube :: K-State CIS 580 Textbook">
    <link href="/cis580/13-basic-3d-rendering/04-rendering-a-cube/index.print.html" rel="alternate" type="text/html" title="Rendering a Cube :: K-State CIS 580 Textbook">
    <link href="/cis580/13-basic-3d-rendering/04-rendering-a-cube/embed.html" rel="alternate" type="text/html" title="Rendering a Cube :: K-State CIS 580 Textbook">
    <link href="/cis580/css/auto-complete/auto-complete.min.css?1755628803" rel="stylesheet">
    <script src="/cis580/js/auto-complete/auto-complete.min.js?1755628803" defer></script>
    <script src="/cis580/js/search-lunr.min.js?1755628803" defer></script>
    <script src="/cis580/js/search.min.js?1755628803" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/cis580/searchindex.en.js?1755628803";
    </script>
    <script src="/cis580/js/lunr/lunr.min.js?1755628803" defer></script>
    <script src="/cis580/js/lunr/lunr.stemmer.support.min.js?1755628803" defer></script>
    <script src="/cis580/js/lunr/lunr.multi.min.js?1755628803" defer></script>
    <script src="/cis580/js/lunr/lunr.en.min.js?1755628803" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/cis580/fonts/fontawesome/css/fontawesome-all.min.css?1755628803" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cis580/fonts/fontawesome/css/fontawesome-all.min.css?1755628803" rel="stylesheet"></noscript>
    <link href="/cis580/css/perfect-scrollbar/perfect-scrollbar.min.css?1755628803" rel="stylesheet">
    <link href="/cis580/css/theme.min.css?1755628803" rel="stylesheet">
    <link href="/cis580/css/format-html.min.css?1755628803" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/13-basic-3d-rendering\/04-rendering-a-cube\/index.html';
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='https:\/\/textbooks.cs.ksu.edu\/cis580';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=true;
      window.relearn.enableBlockCodeWrap=false;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      // variant stuff
      window.relearn.themevariants = [ 'light-theme' ];
      window.relearn.customvariantname = "my-custom-variant";
      // [x] russfeld
      window.relearn.writeVariant=false;
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          
          if (window.relearn.writeVariant) {
            window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
          }
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
    <link href="/cis580/css/custom.css?1755628803" rel="stylesheet">
  </head>
  <body class="mobile-support html" data-url="/cis580/13-basic-3d-rendering/04-rendering-a-cube/index.html">
    
    <div id="tele" class="tele mirror">
    
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      
      
      
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable 13-basic-3d-rendering" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="rendering-a-cube">Rendering a Cube</h1>

<p>We&rsquo;ll continue our exploration of the rendering pipeline with another shape - a cube.  And as before, we&rsquo;ll introduce another concept - <em>vertex</em> and <em>index buffers</em>.</p>
<p>For our triangle and quad, we drew our shapes using <code>GraphicsDevice.DrawUserPrimitives&lt;T&gt;()</code> and <code>GraphicsDevice.DrawUserIndexedPrimitives&lt;T&gt;()</code>.   Our <code>vertices</code> and <code>indices</code> were simply arrays we declared normally, that we passed to the graphics card using the aforementioned methods.  As with most variables we deal with in C#, the memory used by the <code>vertices</code> and <code>indices</code> arrays was allocated from the computer&rsquo;s RAM.  When we invoked the methods, one of the tasks they do is stream the data to the GPU, so that it can be rendered.</p>
<p>This process can be significantly sped up if, instead of storing the vertex and index data in RAM, we store it in Video Ram (VRAM).  VRAM is the memory that is a part of our graphics card.  Not surprisingly, the GPU has direct access to VRAM and can stream data from it quite quickly - more quickly than it can from RAM.  Especially if we are drawing the same shape using the same vertex and index data every frame.</p>
<p>So how do we get this data into the VRAM?  We have to create a <a href="https://www.monogame.net/documentation/?page=T_Microsoft_Xna_Framework_Graphics_VertexBuffer" rel="external" target="_blank">VertexBuffer</a> and an <a href="https://www.monogame.net/documentation/?page=T_Microsoft_Xna_Framework_Graphics_IndexBuffer" rel="external" target="_blank">IndexBuffer</a>.  Let&rsquo;s create a <code>Cube</code> class with instances of these classes.</p>
<h2 id="defining-the-cube-class">Defining the Cube Class</h2>
<p>We&rsquo;ll declare a <code>Cube</code> class much like our <code>Triangle</code> and <code>Quad</code>:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A class for rendering a cube</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Cube</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The vertices of the cube</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    VertexBuffer vertices;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The vertex indices of the cube</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    IndexBuffer indices;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The effect to use rendering the cube</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    BasicEffect effect;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The game this cube belongs to </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    Game game;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>The only real difference at this point is the use of a <code>VertexBuffer</code> and <code>IndexBuffer</code> as fields.</p>
<h3 id="creating-the-vertex-buffer">Creating the Vertex Buffer</h3>
<p>We need to create the vertex data in much the same way we did with our other shapes - we start with a collection of vertices (we&rsquo;ll use an array again, and give our vertices colors), but then we&rsquo;ll copy that data <em>into</em> the <code>VertexBuffer</code>, which effectively copies it into VRAM (if space is available).  Once again we&rsquo;ll wrap this in an initialization method:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Initialize the vertex buffer</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> InitializeVertices()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> vertexData = <span style="color:#66d9ef">new</span> VertexPositionColor[] { 
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> VertexPositionColor() { Position = <span style="color:#66d9ef">new</span> Vector3(-<span style="color:#ae81ff">3</span>,  <span style="color:#ae81ff">3</span>, -<span style="color:#ae81ff">3</span>), Color = Color.Blue },
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> VertexPositionColor() { Position = <span style="color:#66d9ef">new</span> Vector3( <span style="color:#ae81ff">3</span>,  <span style="color:#ae81ff">3</span>, -<span style="color:#ae81ff">3</span>), Color = Color.Green },
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> VertexPositionColor() { Position = <span style="color:#66d9ef">new</span> Vector3(-<span style="color:#ae81ff">3</span>, -<span style="color:#ae81ff">3</span>, -<span style="color:#ae81ff">3</span>), Color = Color.Red },
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> VertexPositionColor() { Position = <span style="color:#66d9ef">new</span> Vector3( <span style="color:#ae81ff">3</span>, -<span style="color:#ae81ff">3</span>, -<span style="color:#ae81ff">3</span>), Color = Color.Cyan },
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> VertexPositionColor() { Position = <span style="color:#66d9ef">new</span> Vector3(-<span style="color:#ae81ff">3</span>,  <span style="color:#ae81ff">3</span>,  <span style="color:#ae81ff">3</span>), Color = Color.Blue },
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> VertexPositionColor() { Position = <span style="color:#66d9ef">new</span> Vector3( <span style="color:#ae81ff">3</span>,  <span style="color:#ae81ff">3</span>,  <span style="color:#ae81ff">3</span>), Color = Color.Red },
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> VertexPositionColor() { Position = <span style="color:#66d9ef">new</span> Vector3(-<span style="color:#ae81ff">3</span>, -<span style="color:#ae81ff">3</span>,  <span style="color:#ae81ff">3</span>), Color = Color.Green },
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> VertexPositionColor() { Position = <span style="color:#66d9ef">new</span> Vector3( <span style="color:#ae81ff">3</span>, -<span style="color:#ae81ff">3</span>,  <span style="color:#ae81ff">3</span>), Color = Color.Cyan }
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        vertices = <span style="color:#66d9ef">new</span> VertexBuffer(
</span></span><span style="display:flex;"><span>            game.GraphicsDevice,            <span style="color:#75715e">// The graphics device to load the buffer on </span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">typeof</span>(VertexPositionColor),    <span style="color:#75715e">// The type of the vertex data </span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">8</span>,                              <span style="color:#75715e">// The count of the vertices </span>
</span></span><span style="display:flex;"><span>            BufferUsage.None                <span style="color:#75715e">// How the buffer will be used</span>
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>        vertices.SetData&lt;VertexPositionColor&gt;(vertexData);
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div>
<p>We declare our <code>vertexData</code> as an instance variable, which means once this method returns, its memory will be reclaimed.  The <code>VertexBuffer</code> constructor allocates the space needed for the data in VRAM, while the <code>VertexBuffer.SetData()</code> method what actually copies it into that location, managing the process for us.</p>
<p>If we were writing DirectX code in C++, we would need to:</p>
<ol>
<li>Allocate memory in VRAM for the buffer</li>
<li>Lock that memory location (remember, both the GPU and CPU can access VRAM at a given time)</li>
<li>Copy the bytes of the buffer into that location, and</li>
<li>Release the lock</li>
</ol>
<p>If you are interested in seeing what the equivalent code in C++ looks like, visit <a href="http://www.directxtutorial.com/Lesson.aspx?lessonid=9-4-7" rel="external" target="_blank">www.directxtutorial.com</a>.  Our vertex and index data is adapted from the cube presented there.</p>
<h3 id="creating-the-index-buffer">Creating the Index Buffer</h3>
<p>The index buffer is initialized and the data copied in the same way:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Initializes the index buffer</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> InitializeIndices()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> indexData = <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">short</span>[]
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#75715e">// Side 0</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">6</span>, <span style="color:#75715e">// Side 1</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>, <span style="color:#75715e">// Side 2</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">4</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">7</span>, <span style="color:#75715e">// Side 3 </span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">5</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">0</span>, <span style="color:#75715e">// Side 4 </span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">2</span>, <span style="color:#75715e">// Side 5 </span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">6</span>
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        indices = <span style="color:#66d9ef">new</span> IndexBuffer(
</span></span><span style="display:flex;"><span>            game.GraphicsDevice,            <span style="color:#75715e">// The graphics device to use</span>
</span></span><span style="display:flex;"><span>            IndexElementSize.SixteenBits,   <span style="color:#75715e">// The size of the index </span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">36</span>,                             <span style="color:#75715e">// The count of the indices</span>
</span></span><span style="display:flex;"><span>            BufferUsage.None                <span style="color:#75715e">// How the buffer will be used</span>
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>        indices.SetData&lt;<span style="color:#66d9ef">short</span>&gt;(indexData);
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div>
<h3 id="initializing-the-effect">Initializing the Effect</h3>
<p>And our <code>BasicEffect</code> is configured identically to how we di so for our <code>Triangle</code> class:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Initializes the BasicEffect to render our cube</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> InitializeEffect()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        effect = <span style="color:#66d9ef">new</span> BasicEffect(game.GraphicsDevice);
</span></span><span style="display:flex;"><span>        effect.World = Matrix.Identity;
</span></span><span style="display:flex;"><span>        effect.View = Matrix.CreateLookAt(
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> Vector3(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">4</span>), <span style="color:#75715e">// The camera position</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> Vector3(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>), <span style="color:#75715e">// The camera target,</span>
</span></span><span style="display:flex;"><span>            Vector3.Up            <span style="color:#75715e">// The camera up vector</span>
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>        effect.Projection = Matrix.CreatePerspectiveFieldOfView(
</span></span><span style="display:flex;"><span>            MathHelper.PiOver4,                         <span style="color:#75715e">// The field-of-view </span>
</span></span><span style="display:flex;"><span>            game.GraphicsDevice.Viewport.AspectRatio,   <span style="color:#75715e">// The aspect ratio</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">0.1f</span>, <span style="color:#75715e">// The near plane distance </span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">100.0f</span> <span style="color:#75715e">// The far plane distance</span>
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>        effect.VertexColorEnabled = <span style="color:#66d9ef">true</span>;     
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div>
<h3 id="drawing-the-cube">Drawing the Cube</h3>
<p>Our <code>cube.Draw()</code> method will be a bit different though:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Draws the Cube</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> Draw()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// apply the effect </span>
</span></span><span style="display:flex;"><span>        effect.CurrentTechnique.Passes[<span style="color:#ae81ff">0</span>].Apply();
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// set the vertex buffer</span>
</span></span><span style="display:flex;"><span>        game.GraphicsDevice.SetVertexBuffer(vertices);
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// set the index buffer</span>
</span></span><span style="display:flex;"><span>        game.GraphicsDevice.Indices = indices;
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Draw the triangles</span>
</span></span><span style="display:flex;"><span>        game.GraphicsDevice.DrawIndexedPrimitives(
</span></span><span style="display:flex;"><span>            PrimitiveType.TriangleList, <span style="color:#75715e">// Tye type to draw</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">0</span>,                          <span style="color:#75715e">// The first vertex to use</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">0</span>,                          <span style="color:#75715e">// The first index to use</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">12</span>                          <span style="color:#75715e">// the number of triangles to draw</span>
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div>
<p>Before we can use <a href="https://www.monogame.net/documentation/?page=M_Microsoft_Xna_Framework_Graphics_GraphicsDevice_DrawIndexedPrimitives" rel="external" target="_blank">GraphicsDevice.DrawIndexedPrimitives()</a>, we need to tell the <code>GraphicsDevice</code> which <code>VertexBuffer</code> and <code>IndexBuffer</code> to use.  The first is set with a method, the second through assignment.  With both set, we can invoke <code>GraphicsDevice.DrawIndexedPrimitives()</code> and it will draw the contents of the buffers.</p>
<h3 id="constructing-the-cube">Constructing the Cube</h3>
<p>The <code>Cube</code> constructor is back in familiar territory:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Constructs a cube instance</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;game&#34;&gt;The game that is creating the cube&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Cube(Game1 game)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.game = game;
</span></span><span style="display:flex;"><span>        InitializeVertices();
</span></span><span style="display:flex;"><span>        InitializeIndices();
</span></span><span style="display:flex;"><span>        InitializeEffect();
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div>
<h2 id="adding-the-cube-to-game1">Adding the Cube to Game1</h2>
<p>To render our cube, we must go back to the <code>Game1</code> class and add a reference to one:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">// The cube to draw </span>
</span></span><span style="display:flex;"><span>    Cube cube;</span></span></code></pre></div>
<p>Construct it in the <code>Game1.LoadContent()</code> method:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">// Create the cube</span>
</span></span><span style="display:flex;"><span>    cube = <span style="color:#66d9ef">new</span> Cube(<span style="color:#66d9ef">this</span>);</span></span></code></pre></div>
<p>And draw it in the <code>Game1.Draw()</code> method:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">// draw the cube</span>
</span></span><span style="display:flex;"><span>    cube.Draw();</span></span></code></pre></div>
<p>If you run your code now, the cube is so big that the front face takes up the whole screen!</p>
<h2 id="changing-the-view-matrix">Changing the View Matrix</h2>
<p>We could scale our cube down with a world transform - but rather than doing that, let&rsquo;s look at it from farther away by changing the view transform.  Let&rsquo;s add an <code>Update()</code> method to our <code>Cube</code> class:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Updates the Cube</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;gameTime&#34;&gt;&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> Update(GameTime gameTime)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Look at the cube from farther away</span>
</span></span><span style="display:flex;"><span>        effect.View = Matrix.CreateLookAt(
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> Vector3(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">5</span>, -<span style="color:#ae81ff">10</span>),
</span></span><span style="display:flex;"><span>            Vector3.Zero,
</span></span><span style="display:flex;"><span>            Vector3.Up
</span></span><span style="display:flex;"><span>        ); 
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div>
<p>And invoke this method in the <code>Game1.Update()</code> method:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">// update the cube </span>
</span></span><span style="display:flex;"><span>    cube.Update(gameTime);</span></span></code></pre></div>
<p>Now if you run the program, you should see the cube, and be able to see that its edges are distorted to simulate depth:</p>
<p><a href="#R-image-78782c714d6aa80d86cd90844ca6279b" class="lightbox-link"><img alt="Rendered Cube" class="border lazy lightbox figure-image" loading="lazy" src="/cis580/images/basic-3d-4.1.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-78782c714d6aa80d86cd90844ca6279b"><img alt="Rendered Cube" class="border lazy lightbox lightbox-image" loading="lazy" src="/cis580/images/basic-3d-4.1.png"></a></p>
<p>Let&rsquo;s set our viewpoint rotating around the cube by refactoring our <code>Cube.Update()</code> method:</p>
<div class="highlight" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Updates the Cube</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;gameTime&#34;&gt;&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> Update(GameTime gameTime)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">float</span> angle = (<span style="color:#66d9ef">float</span>)gameTime.TotalGameTime.TotalSeconds;
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Look at the cube from farther away while spinning around it</span>
</span></span><span style="display:flex;"><span>        effect.View = Matrix.CreateRotationY(angle) * Matrix.CreateLookAt(
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> Vector3(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">5</span>, -<span style="color:#ae81ff">10</span>),
</span></span><span style="display:flex;"><span>            Vector3.Zero,
</span></span><span style="display:flex;"><span>            Vector3.Up
</span></span><span style="display:flex;"><span>        ); 
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div>
<p>Now our cube appears to be spinning!  But actually, it is our vantage point that is circling the cube, unlike the triangle, which is actually spinning in place.  The final effect is the same, but one spin is applied to the world transform, and the other to the view transform.  We&rsquo;ll speak about both in more detail later.</p>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
      
      
      
    </div>
    <script src="/cis580/js/clipboard/clipboard.min.js?1755628803" defer></script>
    <script src="/cis580/js/perfect-scrollbar/perfect-scrollbar.min.js?1755628803" defer></script>
    <script src="/cis580/js/theme.min.js?1755628803" defer></script>
      
      
      
    </div> 
  <script src="/cis580/js/tele-scroll.min.js?1755628803" defer></script>
  </body>
</html>
