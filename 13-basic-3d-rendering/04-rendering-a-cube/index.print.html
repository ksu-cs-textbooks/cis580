




	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.117.0">
    <meta name="generator" content="Relearn 5.18.0">
    <meta name="description" content="K-State CIS 580 Textbook">
    <meta name="author" content="Nathan H. Bean">
    <title>Rendering a Cube :: K-State CIS 580 Textbook</title>
    <link href="https://ksu-cs-textbooks.github.io/cis580/13-basic-3d-rendering/04-rendering-a-cube/index.html" rel="canonical" type="text/html" title="Rendering a Cube :: K-State CIS 580 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis580/13-basic-3d-rendering/04-rendering-a-cube/index.xml" rel="alternate" type="application/rss+xml" title="Rendering a Cube :: K-State CIS 580 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis580/13-basic-3d-rendering/04-rendering-a-cube/tele.html" rel="alternate" type="text/html" title="Rendering a Cube :: K-State CIS 580 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis580/13-basic-3d-rendering/04-rendering-a-cube/embed.html" rel="alternate" type="text/html" title="Rendering a Cube :: K-State CIS 580 Textbook">
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/fontawesome-all.min.css?1691771331" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis580/css/fontawesome-all.min.css?1691771331" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/nucleus.css?1691771331" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/auto-complete.css?1691771331" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis580/css/auto-complete.css?1691771331" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/perfect-scrollbar.min.css?1691771331" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/fonts.css?1691771331" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis580/css/fonts.css?1691771331" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/theme.css?1691771331" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/theme-auto.css?1691771331" rel="stylesheet" id="variant-style">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/variant.css?1691771331" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/print.css?1691771331" rel="stylesheet" media="print">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/format-print.css?1691771331" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/ie.css?1691771331" rel="stylesheet">
    <script src="https://ksu-cs-textbooks.github.io/cis580/js/url.js?1691771331"></script>
    <script src="https://ksu-cs-textbooks.github.io/cis580/js/variant.js?1691771331"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      window.index_js_url="https://ksu-cs-textbooks.github.io/cis580/index.search.js";
      var root_url="https://ksu-cs-textbooks.github.io/cis580/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      window.T_No_results_found = 'No results found for \u0022{0}\u0022';
      window.T_N_results_found = '{1} results found for \u0022{0}\u0022';
      // some further base stuff
      var baseUriFull='https:\/\/ksu-cs-textbooks.github.io\/cis580/';
      window.variants && variants.init( [ 'auto', 'light-theme', 'dark-theme' ] );
    </script>
    
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/custom.css?1691771331" rel="stylesheet">

  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="https://ksu-cs-textbooks.github.io/cis580/13-basic-3d-rendering/04-rendering-a-cube/index.html">
    <div id="body" class="default-animation">
      <div id="sidebar-overlay"></div>
      <div id="toc-overlay"></div>
      <nav id="topbar" class="highlightable">
        <div>
          <div id="top-tele-link">
            <a class="print-link" title='Teleprompter View' href="https://ksu-cs-textbooks.github.io/cis580/13-basic-3d-rendering/04-rendering-a-cube/tele.html">
              <i class="fas fa-tv fa-fw"></i>
            </a>
          </div>
          <div id="top-embed-link">
            <a class="print-link" title='Embeddable Version' href="https://ksu-cs-textbooks.github.io/cis580/13-basic-3d-rendering/04-rendering-a-cube/embed.html">
              <i class="fas fa-expand-arrows-alt fa-fw"></i>
            </a>
          </div>
          <div id="breadcrumbs">
            <span id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" class="topbar-link" title='Menu (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a>
            </span>
            <ol class="links" itemscope itemtype="http://schema.org/BreadcrumbList">
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="https://ksu-cs-textbooks.github.io/cis580/index.html"><span itemprop="name">CIS 580: Foundations of Game Programming</span></a><meta itemprop="position" content="1"> &gt; </li>
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="https://ksu-cs-textbooks.github.io/cis580/13-basic-3d-rendering/index.html"><span itemprop="name">Basic 3D Rendering</span></a><meta itemprop="position" content="2"> &gt; </li>
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Rendering a Cube</span><meta itemprop="position" content="3"></li>
            </ol>
          </div>
        </div>
      </nav>
      <main id="body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>
<h1 id="rendering-a-cube">Rendering a Cube</h1>

<p>We&rsquo;ll continue our exploration of the rendering pipeline with another shape - a cube.  And as before, we&rsquo;ll introduce another concept - <em>vertex</em> and <em>index buffers</em>.</p>
<p>For our triangle and quad, we drew our shapes using <code>GraphicsDevice.DrawUserPrimitives&lt;T&gt;()</code> and <code>GraphicsDevice.DrawUserIndexedPrimitives&lt;T&gt;()</code>.   Our <code>vertices</code> and <code>indices</code> were simply arrays we declared normally, that we passed to the graphics card using the aforementioned methods.  As with most variables we deal with in C#, the memory used by the <code>vertices</code> and <code>indices</code> arrays was allocated from the computer&rsquo;s RAM.  When we invoked the methods, one of the tasks they do is stream the data to the GPU, so that it can be rendered.</p>
<p>This process can be significantly sped up if, instead of storing the vertex and index data in RAM, we store it in Video Ram (VRAM).  VRAM is the memory that is a part of our graphics card.  Not surprisingly, the GPU has direct access to VRAM and can stream data from it quite quickly - more quickly than it can from RAM.  Especially if we are drawing the same shape using the same vertex and index data every frame.</p>
<p>So how do we get this data into the VRAM?  We have to create a <a href="https://www.monogame.net/documentation/?page=T_Microsoft_Xna_Framework_Graphics_VertexBuffer" target="_blank">VertexBuffer</a>
 and an <a href="https://www.monogame.net/documentation/?page=T_Microsoft_Xna_Framework_Graphics_IndexBuffer" target="_blank">IndexBuffer</a>
.  Let&rsquo;s create a <code>Cube</code> class with instances of these classes.</p>
<h2 id="defining-the-cube-class">Defining the Cube Class</h2>
<p>We&rsquo;ll declare a <code>Cube</code> class much like our <code>Triangle</code> and <code>Quad</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A class for rendering a cube</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Cube</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The vertices of the cube</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    VertexBuffer vertices;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The vertex indices of the cube</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    IndexBuffer indices;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The effect to use rendering the cube</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    BasicEffect effect;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The game this cube belongs to </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    Game game;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><p>The only real difference at this point is the use of a <code>VertexBuffer</code> and <code>IndexBuffer</code> as fields.</p>
<h3 id="creating-the-vertex-buffer">Creating the Vertex Buffer</h3>
<p>We need to create the vertex data in much the same way we did with our other shapes - we start with a collection of vertices (we&rsquo;ll use an array again, and give our vertices colors), but then we&rsquo;ll copy that data <em>into</em> the <code>VertexBuffer</code>, which effectively copies it into VRAM (if space is available).  Once again we&rsquo;ll wrap this in an initialization method:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Initialize the vertex buffer</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> InitializeVertices()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> vertexData = <span style="color:#66d9ef">new</span> VertexPositionColor[] { 
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> VertexPositionColor() { Position = <span style="color:#66d9ef">new</span> Vector3(-<span style="color:#ae81ff">3</span>,  <span style="color:#ae81ff">3</span>, -<span style="color:#ae81ff">3</span>), Color = Color.Blue },
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> VertexPositionColor() { Position = <span style="color:#66d9ef">new</span> Vector3( <span style="color:#ae81ff">3</span>,  <span style="color:#ae81ff">3</span>, -<span style="color:#ae81ff">3</span>), Color = Color.Green },
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> VertexPositionColor() { Position = <span style="color:#66d9ef">new</span> Vector3(-<span style="color:#ae81ff">3</span>, -<span style="color:#ae81ff">3</span>, -<span style="color:#ae81ff">3</span>), Color = Color.Red },
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> VertexPositionColor() { Position = <span style="color:#66d9ef">new</span> Vector3( <span style="color:#ae81ff">3</span>, -<span style="color:#ae81ff">3</span>, -<span style="color:#ae81ff">3</span>), Color = Color.Cyan },
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> VertexPositionColor() { Position = <span style="color:#66d9ef">new</span> Vector3(-<span style="color:#ae81ff">3</span>,  <span style="color:#ae81ff">3</span>,  <span style="color:#ae81ff">3</span>), Color = Color.Blue },
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> VertexPositionColor() { Position = <span style="color:#66d9ef">new</span> Vector3( <span style="color:#ae81ff">3</span>,  <span style="color:#ae81ff">3</span>,  <span style="color:#ae81ff">3</span>), Color = Color.Red },
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> VertexPositionColor() { Position = <span style="color:#66d9ef">new</span> Vector3(-<span style="color:#ae81ff">3</span>, -<span style="color:#ae81ff">3</span>,  <span style="color:#ae81ff">3</span>), Color = Color.Green },
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> VertexPositionColor() { Position = <span style="color:#66d9ef">new</span> Vector3( <span style="color:#ae81ff">3</span>, -<span style="color:#ae81ff">3</span>,  <span style="color:#ae81ff">3</span>), Color = Color.Cyan }
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        vertices = <span style="color:#66d9ef">new</span> VertexBuffer(
</span></span><span style="display:flex;"><span>            game.GraphicsDevice,            <span style="color:#75715e">// The graphics device to load the buffer on </span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">typeof</span>(VertexPositionColor),    <span style="color:#75715e">// The type of the vertex data </span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">8</span>,                              <span style="color:#75715e">// The count of the vertices </span>
</span></span><span style="display:flex;"><span>            BufferUsage.None                <span style="color:#75715e">// How the buffer will be used</span>
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>        vertices.SetData&lt;VertexPositionColor&gt;(vertexData);
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>We declare our <code>vertexData</code> as an instance variable, which means once this method returns, its memory will be reclaimed.  The <code>VertexBuffer</code> constructor allocates the space needed for the data in VRAM, while the <code>VertexBuffer.SetData()</code> method what actually copies it into that location, managing the process for us.</p>
<p>If we were writing DirectX code in C++, we would need to:</p>
<ol>
<li>Allocate memory in VRAM for the buffer</li>
<li>Lock that memory location (remember, both the GPU and CPU can access VRAM at a given time)</li>
<li>Copy the bytes of the buffer into that location, and</li>
<li>Release the lock</li>
</ol>
<p>If you are interested in seeing what the equivalent code in C++ looks like, visit <a href="http://www.directxtutorial.com/Lesson.aspx?lessonid=9-4-7" target="_blank">www.directxtutorial.com</a>
.  Our vertex and index data is adapted from the cube presented there.</p>
<h3 id="creating-the-index-buffer">Creating the Index Buffer</h3>
<p>The index buffer is initialized and the data copied in the same way:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Initializes the index buffer</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> InitializeIndices()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> indexData = <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">short</span>[]
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#75715e">// Side 0</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">6</span>, <span style="color:#75715e">// Side 1</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>, <span style="color:#75715e">// Side 2</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">4</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">7</span>, <span style="color:#75715e">// Side 3 </span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">5</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">0</span>, <span style="color:#75715e">// Side 4 </span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">2</span>, <span style="color:#75715e">// Side 5 </span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">6</span>
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>        indices = <span style="color:#66d9ef">new</span> IndexBuffer(
</span></span><span style="display:flex;"><span>            game.GraphicsDevice,            <span style="color:#75715e">// The graphics device to use</span>
</span></span><span style="display:flex;"><span>            IndexElementSize.SixteenBits,   <span style="color:#75715e">// The size of the index </span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">36</span>,                             <span style="color:#75715e">// The count of the indices</span>
</span></span><span style="display:flex;"><span>            BufferUsage.None                <span style="color:#75715e">// How the buffer will be used</span>
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>        indices.SetData&lt;<span style="color:#66d9ef">short</span>&gt;(indexData);
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><h3 id="initializing-the-effect">Initializing the Effect</h3>
<p>And our <code>BasicEffect</code> is configured identically to how we di so for our <code>Triangle</code> class:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Initializes the BasicEffect to render our cube</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> InitializeEffect()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        effect = <span style="color:#66d9ef">new</span> BasicEffect(game.GraphicsDevice);
</span></span><span style="display:flex;"><span>        effect.World = Matrix.Identity;
</span></span><span style="display:flex;"><span>        effect.View = Matrix.CreateLookAt(
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> Vector3(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">4</span>), <span style="color:#75715e">// The camera position</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> Vector3(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>), <span style="color:#75715e">// The camera target,</span>
</span></span><span style="display:flex;"><span>            Vector3.Up            <span style="color:#75715e">// The camera up vector</span>
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>        effect.Projection = Matrix.CreatePerspectiveFieldOfView(
</span></span><span style="display:flex;"><span>            MathHelper.PiOver4,                         <span style="color:#75715e">// The field-of-view </span>
</span></span><span style="display:flex;"><span>            game.GraphicsDevice.Viewport.AspectRatio,   <span style="color:#75715e">// The aspect ratio</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">0.1f</span>, <span style="color:#75715e">// The near plane distance </span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">100.0f</span> <span style="color:#75715e">// The far plane distance</span>
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>        effect.VertexColorEnabled = <span style="color:#66d9ef">true</span>;     
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><h3 id="drawing-the-cube">Drawing the Cube</h3>
<p>Our <code>cube.Draw()</code> method will be a bit different though:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Draws the Cube</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> Draw()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// apply the effect </span>
</span></span><span style="display:flex;"><span>        effect.CurrentTechnique.Passes[<span style="color:#ae81ff">0</span>].Apply();
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// set the vertex buffer</span>
</span></span><span style="display:flex;"><span>        game.GraphicsDevice.SetVertexBuffer(vertices);
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// set the index buffer</span>
</span></span><span style="display:flex;"><span>        game.GraphicsDevice.Indices = indices;
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Draw the triangles</span>
</span></span><span style="display:flex;"><span>        game.GraphicsDevice.DrawIndexedPrimitives(
</span></span><span style="display:flex;"><span>            PrimitiveType.TriangleList, <span style="color:#75715e">// Tye type to draw</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">0</span>,                          <span style="color:#75715e">// The first vertex to use</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">0</span>,                          <span style="color:#75715e">// The first index to use</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">12</span>                          <span style="color:#75715e">// the number of triangles to draw</span>
</span></span><span style="display:flex;"><span>        );
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>Before we can use <a href="https://www.monogame.net/documentation/?page=M_Microsoft_Xna_Framework_Graphics_GraphicsDevice_DrawIndexedPrimitives" target="_blank">GraphicsDevice.DrawIndexedPrimitives()</a>
, we need to tell the <code>GraphicsDevice</code> which <code>VertexBuffer</code> and <code>IndexBuffer</code> to use.  The first is set with a method, the second through assignment.  With both set, we can invoke <code>GraphicsDevice.DrawIndexedPrimitives()</code> and it will draw the contents of the buffers.</p>
<h3 id="constructing-the-cube">Constructing the Cube</h3>
<p>The <code>Cube</code> constructor is back in familiar territory:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Constructs a cube instance</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;game&#34;&gt;The game that is creating the cube&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> Cube(Game1 game)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.game = game;
</span></span><span style="display:flex;"><span>        InitializeVertices();
</span></span><span style="display:flex;"><span>        InitializeIndices();
</span></span><span style="display:flex;"><span>        InitializeEffect();
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><h2 id="adding-the-cube-to-game1">Adding the Cube to Game1</h2>
<p>To render our cube, we must go back to the <code>Game1</code> class and add a reference to one:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">// The cube to draw </span>
</span></span><span style="display:flex;"><span>    Cube cube;</span></span></code></pre></div><p>Construct it in the <code>Game1.LoadContent()</code> method:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">// Create the cube</span>
</span></span><span style="display:flex;"><span>    cube = <span style="color:#66d9ef">new</span> Cube(<span style="color:#66d9ef">this</span>);</span></span></code></pre></div><p>And draw it in the <code>Game1.Draw()</code> method:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">// draw the cube</span>
</span></span><span style="display:flex;"><span>    cube.Draw();</span></span></code></pre></div><p>If you run your code now, the cube is so big that the front face takes up the whole screen!</p>
<h2 id="changing-the-view-matrix">Changing the View Matrix</h2>
<p>We could scale our cube down with a world transform - but rather than doing that, let&rsquo;s look at it from farther away by changing the view transform.  Let&rsquo;s add an <code>Update()</code> method to our <code>Cube</code> class:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Updates the Cube</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;gameTime&#34;&gt;&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> Update(GameTime gameTime)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Look at the cube from farther away</span>
</span></span><span style="display:flex;"><span>        effect.View = Matrix.CreateLookAt(
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> Vector3(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">5</span>, -<span style="color:#ae81ff">10</span>),
</span></span><span style="display:flex;"><span>            Vector3.Zero,
</span></span><span style="display:flex;"><span>            Vector3.Up
</span></span><span style="display:flex;"><span>        ); 
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>And invoke this method in the <code>Game1.Update()</code> method:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">// update the cube </span>
</span></span><span style="display:flex;"><span>    cube.Update(gameTime);</span></span></code></pre></div><p>Now if you run the program, you should see the cube, and be able to see that its edges are distorted to simulate depth:</p>
<p>
<a href="#image-634fb7f4b2e740be6c6f94d69f395c4c" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis580/images/basic-3d-4.1.png" alt="Rendered Cube" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-634fb7f4b2e740be6c6f94d69f395c4c">
<img src="https://ksu-cs-textbooks.github.io/cis580/images/basic-3d-4.1.png" alt="Rendered Cube" class="lightbox-image" loading="lazy">
</a></p>
<p>Let&rsquo;s set our viewpoint rotating around the cube by refactoring our <code>Cube.Update()</code> method:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Updates the Cube</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;gameTime&#34;&gt;&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> Update(GameTime gameTime)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">float</span> angle = (<span style="color:#66d9ef">float</span>)gameTime.TotalGameTime.TotalSeconds;
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Look at the cube from farther away while spinning around it</span>
</span></span><span style="display:flex;"><span>        effect.View = Matrix.CreateRotationY(angle) * Matrix.CreateLookAt(
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">new</span> Vector3(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">5</span>, -<span style="color:#ae81ff">10</span>),
</span></span><span style="display:flex;"><span>            Vector3.Zero,
</span></span><span style="display:flex;"><span>            Vector3.Up
</span></span><span style="display:flex;"><span>        ); 
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>Now our cube appears to be spinning!  But actually, it is our vantage point that is circling the cube, unlike the triangle, which is actually spinning in place.  The final effect is the same, but one spin is applied to the world transform, and the other to the view transform.  We&rsquo;ll speak about both in more detail later.</p>

            <footer class="footline">

            </footer>
          </article>


        </div>
      </main>
    
<div class="git-footer">
<p class="theme-version-footer">5.18.0</p>
<p>Last modified by: 
            <i class='fas fa-user'></i> Russell Feldhausen
            <i class='fas fa-calendar'></i> <a href="https://gitlab.cs.ksu.edu/cs-textbooks/cis580-textbook/-/commit/43f194969a638fa4572819da4b31060ad574a9ce">Aug 11, 2023</a>
</p>
</div>

    
    </div>
    <script src="https://ksu-cs-textbooks.github.io/cis580/js/clipboard.min.js?1691771332" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis580/js/perfect-scrollbar.min.js?1691771332" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis580/js/theme.js?1691771332" defer></script>
  </body>
</html>
