




	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.117.0">
    <meta name="generator" content="Relearn 5.18.0">
    <meta name="description" content="K-State CIS 580 Textbook">
    <meta name="author" content="Nathan H. Bean">
    <title>Game Screens :: K-State CIS 580 Textbook</title>
    <link href="https://ksu-cs-textbooks.github.io/cis580/07-game-architecture/04-game-screens/index.html" rel="canonical" type="text/html" title="Game Screens :: K-State CIS 580 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis580/07-game-architecture/04-game-screens/index.xml" rel="alternate" type="application/rss+xml" title="Game Screens :: K-State CIS 580 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis580/07-game-architecture/04-game-screens/index.print.html" rel="alternate" type="text/html" title="Game Screens :: K-State CIS 580 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis580/07-game-architecture/04-game-screens/embed.html" rel="alternate" type="text/html" title="Game Screens :: K-State CIS 580 Textbook">
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/fontawesome-all.min.css?1692031300" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis580/css/fontawesome-all.min.css?1692031300" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/nucleus.css?1692031300" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/auto-complete.css?1692031300" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis580/css/auto-complete.css?1692031300" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/perfect-scrollbar.min.css?1692031300" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/fonts.css?1692031300" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis580/css/fonts.css?1692031300" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/theme.css?1692031300" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/theme-auto.css?1692031300" rel="stylesheet" id="variant-style">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/variant.css?1692031300" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/print.css?1692031300" rel="stylesheet" media="print">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/ie.css?1692031300" rel="stylesheet">
    <script src="https://ksu-cs-textbooks.github.io/cis580/js/url.js?1692031300"></script>
    <script src="https://ksu-cs-textbooks.github.io/cis580/js/variant.js?1692031300"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      window.index_js_url="https://ksu-cs-textbooks.github.io/cis580/index.search.js";
      var root_url="https://ksu-cs-textbooks.github.io/cis580/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      window.T_No_results_found = 'No results found for \u0022{0}\u0022';
      window.T_N_results_found = '{1} results found for \u0022{0}\u0022';
      // some further base stuff
      var baseUriFull='https:\/\/ksu-cs-textbooks.github.io\/cis580/';
      window.variants && variants.init( [ 'auto', 'light-theme', 'dark-theme' ] );
    </script>
    
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/custom.css?1692031300" rel="stylesheet">

  </head>
  <body class="mobile-support tele disableInlineCopyToClipboard" data-url="https://ksu-cs-textbooks.github.io/cis580/07-game-architecture/04-game-screens/index.html">
    
    <div id="tele" class="tele mirror">
    
    <div id="body" class="default-animation">
      
      
      
      <main id="body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>
<h1 id="game-screens">Game Screens</h1>

<p>XNA offered a sample building with these ideas that further organized a game into <em>screens</em> that has been <a href="https://github.com/tomizechsterson/game-state-management-monogame" target="_blank">ported to MonoGame</a>
.This was heavily influenced by Windows Phone, and includes gestures and &ldquo;tombstoning&rdquo; support.  A more simplified form is presented here.  It organizes a game into &ldquo;screens&rdquo;, each with its own logic and rendering, such as a menu, puzzle, cutscene, etc.</p>
<p>A scene manager game component manages a stack of these screens, and updates and renders the topmost.  Thus, from a gameplay screen, if we trigger a cutscene it would be pushed onto the stack, play, and then pop itself from the stack.  Similarly, pressing the &ldquo;menu&rdquo; button would push the menu screen onto the stack, leaving the player to interact with the menu instead of the game.  Screens manage their transition on and off this stack - and can incorporate visual effects into the transition.</p>
<h3 id="screenstate-enum">ScreenState Enum</h3>
<p>This enumeration represents the states a GameScreen can be in.</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// Enumerations of the possible screen states</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">enum</span> ScreenState
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    TransitionOn,
</span></span><span style="display:flex;"><span>    Active,
</span></span><span style="display:flex;"><span>    TransitionOff,
</span></span><span style="display:flex;"><span>    Hidden
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><h3 id="gamescreen">GameScreen</h3>
<p>The <code>GameScreen</code> class is an abstract base class that represents a single screen.</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// A screen is a single layer of game content that has</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// its own update and draw logic and can be combined </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// with other layers to create complex menus or game</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// experiences</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">GameScreen</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Indicates if this screen is a popup</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;remarks&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Normally when a new screen is brought over another, </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// the covered screen will transition off.  However, this</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// bool indicates the covering screen is only a popup, and </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// the covered screen will remain partially visible</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/remarks&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">bool</span> IsPopup { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The amount of time taken for this screen to transition on</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> TimeSpan TransitionOnTime {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;} = TimeSpan.Zero;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The amount of time taken for this screen to transition off</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> TimeSpan TransitionOffTime {<span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>;} = TimeSpan.Zero;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The screen&#39;s position in the transition</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;value&gt;Ranges from 0 to 1 (fully on to fully off)&lt;/value&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">float</span> TransitionPosition { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; } = <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The alpha value based on the current transition position</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">float</span> TransitionAlpha =&gt; <span style="color:#ae81ff">1f</span> - TransitionPosition;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The current state of the screen</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> ScreenState ScreenState { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; } = ScreenState.TransitionOn;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Indicates the screen is exiting for good (not simply obscured)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;remarks&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// There are two possible reasons why a screen might be transitioning</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// off. It could be temporarily going away to make room for another</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// screen that is on top of it, or it could be going away for good.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// This property indicates whether the screen is exiting for real:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// if set, the screen will automatically remove itself as soon as the</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// transition finishes.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/remarks&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">bool</span> IsExiting { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">internal</span> <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Indicates if this screen is active</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">bool</span> IsActive =&gt; !_otherScreenHasFocus &amp;&amp; (
</span></span><span style="display:flex;"><span>        ScreenState == ScreenState.TransitionOn ||
</span></span><span style="display:flex;"><span>        ScreenState == ScreenState.Active);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">bool</span> _otherScreenHasFocus;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// The ScreenManager in charge of this screen</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> ScreenManager ScreenManager { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">internal</span> <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Gets the index of the player who is currently controlling this screen,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// or null if it is accepting input from any player. </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;remarks&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// This is used to lock the game to a specific player profile. The main menu </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// responds to input from any connected gamepad, but whichever player makes </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// a selection from this menu is given control over all subsequent screens, </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// so other gamepads are inactive until the controlling player returns to the </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// main menu.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/remarks&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> PlayerIndex? ControllingPlayer { <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Activates the screen.  Called when the screen is added to the screen manager </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// or the game returns from being paused.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> Activate() { }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Deactivates the screen.  Called when the screen is removed from the screen manager </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// or when the game is paused.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> Deactivate() { }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Unloads content for the screen. Called when the screen is removed from the screen manager</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> Unload() { }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Updates the screen. Unlike HandleInput, this method is called regardless of whether the screen</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// is active, hidden, or in the middle of a transition.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> Update(GameTime gameTime, <span style="color:#66d9ef">bool</span> otherScreenHasFocus, <span style="color:#66d9ef">bool</span> coveredByOtherScreen)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        _otherScreenHasFocus = otherScreenHasFocus;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (IsExiting)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// If the screen is going away forever, it should transition off</span>
</span></span><span style="display:flex;"><span>            ScreenState = ScreenState.TransitionOff;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (!UpdateTransitionPosition(gameTime, TransitionOffTime, <span style="color:#ae81ff">1</span>))
</span></span><span style="display:flex;"><span>                ScreenManager.RemoveScreen(<span style="color:#66d9ef">this</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span>(coveredByOtherScreen)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// if the screen is covered by another, it should transition off</span>
</span></span><span style="display:flex;"><span>            ScreenState = UpdateTransitionPosition(gameTime, TransitionOffTime, <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>                ? ScreenState.TransitionOff
</span></span><span style="display:flex;"><span>                : ScreenState.Hidden;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Otherwise the screen should transition on and become active.</span>
</span></span><span style="display:flex;"><span>            ScreenState = UpdateTransitionPosition(gameTime, TransitionOnTime, -<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>                ? ScreenState.TransitionOn
</span></span><span style="display:flex;"><span>                : ScreenState.Active;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Updates the TransitionPosition property based on the time</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;gameTime&#34;&gt;an object representing time in the game&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;time&#34;&gt;The amount of time the transition should take&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;direction&#34;&gt;The direction of the transition&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;returns&gt;true if still transitioning, false if the transition is done&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">bool</span> UpdateTransitionPosition(GameTime gameTime, TimeSpan time, <span style="color:#66d9ef">int</span> direction)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// How much should we move by?</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">float</span> transitionDelta = (time == TimeSpan.Zero)
</span></span><span style="display:flex;"><span>            ? <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>            : (<span style="color:#66d9ef">float</span>)(gameTime.ElapsedGameTime.TotalMilliseconds / time.TotalMilliseconds);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Update the transition time</span>
</span></span><span style="display:flex;"><span>        TransitionPosition += transitionDelta * direction;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Did we reach the end of the transition?</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(direction &lt; <span style="color:#ae81ff">0</span> &amp;&amp; TransitionPosition &lt;= <span style="color:#ae81ff">0</span> || direction &gt; <span style="color:#ae81ff">0</span> &amp;&amp; TransitionPosition &gt;= <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            TransitionPosition = MathHelper.Clamp(TransitionPosition, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// if not, we are still transitioning</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Handles input for this screen.  Only called when the screen is active,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// and not when another screen has taken focus.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;gameTime&#34;&gt;An object representing time in the game&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;input&#34;&gt;An object representing input&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> HandleInput(GameTime gameTime, InputState input) { }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Draws the GameScreen.  Only called with the screen is active, and not </span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// when another screen has taken the focus.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;gameTime&#34;&gt;An object representing time in the game&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> Draw(GameTime gameTime) { }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// This method tells the screen to exit, allowing it time to transition off</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> ExitScreen()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (TransitionOffTime == TimeSpan.Zero)
</span></span><span style="display:flex;"><span>            ScreenManager.RemoveScreen(<span style="color:#66d9ef">this</span>);    <span style="color:#75715e">// If the screen has a zero transition time, remove it immediately</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>            IsExiting = <span style="color:#66d9ef">true</span>;    <span style="color:#75715e">// Otherwise flag that it should transition off and then exit.</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><h4 id="screenmanager">ScreenManager</h4>
<p>The <code>ScreenManager</code> class manages the screens, updating and drawing only when appropriate.</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// The ScreenManager is a component which manages one or more GameScreen instance.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// It maintains a stack of screens, calls their Update and Draw methods when </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// appropriate, and automatically routes input to the topmost screen.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ScreenManager</span> : DrawableGameComponent
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">readonly</span> List&lt;GameScreen&gt; _screens = <span style="color:#66d9ef">new</span> List&lt;GameScreen&gt;();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">readonly</span> List&lt;GameScreen&gt; _tmpScreensList = <span style="color:#66d9ef">new</span> List&lt;GameScreen&gt;();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">readonly</span> ContentManager _content;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">readonly</span> InputState _input = <span style="color:#66d9ef">new</span> InputState();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">bool</span> _isInitialized;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// A SpriteBatch shared by all GameScreens</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> SpriteBatch SpriteBatch { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// A SpriteFont shared by all GameScreens</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> SpriteFont MenuFont { <span style="color:#66d9ef">get</span>; <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">set</span>; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Constructs a new ScreenManager</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;game&#34;&gt;The game this ScreenManager belongs to&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> ScreenManager(Game game) : <span style="color:#66d9ef">base</span>(game) 
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        _content = <span style="color:#66d9ef">new</span> ContentManager(game.Services, <span style="color:#e6db74">&#34;Content&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Initializes the ScreenManager</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">void</span> Initialize()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">base</span>.Initialize();
</span></span><span style="display:flex;"><span>        _isInitialized = <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Loads content for the ScreenManager and its screens</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">void</span> LoadContent()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        SpriteBatch = <span style="color:#66d9ef">new</span> SpriteBatch(GraphicsDevice);
</span></span><span style="display:flex;"><span>        MenuFont = _content.Load&lt;SpriteFont&gt;(<span style="color:#e6db74">&#34;MenuFont&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Tell each of the screens to load thier content </span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">foreach</span>(<span style="color:#66d9ef">var</span> screen <span style="color:#66d9ef">in</span> _screens)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            screen.Activate();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Unloads content for the ScreenManager&#39;s screens</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">void</span> UnloadContent()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">foreach</span>(<span style="color:#66d9ef">var</span> screen <span style="color:#66d9ef">in</span> _screens)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            screen.Unload();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Updates all screens managed by the ScreenManager</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;gameTime&#34;&gt;An object representing time in the game&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">void</span> Update(GameTime gameTime)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Read in the keyboard and gamepad</span>
</span></span><span style="display:flex;"><span>        _input.Update();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Make a copy of the screen list, to avoid confusion if </span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// the process of updating a screen adds or removes others</span>
</span></span><span style="display:flex;"><span>        _tmpScreensList.Clear();
</span></span><span style="display:flex;"><span>        _tmpScreensList.AddRange(_screens);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">bool</span> otherScreenHasFocus = !Game.IsActive;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">bool</span> coveredByOtherScreen = <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">while</span>(_tmpScreensList.Count &gt; <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// Pop the topmost screen </span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">var</span> screen = _tmpScreensList[_tmpScreensList.Count - <span style="color:#ae81ff">1</span>];
</span></span><span style="display:flex;"><span>            _tmpScreensList.RemoveAt(_tmpScreensList.Count - <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            screen.Update(gameTime, otherScreenHasFocus, coveredByOtherScreen);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (screen.ScreenState == ScreenState.TransitionOn || screen.ScreenState == ScreenState.Active)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// if this is the first active screen, let it handle input </span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> (!otherScreenHasFocus)
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                    screen.HandleInput(gameTime, _input);
</span></span><span style="display:flex;"><span>                    otherScreenHasFocus = <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// if this is an active non-popup, all subsequent </span>
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// screens are covered </span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> (!screen.IsPopup) coveredByOtherScreen = <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Draws the appropriate screens managed by the SceneManager</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;gameTime&#34;&gt;An object representing time in the game&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">void</span> Draw(GameTime gameTime)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">foreach</span>(<span style="color:#66d9ef">var</span> screen <span style="color:#66d9ef">in</span> _screens)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (screen.ScreenState == ScreenState.Hidden) <span style="color:#66d9ef">continue</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            screen.Draw(gameTime);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Adds a screen to the ScreenManager</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;param name=&#34;screen&#34;&gt;The screen to add&lt;/param&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> AddScreen(GameScreen screen)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        screen.ScreenManager = <span style="color:#66d9ef">this</span>;
</span></span><span style="display:flex;"><span>        screen.IsExiting = <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// If we have a graphics device, tell the screen to load content</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (_isInitialized) screen.Activate();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        _screens.Add(screen);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> RemoveScreen(GameScreen screen)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// If we have a graphics device, tell the screen to unload its content </span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (_isInitialized) screen.Unload();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        _screens.Remove(screen);
</span></span><span style="display:flex;"><span>        _tmpScreensList.Remove(screen);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// Exposes an array holding all the screens managed by the ScreenManager</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;/summary&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/// &lt;returns&gt;An array containing references to all current screens&lt;/returns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> GameScreen[] GetScreens()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> _screens.ToArray();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div><h3 id="other-changes">Other Changes</h3>
<p>This sample also uses the <code>InputState</code> class <a href="https://ksu-cs-textbooks.github.io/cis580/02-player-input/07-input-state/">introduced in chapter 7</a>
.  In your game class, you need to create the <code>ScreenManager</code>, and then add your custom screen classes, which can be done in your constructor or <code>Initialize()</code> method:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#66d9ef">var</span> screenManager = <span style="color:#66d9ef">new</span> ScreenManager(<span style="color:#66d9ef">this</span>);
</span></span><span style="display:flex;"><span>screenManager.AddScreen(<span style="color:#66d9ef">new</span> ExampleScreenA());
</span></span><span style="display:flex;"><span>screenManager.AddScreen(<span style="color:#66d9ef">new</span> ExampleScreenB());
</span></span><span style="display:flex;"><span>...</span></span></code></pre></div><p>Once added, the screen&rsquo;s <code>Initialize</code>, <code>LoadContent()</code>, <code>Update()</code>, and <code>Draw()</code> methods will all be invoked automatically as appropriate by the <code>Game</code> class.</p>
<p>It might also make sense to register the <code>ScreenManager</code> as a service, especially if you expect to add additional screens as the game is running:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span><span style="color:#75715e">// From within your Game class</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">this</span>.Services.AddService(<span style="color:#66d9ef">typeof</span>(ScreenManager), screenManager);</span></span></code></pre></div><p>Screens can be added at any time, which pushes them to the top of the stack - a common use would be to open a menu or submenu.</p>
<p>You can also stack as many screens as you like at the start of the game - you might arrange a multilevel game this way:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>screenManager.AddScreen(<span style="color:#66d9ef">new</span> CreditsScreen());
</span></span><span style="display:flex;"><span>screenManager.AddScreen(<span style="color:#66d9ef">new</span> Level8Screen());
</span></span><span style="display:flex;"><span>screenManager.AddScreen(<span style="color:#66d9ef">new</span> Level7Screen());
</span></span><span style="display:flex;"><span>screenManager.AddScreen(<span style="color:#66d9ef">new</span> Level6Screen());
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>screenManager.AddScreen(<span style="color:#66d9ef">new</span> Level1Screen());
</span></span><span style="display:flex;"><span>screenManager.AddScreen(<span style="color:#66d9ef">new</span> OpeningScreen());</span></span></code></pre></div><p>And invoke each screen&rsquo;s <code>ExitScreen()</code> when the level is completed.</p>

            <footer class="footline">

            </footer>
          </article>
        </div>
      </main>
    </div>
    
    </div>
    
    
    
    
    <script src="https://ksu-cs-textbooks.github.io/cis580/js/clipboard.min.js?1692031300" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis580/js/perfect-scrollbar.min.js?1692031300" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis580/js/theme.js?1692031300" defer></script>
    
    <script src="https://ksu-cs-textbooks.github.io/cis580/js/tele-scroll.js?1692031300 defer"></script>
    
  </body>
</html>
