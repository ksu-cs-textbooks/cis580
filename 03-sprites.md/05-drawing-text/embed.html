




	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.117.0">
    <meta name="generator" content="Relearn 5.18.0">
    <meta name="description" content="K-State CIS 580 Textbook">
    <meta name="author" content="Nathan H. Bean">
    <title>Sprite Text :: K-State CIS 580 Textbook</title>
    <link href="https://ksu-cs-textbooks.github.io/cis580/03-sprites.md/05-drawing-text/index.html" rel="canonical" type="text/html" title="Sprite Text :: K-State CIS 580 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis580/03-sprites.md/05-drawing-text/index.xml" rel="alternate" type="application/rss+xml" title="Sprite Text :: K-State CIS 580 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis580/03-sprites.md/05-drawing-text/index.print.html" rel="alternate" type="text/html" title="Sprite Text :: K-State CIS 580 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis580/03-sprites.md/05-drawing-text/tele.html" rel="alternate" type="text/html" title="Sprite Text :: K-State CIS 580 Textbook">
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/fontawesome-all.min.css?1691771330" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis580/css/fontawesome-all.min.css?1691771330" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/nucleus.css?1691771330" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/auto-complete.css?1691771330" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis580/css/auto-complete.css?1691771330" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/perfect-scrollbar.min.css?1691771330" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/fonts.css?1691771330" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis580/css/fonts.css?1691771330" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/theme.css?1691771330" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/theme-auto.css?1691771330" rel="stylesheet" id="variant-style">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/variant.css?1691771330" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/print.css?1691771330" rel="stylesheet" media="print">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/ie.css?1691771330" rel="stylesheet">
    <script src="https://ksu-cs-textbooks.github.io/cis580/js/url.js?1691771330"></script>
    <script src="https://ksu-cs-textbooks.github.io/cis580/js/variant.js?1691771330"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      window.index_js_url="https://ksu-cs-textbooks.github.io/cis580/index.search.js";
      var root_url="https://ksu-cs-textbooks.github.io/cis580/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      window.T_No_results_found = 'No results found for \u0022{0}\u0022';
      window.T_N_results_found = '{1} results found for \u0022{0}\u0022';
      // some further base stuff
      var baseUriFull='https:\/\/ksu-cs-textbooks.github.io\/cis580/';
      window.variants && variants.init( [ 'auto', 'light-theme', 'dark-theme' ] );
    </script>
    
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/custom.css?1691771330" rel="stylesheet">

  </head>
  <body class="mobile-support embed disableInlineCopyToClipboard" data-url="https://ksu-cs-textbooks.github.io/cis580/03-sprites.md/05-drawing-text/embed.html">
    <div id="body" class="default-animation">
      
      
      
      <main id="body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
    
    
    
<p>Text in videogames is challenging.  In the early days of computing, video cards had a limited number of modes - the most common was for displaying text that was streamed to the video card as ASCII character data.  This is also how the command prompt and terminals work - they operate on streams of character data.</p>
<p>But games used <em>different</em> modes that used the limited memory of the card to supply pixel data in a variety of formats.  Notably, text support was non-existent in these modes.</p>
<p>Fast-forward to the modern day.  Now text is typically handled by the operating system and its windowing libraries.  Which are notably unusable within a DirectX rendering context.  So we still use the same techniques used in those earliest video games to render text.  Bitmap fonts.</p>
<p>A bitmap font is one in which each character is represented by a raster graphic - a bitmap.  Much like sprites, these are copied into the bitmap that is the scene.  Thus, we have to bit blit each character one at a time.  This is in contrast to the fonts used by modern operating systems, which are <em>vector</em> based.  A vector font contains the <em>instructions</em> for drawing the font characters, so it can be drawn at any scale.</p>
<p>MonoGame provides some support for drawing text through the <code>SpriteBatch</code>.  But to use this functionality, we first need to create a <code>SpriteFont</code></p>
<h2 id="spritefonts">SpriteFonts</h2>
<p>A <code>SpriteFont</code> object is similar to the sprite <code>BatSprite</code> class we worked on in the last section.  It wraps around a texture containing rendered font characters, and provides details on how to render each character.  However, we don&rsquo;t construct <code>SpriteFont</code> objects ourselves, rather we load them through the <code>ContentManager</code> and the content pipeline.</p>
<p>The content pipeline <em>creates</em> a sprite font from an existing font installed on your computer.  Essentially, it renders each needed character from the font into a texture atlas, and combines that with information about where each character is in that atlas.  To create your sprite font, choose the <em>create new item</em> from the MGCB Editor, and then select &ldquo;SpriteFont Description (.spritefont)&rdquo;:</p>
<p>
<a href="#image-f2672470b395100381749826a723d405" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis580/images/3.5.1.png" alt="Creating the sprite font in the MGCB Editor" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-f2672470b395100381749826a723d405">
<img src="https://ksu-cs-textbooks.github.io/cis580/images/3.5.1.png" alt="Creating the sprite font in the MGCB Editor" class="lightbox-image" loading="lazy">
</a></p>
<p>This will create a SpriteFont Description, which will be compiled into a <code>SpriteFont</code>.  It also adds this description into your <em>Content</em> folder.  Open it, and you will see it is nothing more than an XML file, which specifies some details of the font:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!--
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">This file contains an xml description of a font, and will be read by the XNA
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">Framework Content Pipeline. Follow the comments to customize the appearance
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">of the font in your game, and to change the characters which are available to draw
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">with.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">--&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;XnaContent</span> <span style="color:#a6e22e">xmlns:Graphics=</span><span style="color:#e6db74">&#34;Microsoft.Xna.Framework.Content.Pipeline.Graphics&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;Asset</span> <span style="color:#a6e22e">Type=</span><span style="color:#e6db74">&#34;Graphics:FontDescription&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!--
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    Modify this string to change the font that will be imported.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;FontName&gt;</span>Arial<span style="color:#f92672">&lt;/FontName&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!--
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    Size is a float value, measured in points. Modify this value to change
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    the size of the font.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Size&gt;</span>12<span style="color:#f92672">&lt;/Size&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!--
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    Spacing is a float value, measured in pixels. Modify this value to change
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    the amount of spacing in between characters.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Spacing&gt;</span>0<span style="color:#f92672">&lt;/Spacing&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!--
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    UseKerning controls the layout of the font. If this value is true, kerning information
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    will be used when placing characters.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;UseKerning&gt;</span>true<span style="color:#f92672">&lt;/UseKerning&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!--
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    Style controls the style of the font. Valid entries are &#34;Regular&#34;, &#34;Bold&#34;, &#34;Italic&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    and &#34;Bold, Italic&#34;, and are case sensitive.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;Style&gt;</span>Regular<span style="color:#f92672">&lt;/Style&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!--
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    If you uncomment this line, the default character will be substituted if you draw
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    or measure text that contains characters which were not included in the font.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!-- &lt;DefaultCharacter&gt;*&lt;/DefaultCharacter&gt; --&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!--
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    CharacterRegions control what letters are available in the font. Every
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    character from Start to End will be built and made available for drawing. The
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    default range is from 32, (ASCII space), to 126, (&#39;~&#39;), covering the basic Latin
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    character set. The characters are ordered according to the Unicode standard.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    See the documentation for more information.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;CharacterRegions&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;CharacterRegion&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;Start&gt;</span>&amp;#32;<span style="color:#f92672">&lt;/Start&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;End&gt;</span>&amp;#126;<span style="color:#f92672">&lt;/End&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;/CharacterRegion&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/CharacterRegions&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/Asset&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/XnaContent&gt;</span></span></span></code></pre></div><p>You can edit the values of the various elements to control the font, as well as attributes like size and style that will be used to create the raster representation.  Any font installed on your development machine can be used (though for uncommon fonts, it is a good idea to include the font&rsquo;s file, usually a .ttf, in your repository so you can install it on other development machines).</p>
<p>The <code>SpriteFont</code> can then be loaded with the <code>ContentManager</code>:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>SpriteFont spriteFont = Content.Load&lt;SpriteFont&gt;(<span style="color:#e6db74">&#34;name-of-spritefont&#34;</span>);</span></span></code></pre></div><p>Where the supplied string is the same name as the <em>.spritefont</em> file, without the extension.</p>
<p>Once loaded, text can be drawn to the screen with <code>SpriteBatch.DrawString(SpriteFont spriteFont, Vector2 position, Color color)</code>. There are several overrides to choose from:</p>
<ul>
<li><code>DrawString(SpriteFont spriteFont, string text, Vector2 position, Color color)</code></li>
<li><code>DrawString(SpriteFont spriteFont, string text, Vector2 position, Color color, float rotation, Vector2 origin, Vector2 scale, SpriteEffects effects, float layerDepth)</code></li>
<li><code>DrawString(SpriteFont spriteFont, string text, Vector2 position, Color color, float rotation, Vector2 origin, float scale, SpriteEffects effects, float layerDepth)</code></li>
<li><code>DrawString(SpriteFont spriteFont, StringBuilder text, Vector2 position, Color color)</code></li>
<li><code>DrawString(SpriteFont spriteFont, StringBuilder text, Vector2 position, Color color, float rotation, Vector2 origin, Vector2 scale, SpriteEffects effects, float layerDepth)</code></li>
<li><code>DrawString(SpriteFont spriteFont, StringBuilder text, Vector2 position, Color color, float rotation, Vector2 origin, float scale, SpriteEffects effects, float layerDepth)</code></li>
</ul>
<p>As with <code>SpriteBatch.Draw()</code>, we&rsquo;ll explore what the various parameters are used for, and you can select the one that matches your needs.</p>
<h4 id="spritefont-spritefont">SpriteFont spriteFont</h4>
<p>The <code>spriteFont</code> parameter is a <code>SpriteFont</code> object describing the font you want to write with.  If the <code>SpriteFont</code> has not been loaded (is null), then invoking <code>DrawText()</code> will throw an <code>ArgumentNullException</code>.</p>
<h4 id="string-text">string text</h4>
<p>The <code>text</code> parameter is the string you want to draw onto the screen.</p>
<h4 id="stringbuilder-text">StringBuilder text</h4>
<p>Optionally, a <code>StringBuilder</code> object can be supplied as the <code>text</code> parameter.</p>
<h4 id="vector2-position">Vector2 position</h4>
<p>This position specifies the upper-left hand corner of where the text will be drawn on-screen (unless the <code>origin</code> parameter is set).</p>
<h4 id="color-color">Color color</h4>
<p>The <code>color</code> parameter is a <code>Color</code> the text will be rendered in (this is actually blended as is with sprites, but the base color is white, so whatever color you choose is the color that will be displayed)</p>
<h4 id="float-rotation">float rotation</h4>
<p>The <code>rotation</code> is a rotation value measured in radians that should be applied to the text. This rotation is about the <code>origin</code> of the sprite, which is why all the overrides that specify the <code>rotation</code> also specify the <code>origin</code>.</p>
<h4 id="vector2-origin">Vector2 origin</h4>
<p>The <code>origin</code> is the spot within the text where rotations and scaling are centered.  This <em>also</em> affects text placement - the <code>position</code> vector indicates where the <code>origin</code> of the text will fall on-screen.  It is a vector measured relative to the upper-left-hand-corner of the text, in <em>texture</em> coordinates (i.e. pixels of the source texture).</p>
<h4 id="float-scale">float scale</h4>
<p>The <code>scale</code> is a scalar value to scale the text by.  For example, a value of $2.0f$ will make the text twice as big, while $0.5f$ would make it half as big.  This scaling is in relation to the <code>origin</code>, so if the origin is at the center of the text grows in all directions equally.  If instead it is at $(0,0)$, the text will grow to the right and down only.</p>
<h4 id="vector2-scale">Vector2 scale</h4>
<p>The <code>scale</code> can also be specified as a <code>Vector2</code>, which allows the horizontal and vertical scaling factors to be different.</p>
<h4 id="spriteeffects-effects">SpriteEffects effects</h4>
<p>The <code>effects</code> parameter is one of the <code>SpriteEffects</code> enum&rsquo;s values.  These are:</p>
<ul>
<li><code>SpriteEffects.None</code> - the text is drawn normally</li>
<li><code>SpriteEffects.FlipHorizontally</code> - the text is drawn with the texture flipped in the horizontal direction</li>
<li><code>SpriteEffects.FlipVertically</code> - the text is drawn with the texture flipped in the vertical direction</li>
</ul>
<p>Note you can specify both horizontal and vertical flipping with a bitwise or: <code>SpriteEffects.FlipHorizontally | SpriteEffects.FlipVertically</code></p>
<h4 id="single-layerdepth">single layerDepth</h4>
<p>The <code>layerDepth</code> is an integer that indicates which sprites should be drawn &ldquo;above&rdquo; or &ldquo;below&rdquo; others (i.e. which ones should obscure the others).  Think of it as assembling a collage.  Sprites with a higher <code>layerDepth</code> value are closer to the top, and if they share screen space with sprites with a <code>lowerDepth</code>, those sprites are obscured.</p>
<h2 id="measuring-with-spritefont">Measuring with SpriteFont</h2>
<p>Note that with <code>SpriteFont</code>, there is no way to specify the width the text should be drawn - it is entirely dependent on the font, the string to render, and any scaling factors applied.  Nor is there any automatic word wrapping.</p>
<p>However, the <code>SpriteFont</code> class does expose a method <code>SpriteFont.Measure(string text)</code> and override <code>SpriteFont.Measure(StringBuilder text)</code> which given a <code>string</code> or <code>StringBuilder</code> return a <code>Vector2</code> indicating the size at which that text would be rendered.</p>

            <footer class="footline">

            </footer>
          </article>
        </div>
      </main>
    </div>
    
    
    
    <script src="https://ksu-cs-textbooks.github.io/cis580/js/clipboard.min.js?1691771330" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis580/js/perfect-scrollbar.min.js?1691771330" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis580/js/theme.js?1691771330" defer></script>
  </body>
</html>
