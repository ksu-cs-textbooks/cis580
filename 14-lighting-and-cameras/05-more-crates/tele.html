




  
	
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
	  

  
	
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
	  

  
	
		
		
<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.128.0">
    <meta name="generator" content="Relearn 6.0.0">
    <meta name="description" content="Let’s up the ante a bit, and add multiple crates to the game.
Refactor Crate We don’t want all of our crates in the same spot, so it’s time to change our world matrix. Let’s refactor our Crate so we can pass a matrix in through the constructor:
/// &lt;summary&gt; /// Creates a new crate instance /// &lt;/summary&gt; /// &lt;param name=&#34;game&#34;&gt;The game this crate belongs to&lt;/param&gt; /// &lt;param name=&#34;type&#34;&gt;The type of crate to use&lt;/param&gt; /// &lt;param name=&#34;world&#34;&gt;The position and orientation of the crate in the world&lt;/param&gt; public Crate(Game game, CrateType type, Matrix world) { this.">
    <meta name="author" content="Nathan Bean">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="More Crates! :: K-State CIS 580 Textbook">
    <meta name="twitter:description" content="Let’s up the ante a bit, and add multiple crates to the game.
Refactor Crate We don’t want all of our crates in the same spot, so it’s time to change our world matrix. Let’s refactor our Crate so we can pass a matrix in through the constructor:
/// &lt;summary&gt; /// Creates a new crate instance /// &lt;/summary&gt; /// &lt;param name=&#34;game&#34;&gt;The game this crate belongs to&lt;/param&gt; /// &lt;param name=&#34;type&#34;&gt;The type of crate to use&lt;/param&gt; /// &lt;param name=&#34;world&#34;&gt;The position and orientation of the crate in the world&lt;/param&gt; public Crate(Game game, CrateType type, Matrix world) { this.">
    <meta property="og:url" content="https://textbooks.cs.ksu.edu/cis580/14-lighting-and-cameras/05-more-crates/">
    <meta property="og:site_name" content="K-State CIS 580 Textbook">
    <meta property="og:title" content="More Crates! :: K-State CIS 580 Textbook">
    <meta property="og:description" content="Let’s up the ante a bit, and add multiple crates to the game.
Refactor Crate We don’t want all of our crates in the same spot, so it’s time to change our world matrix. Let’s refactor our Crate so we can pass a matrix in through the constructor:
/// &lt;summary&gt; /// Creates a new crate instance /// &lt;/summary&gt; /// &lt;param name=&#34;game&#34;&gt;The game this crate belongs to&lt;/param&gt; /// &lt;param name=&#34;type&#34;&gt;The type of crate to use&lt;/param&gt; /// &lt;param name=&#34;world&#34;&gt;The position and orientation of the crate in the world&lt;/param&gt; public Crate(Game game, CrateType type, Matrix world) { this.">
    <meta property="og:locale" content="en-us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Lighting and Cameras">
    <meta property="article:published_time" content="2020-03-24T10:00:00-05:00">
    <meta property="article:modified_time" content="2023-08-11T11:18:05-05:00">
    <meta itemprop="name" content="More Crates! :: K-State CIS 580 Textbook">
    <meta itemprop="description" content="Let’s up the ante a bit, and add multiple crates to the game.
Refactor Crate We don’t want all of our crates in the same spot, so it’s time to change our world matrix. Let’s refactor our Crate so we can pass a matrix in through the constructor:
/// &lt;summary&gt; /// Creates a new crate instance /// &lt;/summary&gt; /// &lt;param name=&#34;game&#34;&gt;The game this crate belongs to&lt;/param&gt; /// &lt;param name=&#34;type&#34;&gt;The type of crate to use&lt;/param&gt; /// &lt;param name=&#34;world&#34;&gt;The position and orientation of the crate in the world&lt;/param&gt; public Crate(Game game, CrateType type, Matrix world) { this.">
    <meta itemprop="datePublished" content="2020-03-24T10:00:00-05:00">
    <meta itemprop="dateModified" content="2023-08-11T11:18:05-05:00">
    <meta itemprop="wordCount" content="230">
    <title>More Crates! :: K-State CIS 580 Textbook</title>
    <link href="https://textbooks.cs.ksu.edu/cis580/14-lighting-and-cameras/05-more-crates/" rel="canonical" type="text/html" title="More Crates! :: K-State CIS 580 Textbook">
    <link href="/cis580/14-lighting-and-cameras/05-more-crates/index.xml" rel="alternate" type="application/rss+xml" title="More Crates! :: K-State CIS 580 Textbook">
    <link href="/cis580/14-lighting-and-cameras/05-more-crates/index.print.html" rel="alternate" type="text/html" title="More Crates! :: K-State CIS 580 Textbook">
    <link href="/cis580/14-lighting-and-cameras/05-more-crates/embed.html" rel="alternate" type="text/html" title="More Crates! :: K-State CIS 580 Textbook">
    <link href="/cis580/css/fontawesome-all.min.css?1737133121" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cis580/css/fontawesome-all.min.css?1737133121" rel="stylesheet"></noscript>
    <link href="/cis580/css/nucleus.css?1737133121" rel="stylesheet">
    <link href="/cis580/css/auto-complete.css?1737133121" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cis580/css/auto-complete.css?1737133121" rel="stylesheet"></noscript>
    <link href="/cis580/css/perfect-scrollbar.min.css?1737133121" rel="stylesheet">
    <link href="/cis580/css/fonts.css?1737133121" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/cis580/css/fonts.css?1737133121" rel="stylesheet"></noscript>
    <link href="/cis580/css/theme.css?1737133121" rel="stylesheet">
    <link href="/cis580/css/theme-auto.css?1737133121" rel="stylesheet" id="R-variant-style">
    <link href="/cis580/css/chroma-auto.css?1737133121" rel="stylesheet" id="R-variant-chroma-style">
    <link href="/cis580/css/variant.css?1737133121" rel="stylesheet">
    <link href="/cis580/css/print.css?1737133121" rel="stylesheet" media="print">
    <script src="/cis580/js/variant.js?1737133121"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='https:\/\/textbooks.cs.ksu.edu\/cis580';
      window.index_js_url="/cis580/index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'auto', 'light-theme', 'dark-theme' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
    
    <link href="/cis580/css/custom.css?1737133121" rel="stylesheet">
  </head>
  <body class="mobile-support tele disableInlineCopyToClipboard" data-url="/cis580/14-lighting-and-cameras/05-more-crates/">
    
    <div id="tele" class="tele mirror">
    
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      
      
      
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id="more-crates">More Crates!</h1>

<p>Let&rsquo;s up the ante a bit, and add <em>multiple</em> crates to the game.</p>
<h2 id="refactor-crate">Refactor Crate</h2>
<p>We don&rsquo;t want all of our crates in the same spot, so it&rsquo;s time to change our world matrix.  Let&rsquo;s refactor our <code>Crate</code> so we can pass a matrix in through the constructor:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl">    <span class="cs">/// &lt;summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// Creates a new crate instance</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;/summary&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;param name=&#34;game&#34;&gt;The game this crate belongs to&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;param name=&#34;type&#34;&gt;The type of crate to use&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="cs">/// &lt;param name=&#34;world&#34;&gt;The position and orientation of the crate in the world&lt;/param&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="n">Crate</span><span class="p">(</span><span class="n">Game</span> <span class="n">game</span><span class="p">,</span> <span class="n">CrateType</span> <span class="n">type</span><span class="p">,</span> <span class="n">Matrix</span> <span class="n">world</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="p">.</span><span class="n">game</span> <span class="p">=</span> <span class="n">game</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="p">.</span><span class="n">texture</span> <span class="p">=</span> <span class="n">game</span><span class="p">.</span><span class="n">Content</span><span class="p">.</span><span class="n">Load</span><span class="p">&lt;</span><span class="n">Texture2D</span><span class="p">&gt;(</span><span class="s">$&#34;crate{(int)type}_diffuse&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">InitializeVertices</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">InitializeIndices</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">InitializeEffect</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">effect</span><span class="p">.</span><span class="n">World</span> <span class="p">=</span> <span class="n">world</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span></span></span></code></pre></div><p>It is important that we set the <code>effect.World</code> only <em>after</em> we have constructed it in <code>InitializeEffect()</code>.</p>
<h2 id="refactor-game1">Refactor Game1</h2>
<p>Let&rsquo;s use our refactored <code>Crate</code> by changing the variable <code>crate</code> in your <code>Game1</code> class to an array:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl">    <span class="c1">// A collection of crates</span>
</span></span><span class="line"><span class="cl">    <span class="n">Crate</span><span class="p">[]</span> <span class="n">crates</span><span class="p">;</span></span></span></code></pre></div><p>And initialize them in the <code>Game1.LoadContent()</code> method:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl">    <span class="c1">// Make some crates</span>
</span></span><span class="line"><span class="cl">    <span class="n">crates</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Crate</span><span class="p">[]</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">new</span> <span class="n">Crate</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">CrateType</span><span class="p">.</span><span class="n">DarkCross</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">.</span><span class="n">Identity</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="k">new</span> <span class="n">Crate</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">CrateType</span><span class="p">.</span><span class="n">Slats</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">.</span><span class="n">CreateTranslation</span><span class="p">(</span><span class="m">4</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">5</span><span class="p">)),</span>
</span></span><span class="line"><span class="cl">        <span class="k">new</span> <span class="n">Crate</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">CrateType</span><span class="p">.</span><span class="n">Cross</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">.</span><span class="n">CreateTranslation</span><span class="p">(-</span><span class="m">8</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">3</span><span class="p">)),</span>
</span></span><span class="line"><span class="cl">        <span class="k">new</span> <span class="n">Crate</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">CrateType</span><span class="p">.</span><span class="n">DarkCross</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">.</span><span class="n">CreateRotationY</span><span class="p">(</span><span class="n">MathHelper</span><span class="p">.</span><span class="n">PiOver4</span><span class="p">)</span> <span class="p">*</span> <span class="n">Matrix</span><span class="p">.</span><span class="n">CreateTranslation</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">7</span><span class="p">)),</span>
</span></span><span class="line"><span class="cl">        <span class="k">new</span> <span class="n">Crate</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">CrateType</span><span class="p">.</span><span class="n">Slats</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">.</span><span class="n">CreateTranslation</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="p">-</span><span class="m">3</span><span class="p">)),</span>
</span></span><span class="line"><span class="cl">        <span class="k">new</span> <span class="n">Crate</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">CrateType</span><span class="p">.</span><span class="n">Cross</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">.</span><span class="n">CreateRotationY</span><span class="p">(</span><span class="m">3</span><span class="p">)</span> <span class="p">*</span> <span class="n">Matrix</span><span class="p">.</span><span class="n">CreateTranslation</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="p">-</span><span class="m">3</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span></span></span></code></pre></div><p>And draw the collection in <code>Game1.Draw()</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-csharp" data-lang="csharp"><span class="line"><span class="cl">    <span class="c1">// Draw some crates</span>
</span></span><span class="line"><span class="cl">    <span class="k">foreach</span><span class="p">(</span><span class="n">Crate</span> <span class="n">crate</span> <span class="k">in</span> <span class="n">crates</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">crate</span><span class="p">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">camera</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span></span></span></code></pre></div><p>Try running your code now - you should see a collection of crates.</p>
<p><a href="#R-image-31bf0e7af6b16d624b15ba04691abe18" class="lightbox-link"><img alt="Crates" class="border lazy lightbox noshadow figure-image" loading="lazy" src="/cis580/images/lighting-and-cameras-5.1.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-31bf0e7af6b16d624b15ba04691abe18"><img alt="Crates" class="border lazy lightbox noshadow lightbox-image" loading="lazy" src="/cis580/images/lighting-and-cameras-5.1.png"></a></p>

            <footer class="footline">
              
              
              
              
            </footer>
          </article>
</div>
</main>
</div>

</div>




<script src="/cis580/js/clipboard.min.js?1737133121" defer></script>
<script src="/cis580/js/perfect-scrollbar.min.js?1737133121" defer></script>
<script src="/cis580/js/theme.js?1737133121" defer></script>

<script src="/cis580/js/tele-scroll.js?1737133121" defer></script>

</body>
</html>
