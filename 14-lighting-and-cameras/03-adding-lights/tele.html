




	
	
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
		

	
	
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		

	
	
		
		
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.117.0">
    <meta name="generator" content="Relearn 5.18.0">
    <meta name="description" content="K-State CIS 580 Textbook">
    <meta name="author" content="Nathan H. Bean">
    <title>Adding Lights :: K-State CIS 580 Textbook</title>
    <link href="https://ksu-cs-textbooks.github.io/cis580/14-lighting-and-cameras/03-adding-lights/index.html" rel="canonical" type="text/html" title="Adding Lights :: K-State CIS 580 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis580/14-lighting-and-cameras/03-adding-lights/index.xml" rel="alternate" type="application/rss+xml" title="Adding Lights :: K-State CIS 580 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis580/14-lighting-and-cameras/03-adding-lights/index.print.html" rel="alternate" type="text/html" title="Adding Lights :: K-State CIS 580 Textbook">
    <link href="https://ksu-cs-textbooks.github.io/cis580/14-lighting-and-cameras/03-adding-lights/embed.html" rel="alternate" type="text/html" title="Adding Lights :: K-State CIS 580 Textbook">
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/fontawesome-all.min.css?1692031300" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis580/css/fontawesome-all.min.css?1692031300" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/nucleus.css?1692031300" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/auto-complete.css?1692031300" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis580/css/auto-complete.css?1692031300" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/perfect-scrollbar.min.css?1692031300" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/fonts.css?1692031300" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="https://ksu-cs-textbooks.github.io/cis580/css/fonts.css?1692031300" rel="stylesheet"></noscript>
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/theme.css?1692031300" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/theme-auto.css?1692031300" rel="stylesheet" id="variant-style">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/variant.css?1692031300" rel="stylesheet">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/print.css?1692031300" rel="stylesheet" media="print">
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/ie.css?1692031300" rel="stylesheet">
    <script src="https://ksu-cs-textbooks.github.io/cis580/js/url.js?1692031300"></script>
    <script src="https://ksu-cs-textbooks.github.io/cis580/js/variant.js?1692031300"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      window.index_js_url="https://ksu-cs-textbooks.github.io/cis580/index.search.js";
      var root_url="https://ksu-cs-textbooks.github.io/cis580/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      window.T_No_results_found = 'No results found for \u0022{0}\u0022';
      window.T_N_results_found = '{1} results found for \u0022{0}\u0022';
      // some further base stuff
      var baseUriFull='https:\/\/ksu-cs-textbooks.github.io\/cis580/';
      window.variants && variants.init( [ 'auto', 'light-theme', 'dark-theme' ] );
    </script>
    
    <link href="https://ksu-cs-textbooks.github.io/cis580/css/custom.css?1692031300" rel="stylesheet">

  </head>
  <body class="mobile-support tele disableInlineCopyToClipboard" data-url="https://ksu-cs-textbooks.github.io/cis580/14-lighting-and-cameras/03-adding-lights/index.html">
    
    <div id="tele" class="tele mirror">
    
    <div id="body" class="default-animation">
      
      
      
      <main id="body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>
<h1 id="adding-lights">Adding Lights</h1>

<p>Well, we have a crate.  Let&rsquo;s make it more interesting by adding some lights.  To start with, we&rsquo;ll use the <code>BasicEffect</code>&rsquo;s default lights.  Add the line:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>effect.EnableDefaultLighting();</span></span></code></pre></div><p>Into your <code>Crate.IntializeEffect()</code> method.  Then run the program again.  Notice a difference?</p>
<p>
<a href="#image-915267beb555b524a401ae0ceb1437e6" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis580/images/lighting-and-cameras-3.1.png" alt="Side-by-side comparison of a lit and unlit crate" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-915267beb555b524a401ae0ceb1437e6">
<img src="https://ksu-cs-textbooks.github.io/cis580/images/lighting-and-cameras-3.1.png" alt="Side-by-side comparison of a lit and unlit crate" class="lightbox-image" loading="lazy">
</a>.</p>
<p>The default lighting is useful to quickly see what our object will look like illuminated, but ultimately, we&rsquo;ll want to define our own lights and how they interact with our objects.</p>
<h2 id="lighting-calculations">Lighting Calculations</h2>
<p>The <code>BasicEffect</code> uses the <a href="https://en.wikipedia.org/wiki/Phong_shading" target="_blank">Phong shading model</a>
 (named after its inventor, Bui Tuong Phong).  This model approximates shading accounting for the smoothness of the object.  It uses an equation to calculate the color of each pixel.  This equation appears in the image below:</p>
<p>
<a href="#image-098f2144e412eee9566572d498b41c57" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis580/images/phong-equation.png" alt="Phong equation" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-098f2144e412eee9566572d498b41c57">
<img src="https://ksu-cs-textbooks.github.io/cis580/images/phong-equation.png" alt="Phong equation" class="lightbox-image" loading="lazy">
</a></p>
<p>Essentailly, the Phong approach calculates three different lighting values, and combines them into shading values to apply to a model.  Each of these is based on the behavior of light, which is a particle (and a wave) that travels in (largely) stright lines.  We can think of these lines as rays.</p>
<p>The first is <em>ambient</em> light, which reprsents light that has been bouncing around the scene so much that it is hitting our object from all directions.  Rather than try to capture that chaos, the Phong model simply substitutes a single flat value that is applied to all surfaces in the scene.  In a brightly lit scene, this might be a high value; for a creepy night scene, we would use a very low value to provide only dim illumination away from light sources.</p>
<p>The second is <em>diffuse</em> light, which is the light that strikes a surface and scatters.  We choose the strength of this light based on the characteristics of the material.  Rough materials have more diffuse light, as the light striking the surface bounces off in all directions, so only some of it is toward the observer.</p>
<p>The third is <em>specular</em> light, which is <em>also</em> light that strikes a surface and bounces off, and is chosen by the properties of the material.  However, high specular light corresponds to smooth surfaces - because they are smooth, light rays that strike near one another tend to bounce the same direction.  Hence, light that is striking at the right angle will all bounce towards the veiwer, creating &ldquo;hot spots&rdquo; of very bright color.</p>
<p>These calculations are based on the angle between the surface and the viewer - this is why we need to provide a normal, as well as a direction the camera is looking and a direction the light is coming from; the angles between these vectors are used in calculating these lighting components.</p>
<p>The <code>BasicEffect</code> uses the <a href="https://www.monogame.net/documentation/?page=T_Microsoft_Xna_Framework_Graphics_DirectionalLight" target="_blank">DirectionalLight class</a>
 to represent lights.  You define the diffuse and specular color as <code>Vector3</code> objects (where the x,y,and z correspond to rgb values, within the range [0..1] where 0 is no light, and 1 is full light).  You also define a direction the light is coming from as a <code>Vector3</code>.  Since ambient light doesn&rsquo;t have a direction, you simply represent it with a color <code>Vector3</code>.  When the object is rendered, the shader combines those color contributions of each light additively with the colors sampled from the texture(s) that are being applied.  We can define up to three directional light sources with the <code>BasicEffect</code>.</p>
<h2 id="customizing-our-crate-lighting">Customizing our Crate Lighting</h2>
<p>Let&rsquo;s see this in action.  Delete the <code>effect.EnableDefaultLighting()</code> line in your <code>Crate.InitializeEffect()</code> and replace it with:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    <span style="color:#75715e">// Turn on lighting</span>
</span></span><span style="display:flex;"><span>    effect.LightingEnabled = <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Set up light 0</span>
</span></span><span style="display:flex;"><span>    effect.DirectionalLight0.Enabled = <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>    effect.DirectionalLight0.Direction = <span style="color:#66d9ef">new</span> Vector3(<span style="color:#ae81ff">1f</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1f</span>);
</span></span><span style="display:flex;"><span>    effect.DirectionalLight0.DiffuseColor = <span style="color:#66d9ef">new</span> Vector3(<span style="color:#ae81ff">0.8f</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>    effect.DirectionalLight0.SpecularColor = <span style="color:#66d9ef">new</span> Vector3(<span style="color:#ae81ff">1f</span>, <span style="color:#ae81ff">0.4f</span>, <span style="color:#ae81ff">0.4f</span>);</span></span></code></pre></div><p>Notice the difference?  We&rsquo;re shining a red light onto our crate from an oblique angle, above and to the left.</p>
<p>
<a href="#image-9c9bc89c367761d4b5f0fa361564a47d" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis580/images/lighting-and-cameras-3.2.png" alt="The Illuminated Crate" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-9c9bc89c367761d4b5f0fa361564a47d">
<img src="https://ksu-cs-textbooks.github.io/cis580/images/lighting-and-cameras-3.2.png" alt="The Illuminated Crate" class="lightbox-image" loading="lazy">
</a></p>
<p>Notice how one face of the crate is in complete shadow?  Let&rsquo;s add some ambient light with the command:</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-csharp" data-lang="csharp"><span style="display:flex;"><span>    effect.AmbientLightColor = <span style="color:#66d9ef">new</span> Vector3(<span style="color:#ae81ff">0.3f</span>, <span style="color:#ae81ff">0.3f</span>, <span style="color:#ae81ff">0.3f</span>);</span></span></code></pre></div><p>
<a href="#image-4cd173158a576a5ebfa6cba9f404a6a3" class="lightbox-link">
<img src="https://ksu-cs-textbooks.github.io/cis580/images/lighting-and-cameras-3.3.png" alt="The crate with ambient light" style="height: auto; width: auto;" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="image-4cd173158a576a5ebfa6cba9f404a6a3">
<img src="https://ksu-cs-textbooks.github.io/cis580/images/lighting-and-cameras-3.3.png" alt="The crate with ambient light" class="lightbox-image" loading="lazy">
</a></p>
<p>Notice how the shadowed face is now somewhat visible?</p>
<p>Go ahead and try tweaking the values for <code>AmbientLightColor</code> and <code>DirectionalLight0</code>, and see how that changes the way your crate looks.  You can also set the properties of <code>DirectionalLight1</code> and <code>DirectionalLight2</code>.</p>

            <footer class="footline">

            </footer>
          </article>
        </div>
      </main>
    </div>
    
    </div>
    
    
    
    
    <script src="https://ksu-cs-textbooks.github.io/cis580/js/clipboard.min.js?1692031300" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis580/js/perfect-scrollbar.min.js?1692031300" defer></script>
    <script src="https://ksu-cs-textbooks.github.io/cis580/js/theme.js?1692031300" defer></script>
    
    <script src="https://ksu-cs-textbooks.github.io/cis580/js/tele-scroll.js?1692031300 defer"></script>
    
  </body>
</html>
